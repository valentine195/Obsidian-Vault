/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FantasyBestiary
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/settings/settings.ts
var import_obsidian2 = require("obsidian");

// node_modules/fast-copy/dist/esm/index.mjs
var toStringFunction = Function.prototype.toString;
var create = Object.create;
var toStringObject = Object.prototype.toString;
var LegacyCache = function() {
  function LegacyCache2() {
    this._keys = [];
    this._values = [];
  }
  LegacyCache2.prototype.has = function(key) {
    return !!~this._keys.indexOf(key);
  };
  LegacyCache2.prototype.get = function(key) {
    return this._values[this._keys.indexOf(key)];
  };
  LegacyCache2.prototype.set = function(key, value) {
    this._keys.push(key);
    this._values.push(value);
  };
  return LegacyCache2;
}();
function createCacheLegacy() {
  return new LegacyCache();
}
function createCacheModern() {
  return /* @__PURE__ */ new WeakMap();
}
var createCache = typeof WeakMap !== "undefined" ? createCacheModern : createCacheLegacy;
function getCleanClone(prototype) {
  if (!prototype) {
    return create(null);
  }
  var Constructor = prototype.constructor;
  if (Constructor === Object) {
    return prototype === Object.prototype ? {} : create(prototype);
  }
  if (~toStringFunction.call(Constructor).indexOf("[native code]")) {
    try {
      return new Constructor();
    } catch (_a2) {
    }
  }
  return create(prototype);
}
function getRegExpFlagsLegacy(regExp) {
  var flags = "";
  if (regExp.global) {
    flags += "g";
  }
  if (regExp.ignoreCase) {
    flags += "i";
  }
  if (regExp.multiline) {
    flags += "m";
  }
  if (regExp.unicode) {
    flags += "u";
  }
  if (regExp.sticky) {
    flags += "y";
  }
  return flags;
}
function getRegExpFlagsModern(regExp) {
  return regExp.flags;
}
var getRegExpFlags = /test/g.flags === "g" ? getRegExpFlagsModern : getRegExpFlagsLegacy;
function getTagLegacy(value) {
  var type = toStringObject.call(value);
  return type.substring(8, type.length - 1);
}
function getTagModern(value) {
  return value[Symbol.toStringTag] || getTagLegacy(value);
}
var getTag = typeof Symbol !== "undefined" ? getTagModern : getTagLegacy;
var defineProperty = Object.defineProperty;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var getOwnPropertyNames = Object.getOwnPropertyNames;
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var _a = Object.prototype;
var hasOwnProperty = _a.hasOwnProperty;
var propertyIsEnumerable = _a.propertyIsEnumerable;
var SUPPORTS_SYMBOL = typeof getOwnPropertySymbols === "function";
function getStrictPropertiesModern(object) {
  return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));
}
var getStrictProperties = SUPPORTS_SYMBOL ? getStrictPropertiesModern : getOwnPropertyNames;
function copyOwnPropertiesStrict(value, clone, state) {
  var properties = getStrictProperties(value);
  for (var index2 = 0, length_1 = properties.length, property = void 0, descriptor = void 0; index2 < length_1; ++index2) {
    property = properties[index2];
    if (property === "callee" || property === "caller") {
      continue;
    }
    descriptor = getOwnPropertyDescriptor(value, property);
    if (!descriptor) {
      clone[property] = state.copier(value[property], state);
      continue;
    }
    if (!descriptor.get && !descriptor.set) {
      descriptor.value = state.copier(descriptor.value, state);
    }
    try {
      defineProperty(clone, property, descriptor);
    } catch (error) {
      clone[property] = descriptor.value;
    }
  }
  return clone;
}
function copyArrayLoose(array, state) {
  var clone = new state.Constructor();
  state.cache.set(array, clone);
  for (var index2 = 0, length_2 = array.length; index2 < length_2; ++index2) {
    clone[index2] = state.copier(array[index2], state);
  }
  return clone;
}
function copyArrayStrict(array, state) {
  var clone = new state.Constructor();
  state.cache.set(array, clone);
  return copyOwnPropertiesStrict(array, clone, state);
}
function copyArrayBuffer(arrayBuffer, _state) {
  return arrayBuffer.slice(0);
}
function copyBlob(blob, _state) {
  return blob.slice(0, blob.size, blob.type);
}
function copyDataView(dataView, state) {
  return new state.Constructor(copyArrayBuffer(dataView.buffer));
}
function copyDate(date, state) {
  return new state.Constructor(date.getTime());
}
function copyMapLoose(map, state) {
  var clone = new state.Constructor();
  state.cache.set(map, clone);
  map.forEach(function(value, key) {
    clone.set(key, state.copier(value, state));
  });
  return clone;
}
function copyMapStrict(map, state) {
  return copyOwnPropertiesStrict(map, copyMapLoose(map, state), state);
}
function copyObjectLooseLegacy(object, state) {
  var clone = getCleanClone(state.prototype);
  state.cache.set(object, clone);
  for (var key in object) {
    if (hasOwnProperty.call(object, key)) {
      clone[key] = state.copier(object[key], state);
    }
  }
  return clone;
}
function copyObjectLooseModern(object, state) {
  var clone = getCleanClone(state.prototype);
  state.cache.set(object, clone);
  for (var key in object) {
    if (hasOwnProperty.call(object, key)) {
      clone[key] = state.copier(object[key], state);
    }
  }
  var symbols = getOwnPropertySymbols(object);
  for (var index2 = 0, length_3 = symbols.length, symbol = void 0; index2 < length_3; ++index2) {
    symbol = symbols[index2];
    if (propertyIsEnumerable.call(object, symbol)) {
      clone[symbol] = state.copier(object[symbol], state);
    }
  }
  return clone;
}
var copyObjectLoose = SUPPORTS_SYMBOL ? copyObjectLooseModern : copyObjectLooseLegacy;
function copyObjectStrict(object, state) {
  var clone = getCleanClone(state.prototype);
  state.cache.set(object, clone);
  return copyOwnPropertiesStrict(object, clone, state);
}
function copyPrimitiveWrapper(primitiveObject, state) {
  return new state.Constructor(primitiveObject.valueOf());
}
function copyRegExp(regExp, state) {
  var clone = new state.Constructor(regExp.source, getRegExpFlags(regExp));
  clone.lastIndex = regExp.lastIndex;
  return clone;
}
function copySelf(value, _state) {
  return value;
}
function copySetLoose(set, state) {
  var clone = new state.Constructor();
  state.cache.set(set, clone);
  set.forEach(function(value) {
    clone.add(state.copier(value, state));
  });
  return clone;
}
function copySetStrict(set, state) {
  return copyOwnPropertiesStrict(set, copySetLoose(set, state), state);
}
var isArray = Array.isArray;
var assign = Object.assign;
var getPrototypeOf = Object.getPrototypeOf;
var DEFAULT_LOOSE_OPTIONS = {
  array: copyArrayLoose,
  arrayBuffer: copyArrayBuffer,
  blob: copyBlob,
  dataView: copyDataView,
  date: copyDate,
  error: copySelf,
  map: copyMapLoose,
  object: copyObjectLoose,
  regExp: copyRegExp,
  set: copySetLoose
};
var DEFAULT_STRICT_OPTIONS = assign({}, DEFAULT_LOOSE_OPTIONS, {
  array: copyArrayStrict,
  map: copyMapStrict,
  object: copyObjectStrict,
  set: copySetStrict
});
function getTagSpecificCopiers(options) {
  return {
    Arguments: options.object,
    Array: options.array,
    ArrayBuffer: options.arrayBuffer,
    Blob: options.blob,
    Boolean: copyPrimitiveWrapper,
    DataView: options.dataView,
    Date: options.date,
    Error: options.error,
    Float32Array: options.arrayBuffer,
    Float64Array: options.arrayBuffer,
    Int8Array: options.arrayBuffer,
    Int16Array: options.arrayBuffer,
    Int32Array: options.arrayBuffer,
    Map: options.map,
    Number: copyPrimitiveWrapper,
    Object: options.object,
    Promise: copySelf,
    RegExp: options.regExp,
    Set: options.set,
    String: copyPrimitiveWrapper,
    WeakMap: copySelf,
    WeakSet: copySelf,
    Uint8Array: options.arrayBuffer,
    Uint8ClampedArray: options.arrayBuffer,
    Uint16Array: options.arrayBuffer,
    Uint32Array: options.arrayBuffer,
    Uint64Array: options.arrayBuffer
  };
}
function createCopier(options) {
  var normalizedOptions = assign({}, DEFAULT_LOOSE_OPTIONS, options);
  var tagSpecificCopiers = getTagSpecificCopiers(normalizedOptions);
  var array = tagSpecificCopiers.Array, object = tagSpecificCopiers.Object;
  function copier(value, state) {
    state.prototype = state.Constructor = void 0;
    if (!value || typeof value !== "object") {
      return value;
    }
    if (state.cache.has(value)) {
      return state.cache.get(value);
    }
    state.prototype = value.__proto__ || getPrototypeOf(value);
    state.Constructor = state.prototype && state.prototype.constructor;
    if (!state.Constructor || state.Constructor === Object) {
      return object(value, state);
    }
    if (isArray(value)) {
      return array(value, state);
    }
    var tagSpecificCopier = tagSpecificCopiers[getTag(value)];
    if (tagSpecificCopier) {
      return tagSpecificCopier(value, state);
    }
    return typeof value.then === "function" ? value : object(value, state);
  }
  return function copy(value) {
    return copier(value, {
      Constructor: void 0,
      cache: createCache(),
      copier,
      prototype: void 0
    });
  };
}
function createStrictCopier(options) {
  return createCopier(assign({}, DEFAULT_STRICT_OPTIONS, options));
}
var copyStrict = createStrictCopier({});
var index = createCopier({});

// inline-worker:__inline-worker
function inlineWorker(scriptText) {
  let blob = new Blob([scriptText], { type: "text/javascript" });
  let url = URL.createObjectURL(blob);
  let worker = new Worker(url);
  URL.revokeObjectURL(url);
  return worker;
}

// src/importers/importer.worker.ts
function Worker2() {
  return inlineWorker('var yn=Object.create;var At=Object.defineProperty;var Rn=Object.getOwnPropertyDescriptor;var Cn=Object.getOwnPropertyNames;var En=Object.getPrototypeOf,_n=Object.prototype.hasOwnProperty;var be=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var An=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Cn(e))!_n.call(t,i)&&i!==n&&At(t,i,{get:()=>e[i],enumerable:!(r=Rn(e,i))||r.enumerable});return t};var Tn=(t,e,n)=>(n=t!=null?yn(En(t)):{},An(e||!t||!t.__esModule?At(n,"default",{value:t,enumerable:!0}):n,t));var Nt=be(Tt=>{Tt.entityMap={lt:"<",gt:">",amp:"&",quot:\'"\',apos:"\'",Agrave:"\\xC0",Aacute:"\\xC1",Acirc:"\\xC2",Atilde:"\\xC3",Auml:"\\xC4",Aring:"\\xC5",AElig:"\\xC6",Ccedil:"\\xC7",Egrave:"\\xC8",Eacute:"\\xC9",Ecirc:"\\xCA",Euml:"\\xCB",Igrave:"\\xCC",Iacute:"\\xCD",Icirc:"\\xCE",Iuml:"\\xCF",ETH:"\\xD0",Ntilde:"\\xD1",Ograve:"\\xD2",Oacute:"\\xD3",Ocirc:"\\xD4",Otilde:"\\xD5",Ouml:"\\xD6",Oslash:"\\xD8",Ugrave:"\\xD9",Uacute:"\\xDA",Ucirc:"\\xDB",Uuml:"\\xDC",Yacute:"\\xDD",THORN:"\\xDE",szlig:"\\xDF",agrave:"\\xE0",aacute:"\\xE1",acirc:"\\xE2",atilde:"\\xE3",auml:"\\xE4",aring:"\\xE5",aelig:"\\xE6",ccedil:"\\xE7",egrave:"\\xE8",eacute:"\\xE9",ecirc:"\\xEA",euml:"\\xEB",igrave:"\\xEC",iacute:"\\xED",icirc:"\\xEE",iuml:"\\xEF",eth:"\\xF0",ntilde:"\\xF1",ograve:"\\xF2",oacute:"\\xF3",ocirc:"\\xF4",otilde:"\\xF5",ouml:"\\xF6",oslash:"\\xF8",ugrave:"\\xF9",uacute:"\\xFA",ucirc:"\\xFB",uuml:"\\xFC",yacute:"\\xFD",thorn:"\\xFE",yuml:"\\xFF",nbsp:"\\xA0",iexcl:"\\xA1",cent:"\\xA2",pound:"\\xA3",curren:"\\xA4",yen:"\\xA5",brvbar:"\\xA6",sect:"\\xA7",uml:"\\xA8",copy:"\\xA9",ordf:"\\xAA",laquo:"\\xAB",not:"\\xAC",shy:"\\xAD\\xAD",reg:"\\xAE",macr:"\\xAF",deg:"\\xB0",plusmn:"\\xB1",sup2:"\\xB2",sup3:"\\xB3",acute:"\\xB4",micro:"\\xB5",para:"\\xB6",middot:"\\xB7",cedil:"\\xB8",sup1:"\\xB9",ordm:"\\xBA",raquo:"\\xBB",frac14:"\\xBC",frac12:"\\xBD",frac34:"\\xBE",iquest:"\\xBF",times:"\\xD7",divide:"\\xF7",forall:"\\u2200",part:"\\u2202",exist:"\\u2203",empty:"\\u2205",nabla:"\\u2207",isin:"\\u2208",notin:"\\u2209",ni:"\\u220B",prod:"\\u220F",sum:"\\u2211",minus:"\\u2212",lowast:"\\u2217",radic:"\\u221A",prop:"\\u221D",infin:"\\u221E",ang:"\\u2220",and:"\\u2227",or:"\\u2228",cap:"\\u2229",cup:"\\u222A",int:"\\u222B",there4:"\\u2234",sim:"\\u223C",cong:"\\u2245",asymp:"\\u2248",ne:"\\u2260",equiv:"\\u2261",le:"\\u2264",ge:"\\u2265",sub:"\\u2282",sup:"\\u2283",nsub:"\\u2284",sube:"\\u2286",supe:"\\u2287",oplus:"\\u2295",otimes:"\\u2297",perp:"\\u22A5",sdot:"\\u22C5",Alpha:"\\u0391",Beta:"\\u0392",Gamma:"\\u0393",Delta:"\\u0394",Epsilon:"\\u0395",Zeta:"\\u0396",Eta:"\\u0397",Theta:"\\u0398",Iota:"\\u0399",Kappa:"\\u039A",Lambda:"\\u039B",Mu:"\\u039C",Nu:"\\u039D",Xi:"\\u039E",Omicron:"\\u039F",Pi:"\\u03A0",Rho:"\\u03A1",Sigma:"\\u03A3",Tau:"\\u03A4",Upsilon:"\\u03A5",Phi:"\\u03A6",Chi:"\\u03A7",Psi:"\\u03A8",Omega:"\\u03A9",alpha:"\\u03B1",beta:"\\u03B2",gamma:"\\u03B3",delta:"\\u03B4",epsilon:"\\u03B5",zeta:"\\u03B6",eta:"\\u03B7",theta:"\\u03B8",iota:"\\u03B9",kappa:"\\u03BA",lambda:"\\u03BB",mu:"\\u03BC",nu:"\\u03BD",xi:"\\u03BE",omicron:"\\u03BF",pi:"\\u03C0",rho:"\\u03C1",sigmaf:"\\u03C2",sigma:"\\u03C3",tau:"\\u03C4",upsilon:"\\u03C5",phi:"\\u03C6",chi:"\\u03C7",psi:"\\u03C8",omega:"\\u03C9",thetasym:"\\u03D1",upsih:"\\u03D2",piv:"\\u03D6",OElig:"\\u0152",oelig:"\\u0153",Scaron:"\\u0160",scaron:"\\u0161",Yuml:"\\u0178",fnof:"\\u0192",circ:"\\u02C6",tilde:"\\u02DC",ensp:"\\u2002",emsp:"\\u2003",thinsp:"\\u2009",zwnj:"\\u200C",zwj:"\\u200D",lrm:"\\u200E",rlm:"\\u200F",ndash:"\\u2013",mdash:"\\u2014",lsquo:"\\u2018",rsquo:"\\u2019",sbquo:"\\u201A",ldquo:"\\u201C",rdquo:"\\u201D",bdquo:"\\u201E",dagger:"\\u2020",Dagger:"\\u2021",bull:"\\u2022",hellip:"\\u2026",permil:"\\u2030",prime:"\\u2032",Prime:"\\u2033",lsaquo:"\\u2039",rsaquo:"\\u203A",oline:"\\u203E",euro:"\\u20AC",trade:"\\u2122",larr:"\\u2190",uarr:"\\u2191",rarr:"\\u2192",darr:"\\u2193",harr:"\\u2194",crarr:"\\u21B5",lceil:"\\u2308",rceil:"\\u2309",lfloor:"\\u230A",rfloor:"\\u230B",loz:"\\u25CA",spades:"\\u2660",clubs:"\\u2663",hearts:"\\u2665",diams:"\\u2666"}});var It=be(Le=>{var Ue=/[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/,bt=new RegExp("[\\\\-\\\\.0-9"+Ue.source.slice(1,-1)+"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]"),wt=new RegExp("^"+Ue.source+bt.source+"*(?::"+Ue.source+bt.source+"*)?$"),he=0,q=1,ne=2,ge=3,re=4,ie=5,de=6,we=7;function se(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,se)}se.prototype=new Error;se.prototype.name=se.name;function xt(){}xt.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),Mt(e,e={}),Nn(t,e,n,r,this.errorHandler),r.endDocument()}};function Nn(t,e,n,r,i){function s(_){if(_>65535){_-=65536;var g=55296+(_>>10),ee=56320+(_&1023);return String.fromCharCode(g,ee)}else return String.fromCharCode(_)}function o(_){var g=_.slice(1,-1);return g in n?n[g]:g.charAt(0)==="#"?s(parseInt(g.substr(1).replace("x","0x"))):(i.error("entity not found:"+_),_)}function l(_){if(_>R){var g=t.substring(R,_).replace(/&#?\\w+;/g,o);S&&u(R),r.characters(g,0,_-R),R=_}}function u(_,g){for(;_>=f&&(g=h.exec(t));)a=g.index,f=a+g[0].length,S.lineNumber++;S.columnNumber=_-a+1}for(var a=0,f=0,h=/.*(?:\\r\\n?|\\n)|.*$/g,S=r.locator,E=[{currentNSMap:e}],y={},R=0;;){try{var v=t.indexOf("<",R);if(v<0){if(!t.substr(R).match(/^\\s*$/)){var M=r.doc,P=M.createTextNode(t.substr(R));M.appendChild(P),r.currentElement=P}return}switch(v>R&&l(v),t.charAt(v+1)){case"/":var w=t.indexOf(">",v+3),b=t.substring(v+2,w),T=E.pop();w<0?(b=t.substring(v+2).replace(/[\\s<].*/,""),i.error("end tag name: "+b+" is not complete:"+T.tagName),w=v+1+b.length):b.match(/\\s</)&&(b=b.replace(/[\\s<].*/,""),i.error("end tag name: "+b+" maybe not complete"),w=v+1+b.length);var U=T.localNSMap,W=T.tagName==b,d=W||T.tagName&&T.tagName.toLowerCase()==b.toLowerCase();if(d){if(r.endElement(T.uri,T.localName,b),U)for(var G in U)r.endPrefixMapping(G);W||i.fatalError("end tag name: "+b+" is not match the current start tagName:"+T.tagName)}else E.push(T);w++;break;case"?":S&&u(v),w=xn(t,v,r);break;case"!":S&&u(v),w=$n(t,v,r,i);break;default:S&&u(v);var A=new Ot,L=E[E.length-1].currentNSMap,w=bn(t,v,A,L,o,i),j=A.length;if(!A.closed&&Dn(t,w,A.tagName,y)&&(A.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),S&&j){for(var J=Dt(S,{}),z=0;z<j;z++){var V=A[z];u(V.offset),V.locator=Dt(S,{})}r.locator=J,$t(A,r,L)&&E.push(A),r.locator=S}else $t(A,r,L)&&E.push(A);A.uri==="http://www.w3.org/1999/xhtml"&&!A.closed?w=wn(t,w,A.tagName,o,r):w++}}catch(_){if(_ instanceof se)throw _;i.error("element parse error: "+_),w=-1}w>R?R=w:l(Math.max(v,R)+1)}}function Dt(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function bn(t,e,n,r,i,s){function o(E,y,R){E in n.attributeNames&&s.fatalError("Attribute "+E+" redefined"),n.addValue(E,y,R)}for(var l,u,a=++e,f=he;;){var h=t.charAt(a);switch(h){case"=":if(f===q)l=t.slice(e,a),f=ge;else if(f===ne)f=ge;else throw new Error("attribute equal must after attrName");break;case"\'":case\'"\':if(f===ge||f===q)if(f===q&&(s.warning(\'attribute value must after "="\'),l=t.slice(e,a)),e=a+1,a=t.indexOf(h,e),a>0)u=t.slice(e,a).replace(/&#?\\w+;/g,i),o(l,u,e-1),f=ie;else throw new Error("attribute value no end \'"+h+"\' match");else if(f==re)u=t.slice(e,a).replace(/&#?\\w+;/g,i),o(l,u,e),s.warning(\'attribute "\'+l+\'" missed start quot(\'+h+")!!"),e=a+1,f=ie;else throw new Error(\'attribute value must after "="\');break;case"/":switch(f){case he:n.setTagName(t.slice(e,a));case ie:case de:case we:f=we,n.closed=!0;case re:case q:case ne:break;default:throw new Error("attribute invalid close char(\'/\')")}break;case"":return s.error("unexpected end of input"),f==he&&n.setTagName(t.slice(e,a)),a;case">":switch(f){case he:n.setTagName(t.slice(e,a));case ie:case de:case we:break;case re:case q:u=t.slice(e,a),u.slice(-1)==="/"&&(n.closed=!0,u=u.slice(0,-1));case ne:f===ne&&(u=l),f==re?(s.warning(\'attribute "\'+u+\'" missed quot(")!\'),o(l,u.replace(/&#?\\w+;/g,i),e)):((r[""]!=="http://www.w3.org/1999/xhtml"||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning(\'attribute "\'+u+\'" missed value!! "\'+u+\'" instead!!\'),o(u,u,e));break;case ge:throw new Error("attribute value missed!!")}return a;case"\\x80":h=" ";default:if(h<=" ")switch(f){case he:n.setTagName(t.slice(e,a)),f=de;break;case q:l=t.slice(e,a),f=ne;break;case re:var u=t.slice(e,a).replace(/&#?\\w+;/g,i);s.warning(\'attribute "\'+u+\'" missed quot(")!!\'),o(l,u,e);case ie:f=de;break}else switch(f){case ne:var S=n.tagName;(r[""]!=="http://www.w3.org/1999/xhtml"||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning(\'attribute "\'+l+\'" missed value!! "\'+l+\'" instead2!!\'),o(l,l,e),e=a,f=q;break;case ie:s.warning(\'attribute space is required"\'+l+\'"!!\');case de:f=q,e=a;break;case ge:f=re,e=a;break;case we:throw new Error("elements closed character \'/\' and \'>\' must be connected to")}}a++}}function $t(t,e,n){for(var r=t.tagName,i=null,h=t.length;h--;){var s=t[h],o=s.qName,l=s.value,S=o.indexOf(":");if(S>0)var u=s.prefix=o.slice(0,S),a=o.slice(S+1),f=u==="xmlns"&&a;else a=o,u=null,f=o==="xmlns"&&"";s.localName=a,f!==!1&&(i==null&&(i={},Mt(n,n={})),n[f]=i[f]=l,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(f,l))}for(var h=t.length;h--;){s=t[h];var u=s.prefix;u&&(u==="xml"&&(s.uri="http://www.w3.org/XML/1998/namespace"),u!=="xmlns"&&(s.uri=n[u||""]))}var S=r.indexOf(":");S>0?(u=t.prefix=r.slice(0,S),a=t.localName=r.slice(S+1)):(u=null,a=t.localName=r);var E=t.uri=n[u||""];if(e.startElement(E,a,r,t),t.closed){if(e.endElement(E,a,r),i)for(u in i)e.endPrefixMapping(u)}else return t.currentNSMap=n,t.localNSMap=i,!0}function wn(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\\w+;/g,r),i.characters(o,0,o.length),s)}return e+1}function Dn(t,e,n,r){var i=r[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function Mt(t,e){for(var n in t)e[n]=t[n]}function $n(t,e,n,r){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var o=Mn(t,e),l=o.length;if(l>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],a=!1,f=!1;l>3&&(/^public$/i.test(o[2][0])?(a=o[3][0],f=l>4&&o[4][0]):/^system$/i.test(o[2][0])&&(f=o[3][0]));var h=o[l-1];return n.startDTD(u,a,f),n.endDTD(),h.index+h[0].length}}return-1}function xn(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);if(i){var s=i[0].length;return n.processingInstruction(i[1],i[2]),r+2}else return-1}return-1}function Ot(){this.attributeNames={}}Ot.prototype={setTagName:function(t){if(!wt.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!wt.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function Mn(t,e){var n,r=[],i=/\'[^\']+\'|"[^"]+"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}Le.XMLReader=xt;Le.ParseError=se});var Xe=be(Ce=>{function ve(t,e){for(var n in t)e[n]=t[n]}function k(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};var r=i;i.prototype=e.prototype,i=new i,ve(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknow Class:"+t),n.constructor=t)}var On="http://www.w3.org/1999/xhtml",F={},B=F.ELEMENT_NODE=1,oe=F.ATTRIBUTE_NODE=2,De=F.TEXT_NODE=3,Wt=F.CDATA_SECTION_NODE=4,Gt=F.ENTITY_REFERENCE_NODE=5,In=F.ENTITY_NODE=6,jt=F.PROCESSING_INSTRUCTION_NODE=7,Bt=F.COMMENT_NODE=8,Vt=F.DOCUMENT_NODE=9,zt=F.DOCUMENT_TYPE_NODE=10,H=F.DOCUMENT_FRAGMENT_NODE=11,Pn=F.NOTATION_NODE=12,O={},$={},Sa=O.INDEX_SIZE_ERR=($[1]="Index size error",1),va=O.DOMSTRING_SIZE_ERR=($[2]="DOMString size error",2),kn=O.HIERARCHY_REQUEST_ERR=($[3]="Hierarchy request error",3),ya=O.WRONG_DOCUMENT_ERR=($[4]="Wrong document",4),Ra=O.INVALID_CHARACTER_ERR=($[5]="Invalid character",5),Ca=O.NO_DATA_ALLOWED_ERR=($[6]="No data allowed",6),Ea=O.NO_MODIFICATION_ALLOWED_ERR=($[7]="No modification allowed",7),Fn=O.NOT_FOUND_ERR=($[8]="Not found",8),_a=O.NOT_SUPPORTED_ERR=($[9]="Not supported",9),Pt=O.INUSE_ATTRIBUTE_ERR=($[10]="Attribute in use",10),Aa=O.INVALID_STATE_ERR=($[11]="Invalid state",11),Ta=O.SYNTAX_ERR=($[12]="Syntax error",12),Na=O.INVALID_MODIFICATION_ERR=($[13]="Invalid modification",13),ba=O.NAMESPACE_ERR=($[14]="Invalid namespace",14),wa=O.INVALID_ACCESS_ERR=($[15]="Invalid access",15);function te(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,$[t]),this.message=$[t],Error.captureStackTrace&&Error.captureStackTrace(this,te);return n.code=t,e&&(this.message=this.message+": "+e),n}te.prototype=Error.prototype;ve(O,te);function Z(){}Z.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)ae(this[r],n,t,e);return n.join("")}};function ce(t,e){this._node=t,this._refresh=e,Ge(this)}function Ge(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);nn(t,"length",n.length),ve(n,t),t._inc=e}}ce.prototype.item=function(t){return Ge(this),this[t]};k(ce,Z);function $e(){}function Ht(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function kt(t,e,n,r){if(r?e[Ht(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&Yt(i,t,r),Un(i,t,n))}}function Ft(t,e,n){var r=Ht(e,n);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var s=t.ownerDocument;s&&(Yt(s,t,n),n.ownerElement=null)}}else throw te(Fn,new Error(t.tagName+"@"+n))}$e.prototype={length:0,item:Z.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new te(Pt);var n=this.getNamedItem(t.nodeName);return kt(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new te(Pt);return n=this.getNamedItemNS(t.namespaceURI,t.localName),kt(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return Ft(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return Ft(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function Kt(t){if(this._features={},t)for(var e in t)this._features=t[e]}Kt.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!!(n&&(!e||e in n))},createDocument:function(t,e,n){var r=new ye;if(r.implementation=this,r.childNodes=new Z,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new He;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}};function I(){}I.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return qt(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return Xt(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return We(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==De&&t.nodeType==De?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(n[r]==t)return r}e=e.nodeType==oe?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==oe?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Ut(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t==\'"\'&&"&quot;"||"&#"+t.charCodeAt()+";"}ve(F,I);ve(F,I.prototype);function Se(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Se(t,e))return!0;while(t=t.nextSibling)}function ye(){}function Un(t,e,n){t&&t._inc++;var r=n.namespaceURI;r=="http://www.w3.org/2000/xmlns/"&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function Yt(t,e,n,r){t&&t._inc++;var i=n.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&delete e._nsMap[n.prefix?n.localName:""]}function je(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s}}}function Xt(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,je(t.ownerDocument,t),e}function qt(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===H){var i=e.firstChild;if(i==null)return e;var s=e.lastChild}else i=s=e;var o=n?n.previousSibling:t.lastChild;i.previousSibling=o,s.nextSibling=n,o?o.nextSibling=i:t.firstChild=i,n==null?t.lastChild=s:n.previousSibling=s;do i.parentNode=t;while(i!==s&&(i=i.nextSibling));return je(t.ownerDocument||t,t),e.nodeType==H&&(e.firstChild=e.lastChild=null),e}function Ln(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e);var r=t.lastChild}var r=t.lastChild;return e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,je(t.ownerDocument,t,e),e}ye.prototype={nodeName:"#document",nodeType:Vt,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==H){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return this.documentElement==null&&t.nodeType==B&&(this.documentElement=t),qt(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Xt(this,t)},importNode:function(t,e){return tn(this,t,e)},getElementById:function(t){var e=null;return Se(this.documentElement,function(n){if(n.nodeType==B&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=new RegExp("(^|\\\\s)"+t+"(\\\\s|$)");return new ce(this,function(n){var r=[];return Se(n.documentElement,function(i){i!==n&&i.nodeType==B&&e.test(i.getAttribute("class"))&&r.push(i)}),r})},createElement:function(t){var e=new le;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new Z;var n=e.attributes=new $e;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Me;return t.ownerDocument=this,t.childNodes=new Z,t},createTextNode:function(t){var e=new Be;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Ve;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new ze;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Ye;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new xe;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Ke;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new le,r=e.split(":"),i=n.attributes=new $e;return n.childNodes=new Z,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new xe,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}};k(ye,I);function le(){this._nsMap={}}le.prototype={nodeType:B,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===H?this.insertBefore(t,null):Ln(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new ce(this,function(e){var n=[];return Se(e,function(r){r!==e&&r.nodeType==B&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new ce(this,function(n){var r=[];return Se(n,function(i){i!==n&&i.nodeType===B&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};ye.prototype.getElementsByTagName=le.prototype.getElementsByTagName;ye.prototype.getElementsByTagNameNS=le.prototype.getElementsByTagNameNS;k(le,I);function xe(){}xe.prototype.nodeType=oe;k(xe,I);function Re(){}Re.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error($[kn])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),i=this.data.substring(t+e);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}};k(Re,I);function Be(){}Be.prototype={nodeName:"#text",nodeType:De,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};k(Be,Re);function Ve(){}Ve.prototype={nodeName:"#comment",nodeType:Bt};k(Ve,Re);function ze(){}ze.prototype={nodeName:"#cdata-section",nodeType:Wt};k(ze,Re);function He(){}He.prototype.nodeType=zt;k(He,I);function Zt(){}Zt.prototype.nodeType=Pn;k(Zt,I);function Qt(){}Qt.prototype.nodeType=In;k(Qt,I);function Ke(){}Ke.prototype.nodeType=Gt;k(Ke,I);function Me(){}Me.prototype.nodeName="#document-fragment";Me.prototype.nodeType=H;k(Me,I);function Ye(){}Ye.prototype.nodeType=jt;k(Ye,I);function Jt(){}Jt.prototype.serializeToString=function(t,e,n){return en.call(t,e,n)};I.prototype.toString=en;function en(t,e){var n=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,s=r.namespaceURI;if(s&&i==null){var i=r.lookupPrefix(s);if(i==null)var o=[{namespace:s,prefix:null}]}return ae(this,n,t,e,o),n.join("")}function Lt(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i||r==="xml"&&i==="http://www.w3.org/XML/1998/namespace"||i=="http://www.w3.org/2000/xmlns/")return!1;for(var s=n.length;s--;){var o=n[s];if(o.prefix==r)return o.namespace!=i}return!0}function ae(t,e,n,r,i){if(r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case B:i||(i=[]);var s=i.length,o=t.attributes,l=o.length,y=t.firstChild,u=t.tagName;n=On===t.namespaceURI||n,e.push("<",u);for(var a=0;a<l;a++){var f=o.item(a);f.prefix=="xmlns"?i.push({prefix:f.localName,namespace:f.value}):f.nodeName=="xmlns"&&i.push({prefix:"",namespace:f.value})}for(var a=0;a<l;a++){var f=o.item(a);if(Lt(f,n,i)){var h=f.prefix||"",S=f.namespaceURI,E=h?" xmlns:"+h:" xmlns";e.push(E,\'="\',S,\'"\'),i.push({prefix:h,namespace:S})}ae(f,e,n,r,i)}if(Lt(t,n,i)){var h=t.prefix||"",S=t.namespaceURI;if(S){var E=h?" xmlns:"+h:" xmlns";e.push(E,\'="\',S,\'"\'),i.push({prefix:h,namespace:S})}}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(e.push(">"),n&&/^script$/i.test(u))for(;y;)y.data?e.push(y.data):ae(y,e,n,r,i),y=y.nextSibling;else for(;y;)ae(y,e,n,r,i),y=y.nextSibling;e.push("</",u,">")}else e.push("/>");return;case Vt:case H:for(var y=t.firstChild;y;)ae(y,e,n,r,i),y=y.nextSibling;return;case oe:return e.push(" ",t.name,\'="\',t.value.replace(/[<&"]/g,Ut),\'"\');case De:return e.push(t.data.replace(/[<&]/g,Ut).replace(/]]>/g,"]]&gt;"));case Wt:return e.push("<![CDATA[",t.data,"]]>");case Bt:return e.push("<!--",t.data,"-->");case zt:var R=t.publicId,v=t.systemId;if(e.push("<!DOCTYPE ",t.name),R)e.push(" PUBLIC ",R),v&&v!="."&&e.push(" ",v),e.push(">");else if(v&&v!=".")e.push(" SYSTEM ",v,">");else{var M=t.internalSubset;M&&e.push(" [",M,"]"),e.push(">")}return;case jt:return e.push("<?",t.target," ",t.data,"?>");case Gt:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function tn(t,e,n){var r;switch(e.nodeType){case B:r=e.cloneNode(!1),r.ownerDocument=t;case H:break;case oe:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(tn(t,i,n)),i=i.nextSibling;return r}function We(t,e,n){var r=new e.constructor;for(var i in e){var s=e[i];typeof s!="object"&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new Z),r.ownerDocument=t,r.nodeType){case B:var o=e.attributes,l=r.attributes=new $e,u=o.length;l._ownerElement=r;for(var a=0;a<u;a++)r.setAttributeNode(We(t,o.item(a),!0));break;case oe:n=!0}if(n)for(var f=e.firstChild;f;)r.appendChild(We(t,f,n)),f=f.nextSibling;return r}function nn(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case B:case H:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};Da=t,Object.defineProperty(ce.prototype,"length",{get:function(){return Ge(this),this.$$length}}),Object.defineProperty(I.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case B:case H:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),nn=function(e,n,r){e["$$"+n]=r}}}catch(t){}var Da;Ce.Node=I;Ce.DOMException=te;Ce.DOMImplementation=Kt;Ce.XMLSerializer=Jt});var on=be(_e=>{function sn(t){this.options=t||{locator:{}}}sn.prototype.parseFromString=function(t,e){var n=this.options,r=new jn,i=n.domBuilder||new Ee,s=n.errorHandler,o=n.locator,l=n.xmlns||{},u=/\\/x?html?$/.test(e),a=u?Gn.entityMap:{lt:"<",gt:">",amp:"&",quot:\'"\',apos:"\'"};return o&&i.setDocumentLocator(o),r.errorHandler=Wn(s,i,o),r.domBuilder=n.domBuilder||i,u&&(l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t&&typeof t=="string"?r.parse(t,l,a):r.errorHandler.error("invalid doc source"),i.doc};function Wn(t,e,n){if(!t){if(e instanceof Ee)return e;t=e}var r={},i=t instanceof Function;n=n||{};function s(o){var l=t[o];!l&&i&&(l=t.length==2?function(u){t(o,u)}:t),r[o]=l&&function(u){l("[xmldom "+o+"]	"+u+qe(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function Ee(){this.cdata=!1}function ue(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Ee.prototype={startDocument:function(){this.doc=new Vn().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),o=r.length;Oe(this,s),this.currentElement=s,this.locator&&ue(this.locator,s);for(var l=0;l<o;l++){var t=r.getURI(l),u=r.getValue(l),n=r.getQName(l),a=i.createAttributeNS(t,n);this.locator&&ue(r.getLocator(l),a),a.value=a.nodeValue=u,s.setAttributeNode(a)}},endElement:function(t,e,n){var r=this.currentElement,i=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&ue(this.locator,n),Oe(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=rn.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&ue(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=rn.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&ue(this.locator,r),Oe(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&ue(this.locator,i),Oe(this,i)}},warning:function(t){console.warn("[xmldom warning]	"+t,qe(this.locator))},error:function(t){console.error("[xmldom error]	"+t,qe(this.locator))},fatalError:function(t){throw new Bn(t,this.locator)}};function qe(t){if(t)return`\n@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function rn(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\\w+/g,function(t){Ee.prototype[t]=function(){return null}});function Oe(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}var Gn=Nt(),an=It(),jn=an.XMLReader,Bn=an.ParseError,Vn=_e.DOMImplementation=Xe().DOMImplementation;_e.XMLSerializer=Xe().XMLSerializer;_e.DOMParser=sn;_e.__DOMHandler=Ee});var ln=Tn(on());async function un(t){return new Promise((e,n)=>{let r=new FileReader;r.onload=async i=>{let s=i.target.result,l=new ln.DOMParser().parseFromString(s,"application/xml").getElementsByTagName("monster"),u=[];if(!!l.length){for(let a of Array.from(l))try{let f={image:null,name:x(a,"name"),size:qn(a),type:x(a,"type"),subtype:x(a,"subtype"),alignment:x(a,"alignment"),ac:Zn(a),hp:Number(cn(a,"hp")),hit_dice:cn(a,"hit_dice"),speed:x(a,"speed"),stats:[Number(x(a,"str")),Number(x(a,"dex")),Number(x(a,"con")),Number(x(a,"int")),Number(x(a,"wis")),Number(x(a,"cha"))],saves:Yn(a),skillsaves:Hn(a),damage_vulnerabilities:x(a,"vulnerable"),damage_resistances:x(a,"resist"),damage_immunities:x(a,"immune"),condition_immunities:x(a,"conditionImmune"),senses:x(a,"senses"),languages:x(a,"languages"),cr:x(a,"cr"),traits:Ie(a,"trait"),spells:zn(a),actions:Ie(a,"action"),legendary_actions:Ie(a,"legendary"),reactions:Ie(a,"reaction"),source:Qn(a)};u.push(f)}catch(f){console.error(f);continue}e(u)}},r.readAsText(t)})}function x(t,e){let n=t.getElementsByTagName(e);if(n&&n.length)return n[0].textContent}function Ie(t,e){var i;if(!((i=t.getElementsByTagName(e))!=null&&i.length))return[];let n=t.getElementsByTagName(e),r=[];for(let s of Array.from(n)){let o=s.getElementsByTagName("name");if(!o||!o.length||!o[0].textContent||o[0].textContent.includes("Spellcasting"))continue;let l=[],u=s.getElementsByTagName("text");for(let a of Array.from(u))l.push(a.textContent);r.push({name:o[0].textContent,desc:l.join(" ")})}return r}function zn(t){var r;if(!((r=t.getElementsByTagName("trait"))!=null&&r.length))return[];let n=Array.from(t.getElementsByTagName("trait")).find(i=>{var s;return(s=i.getElementsByTagName("name")[0])==null?void 0:s.textContent.includes("Spellcasting")});return n?Array.from(n.getElementsByTagName("text")).map(i=>i.textContent.replace(/(&#8226;|\u2022)/u,"").trim()).filter(i=>i.length):[]}function Hn(t){var r;if(!((r=t.getElementsByTagName("skill"))!=null&&r.length))return[];let e=t.getElementsByTagName("skill")[0].textContent.split(", "),n=[];return e.forEach(i=>{let s=i.split(/\\s[\\+\\-]/);n.push({[s[0]]:Number(s[1])})}),n}var Kn={Str:"strength",Dex:"dexterity",Con:"constitution",Int:"intelligence",Wis:"wisdom",Cha:"charisma"};function Yn(t){var r;if(!((r=t.getElementsByTagName("save"))!=null&&r.length))return[];let e=t.getElementsByTagName("save")[0].textContent.split(", "),n=[];return e.forEach(i=>{let s=i.split(/\\s[\\+\\-]/);n.push({[Kn[s[0]]]:Number(s[1])})}),n}function cn(t,e){var s,o;if(!((s=t.getElementsByTagName("hp"))!=null&&s.length))return"";let n=t.getElementsByTagName("hp")[0].textContent,[,r,i]=(o=n.match(/(\\d+) \\(([\\s\\S]+)\\)/))!=null?o:[,"",""];return{hp:r,hit_dice:i}[e]}var Xn={T:"tiny",S:"small",M:"medium",L:"large",H:"huge",G:"gargantuan"};function qn(t){var e;return t.getElementsByTagName("size")&&(e=Xn[t.getElementsByTagName("size")[0].textContent])!=null?e:""}function Zn(t){var e;if(t.getElementsByTagName("ac")){let[,n]=(e=t.getElementsByTagName("ac")[0])==null?void 0:e.textContent.match(/(\\d+)/);return Number(n)}return 0}function Qn(t){var n,r,i,s,o,l;let e="Unknown";if((n=t.getElementsByTagName("source"))!=null&&n.length)e=t.getElementsByTagName("source")[0].textContent;else if(((r=t.getElementsByTagName("trait"))==null?void 0:r.length)&&Array.from(t.getElementsByTagName("trait")).find(u=>{var a;return((a=u.getElementsByTagName("name"))==null?void 0:a[0].textContent)=="Source"})){let u=Array.from(t.getElementsByTagName("trait")).find(a=>{var f,h;return((h=(f=a.getElementsByTagName("name"))==null?void 0:f[0])==null?void 0:h.textContent)=="Source"});e=(o=(s=(i=u==null?void 0:u.getElementsByTagName("text"))==null?void 0:i[0])==null?void 0:s.textContent)==null?void 0:o.replace(/p. \\d+/,"").trim()}else if((l=t.getElementsByTagName("description"))!=null&&l.length){let u=t.getElementsByTagName("description"),a="Source: ";if(u[0].textContent.includes(a)){let f=u[0].textContent.lastIndexOf(a);e=u[0].textContent.slice(f+a.length).split(/, ?/)[0]}}return e}var Jn={STR:"strength",DEX:"dexterity",CON:"constitution",INT:"intelligence",WIS:"wisdom",CHA:"charisma"};async function fn(t){return new Promise((e,n)=>{let r=new FileReader,i=[];r.onload=async s=>{var o,l,u,a,f,h,S,E,y,R,v,M,P,b,T,U,W,d,G,A,L,w,j,J,z,V,_,g,ee,C,X,nt,rt,it,st,at,ot,ct,lt,ut,ft,mt,pt,ht,gt,dt,St,vt,yt,Rt,Ct,Et,_t;try{let Pe=JSON.parse(s.target.result),Sn=Object.keys(Pe).filter(ke=>/^Creatures\\./.test(ke));for(let ke of Sn)try{let N=Pe[ke],vn={name:N.Name,source:(o=N.Source)!=null&&o.trim().length?(l=N.Source)==null?void 0:l.trim():"Unknown",type:(f=(a=(u=N.Type)==null?void 0:u.split(/,\\s?/))==null?void 0:a[0])==null?void 0:f.trim(),subtype:"",size:"",alignment:(E=(S=(h=N.Type)==null?void 0:h.split(/,\\s?/))==null?void 0:S[1])==null?void 0:E.trim(),hp:(y=N.HP)==null?void 0:y.Value,hit_dice:(M=(v=(R=N.HP)==null?void 0:R.Notes)==null?void 0:v.replace(/([()])/g,""))==null?void 0:M.trim(),ac:N.AC.Value,speed:(b=(P=N.Speed)==null?void 0:P.join(", "))==null?void 0:b.trim(),stats:Object.values((T=N.Abilities)!=null?T:{}),damage_immunities:(G=(d=(W=(U=N.DamageImmunities)==null?void 0:U.join("; "))==null?void 0:W.toLowerCase())==null?void 0:d.trim())!=null?G:"",damage_resistances:(j=(w=(L=(A=N.DamageResistances)==null?void 0:A.join(", "))==null?void 0:L.toLowerCase())==null?void 0:w.trim())!=null?j:"",damage_vulnerabilities:(_=(V=(z=(J=N.DamageVulnerabilities)==null?void 0:J.join(", "))==null?void 0:z.toLowerCase())==null?void 0:V.trim())!=null?_:"",condition_immunities:(X=(C=(ee=(g=N.ConditionImmunities)==null?void 0:g.join(", "))==null?void 0:ee.toLowerCase())==null?void 0:C.trim())!=null?X:"",saves:(rt=(nt=N.Saves)==null?void 0:nt.map(({Name:D,Modifier:Fe})=>({[Jn[D]]:Fe})))!=null?rt:[],skillsaves:(st=(it=N.Skills)==null?void 0:it.map(({Name:D,Modifier:Fe})=>({[D]:Fe})))!=null?st:[],senses:(ct=(ot=(at=N.Senses)==null?void 0:at.join(", "))==null?void 0:ot.trim())!=null?ct:"",languages:(ft=(ut=(lt=N.Languages)==null?void 0:lt.join(", "))==null?void 0:ut.trim())!=null?ft:"",cr:(pt=(mt=N.Challenge)==null?void 0:mt.trim())!=null?pt:"",traits:(gt=(ht=N.Traits)==null?void 0:ht.map(D=>({name:D.Name,desc:D.Content})))!=null?gt:[],actions:(St=(dt=N.Actions)==null?void 0:dt.map(D=>({name:D.Name,desc:D.Content})))!=null?St:[],bonus_actions:(yt=(vt=N.BonusActions)==null?void 0:vt.map(D=>({name:D.Name,desc:D.Content})))!=null?yt:[],reactions:(Ct=(Rt=N.Reactions)==null?void 0:Rt.map(D=>({name:D.Name,desc:D.Content})))!=null?Ct:[],legendary_actions:(_t=(Et=N.LegendaryActions)==null?void 0:Et.map(D=>({name:D.Name,desc:D.Content})))!=null?_t:[],image:null};i.push(vn)}catch(N){continue}e(i)}catch(Pe){n()}},r.readAsText(t)})}async function mn(t){return new Promise((e,n)=>{let r=new FileReader;r.onload=async i=>{var o,l,u,a,f,h,S,E,y,R,v,M,P,b,T,U,W,d,G,A,L,w,j,J,z;let s=[];try{let V=JSON.parse(i.target.result),_=[];V.creatures?_=V.creatures:_=[V];for(let g of _)try{let ee={image:null,name:g.name,source:"CritterDB",type:g.stats.race,subtype:"",size:g.stats.size,alignment:g.stats.alignment,hp:g.stats.hitPoints,hit_dice:`${Math.floor(g.stats.extraHealthFromConstitution/g.stats.abilityScoreModifiers.constitution)}d${g.stats.hitDieSize} + ${g.stats.extraHealthFromConstitution}`,ac:g.stats.armorClass,speed:g.stats.speed,stats:[g.stats.abilityScores.strength,g.stats.abilityScores.dexterity,g.stats.abilityScores.constitution,g.stats.abilityScores.intelligence,g.stats.abilityScores.wisdom,g.stats.abilityScores.charisma],damage_immunities:(l=(o=g.stats.damageImmunities)==null?void 0:o.join("; ").toLowerCase().trim())!=null?l:"",damage_resistances:(a=(u=g.stats.damageResistances)==null?void 0:u.join(", ").toLowerCase().trim())!=null?a:"",damage_vulnerabilities:(h=(f=g.stats.damageVulnerabilities)==null?void 0:f.join(", ").toLowerCase().trim())!=null?h:"",condition_immunities:(E=(S=g.stats.conditionImmunities)==null?void 0:S.join(", ").toLowerCase().trim())!=null?E:"",saves:(R=(y=g.stats.savingThrows)==null?void 0:y.map(C=>{var X;if(!(!("value"in C)&&!("modifier"in C)))return{[C.ability]:(X=C.value)!=null?X:C.modifier}}).filter(C=>C))!=null?R:[],skillsaves:(M=(v=g.stats.skills)==null?void 0:v.map(C=>{var X;if(!(!("value"in C)&&!("modifier"in C)))return{[C.name]:(X=C.value)!=null?X:C.modifier}}).filter(C=>C))!=null?M:[],senses:(b=(P=g.stats.senses)==null?void 0:P.join(", ").trim())!=null?b:"",languages:(U=(T=g.stats.languages)==null?void 0:T.join(", ").trim())!=null?U:"",cr:(W=g.stats.challengeRating)!=null?W:"",traits:(G=(d=g.stats.additionalAbilities)==null?void 0:d.map(C=>({name:C.name,desc:C.description.replace(/<[^>]*>/g,"")})))!=null?G:[],actions:(L=(A=g.stats.actions)==null?void 0:A.map(C=>({name:C.name,desc:C.description.replace(/<[^>]*>/g,"")})))!=null?L:[],reactions:(j=(w=g.stats.reactions)==null?void 0:w.map(C=>({name:C.name,desc:C.description.replace(/<[^>]*>/g,"")})))!=null?j:[],legendary_actions:(z=(J=g.stats.legendaryActions)==null?void 0:J.map(C=>({name:C.name,desc:C.description.replace(/<[^>]*>/g,"")})))!=null?z:[]};s.push(ee)}catch(ee){continue}e(s)}catch(V){n()}},r.readAsText(t)})}function Ae(t,e=0,n=" ",r=!0){let i=[];if(e==5||t==null)return"";if(typeof t=="string")return t;if(typeof t=="number")return`${t}`;if(Array.isArray(t))i.push(`${r?"(":""}${t.map(s=>Ae(s,e++)).join(n)}${r?")":""}`);else if(typeof t=="object")for(let s of Object.values(t))i.push(Ae(s,e++));return i.join(" ")}var er={str:"strength",dex:"dexterity",con:"constitution",wis:"wisdom",int:"intelligence",cha:"charisma"};function K(t){return t?t.replace(/{@condition (.+?)}/g,"$1").replace(/{@item (.+?)}/g,"$1").replace(/{@spell ([\\s\\S]+?)}/g,"$1").replace(/{@recharge (.+?)}/g,"(Recharge $1-6)").replace(/{@recharge}/g,"(Recharge 6)").replace(/{@h}/g,"").replace(/{@damage (.+?)}/g,"$1").replace(/{@atk ms}/g,"Melee Spell Attack").replace(/{@atk rs}/g,"Ranged Spell Attack").replace(/{@atk mw}/g,"Melee Weapon Attack").replace(/{@atk rw}/g,"Ranged Weapon Attack").replace(/{@atk mw,rw}/g,"Melee / Ranged Weapon Attack").replace(/{@creature (.+?)}/g,"$1").replace(/{@skill (.+?)}/g,"$1").replace(/{@dice (.+?)}/g,"$1").replace(/{@hit (\\d+?)}/g,"+$1").replace(/{@dc (\\d+?)}/g,"$1").replace(/{@quickref (.+?)\\|\\|.+?}/,"$1"):""}async function pn(t){return new Promise((e,n)=>{let r=new FileReader;r.onload=async i=>{var s,o,l,u,a,f,h,S,E,y,R,v,M,P,b;try{let T=JSON.parse(i.target.result),U=[];"monster"in T?U=T.monster:Array.isArray(T)?U=T:typeof T=="object"?U=[T]:n("Invalid monster JSON provided.");let W=[];for(let d of U)try{if(!d.name)continue;let G={image:null,name:d.name,source:mr(d),type:tr(d.type),subtype:"",size:(s=d.size)!=null&&s.length?_r[(o=d.size)==null?void 0:o[0]]:null,alignment:lr(d),hp:d.hp&&"average"in d.hp?(l=d.hp)==null?void 0:l.average:null,hit_dice:d.hp&&"formula"in d.hp?(u=d.hp)==null?void 0:u.formula:"",ac:ir(d.ac),speed:ur(d),stats:[d.str,d.dex,d.con,d.int,d.wis,d.cha],damage_immunities:K(fe(d.immune)),damage_resistances:K(fe(d.resist)),damage_vulnerabilities:K(fe(d.vulnerable)),condition_immunities:K(fe(d.conditionImmune)),saves:Object.entries((a=d.save)!=null?a:{}).map(A=>{var w,j;if(!A||!A[1])return;let[,L]=(j=(w=A[1])==null?void 0:w.match(/.*?(\\d+)/))!=null?j:[];if(!!L)return{[er[A[0]]]:L}}).filter(A=>A),skillsaves:ma(d),senses:fr(d),languages:Ae(d.languages,0,", ",!1),cr:nr(d.cr),traits:(h=(f=d.trait)==null?void 0:f.flatMap(Te))!=null?h:[],actions:(E=(S=d.action)==null?void 0:S.flatMap(Te))!=null?E:[],bonus_actions:(R=(y=d.bonus)==null?void 0:y.flatMap(Te))!=null?R:[],reactions:(M=(v=d.reaction)==null?void 0:v.flatMap(Te))!=null?M:[],legendary_actions:(b=(P=d.legendary)==null?void 0:P.flatMap(Te))!=null?b:[],spells:cr(d),spellsNotes:rr(d).join(" ")};W.push(G)}catch(G){console.error(G);continue}e(W)}catch(T){console.error("reject!!!",T),n(T)}},r.readAsText(t)})}function tr(t){if(!!t)return typeof t=="string"?t:t.type}function nr(t){if(!!t)return typeof t=="string"?t:t.cr}function rr(t){let e=[];for(let n in t.spellcasting)e.push(Ae(t.spellcasting[n].footerEntries,0,", ",!1));return e}function fe(t){if(!t)return"";let e=[];for(let n of t){if(typeof n=="string"){e.push(n);continue}if("special"in n){e.push(n.special);continue}if("immune"in n){e.push(`${fe(n.immune)}${n.note?" ":""}${n.note?n.note:""}`);continue}if("resist"in n){e.push(`${fe(n.resist)}${n.note?" ":""}${n.note?n.note:""}`);continue}}return e.join(", ")}function ir(t=[]){var n;let[e]=t;if(!!e){if(typeof e=="number")return e;if(typeof e=="string"){let[r,i]=(n=e.match(/(\\d+)/))!=null?n:[];return i?Number(i):null}if(typeof e=="object")return"special"in e?null:e.ac}}var sr={0:"Cantrips (at will)",1:"1st level",2:"2nd level",3:"3rd level",4:"4th level",5:"5th level",6:"6th level",7:"7th level",8:"8th level",9:"9th level"};function Ze(t){let e=[];for(let n of t){if(typeof n=="string"){e.push(n);continue}!n.hidden&&n.entry&&n.entry.length&&e.push(n.entry)}return K(e.join(", "))}function ar(t){let e=[];for(let n of Object.keys(t)){let r=t[n],i=Number(n.replace(/[^0-9]/,""));e.push([i,Ze(r)])}return e}function or(t){var i,s;let e=[K(((i=t.headerEntries)!=null?i:[]).join(`\n`))];if("spells"in t)try{for(let o in(s=t.spells)!=null?s:{}){let l=t.spells[o],{spells:u}=l,a=`${sr[o]}`;a+="slots"in l?` (${l.slots} slots)`:"";let f=K(u.join(", "));e.push({[a]:f})}}catch(o){throw new Error("There was an error parsing the spells.")}if("will"in t&&t.will.length>0)try{e.push({"At will":Ze(t.will)})}catch(o){throw new Error("There was an error parsing the at-will spells.")}if("ritual"in t&&t.ritual.length>0)try{e.push({Rituals:Ze(t.ritual)})}catch(o){throw new Error("There was an error parsing the ritual spells.")}let n=["rest","daily","weekly","yearly","charges"],r={rest:"/rest each",daily:"/day each",weekly:"/week each",yearly:"/year each",charges:" charges"};for(let o of n)if(o in t){let l=ar(t[o]);for(let u of l.sort((a,f)=>f[0]-a[0]))e.push({[`${u[0]}${r[o]}`]:u[1]})}return e}function cr(t){return!t.spellcasting||!t.spellcasting.length?[]:t.spellcasting.flatMap(or)}function lr(t){return t.alignment?Qe(t.alignment):null}function Qe(t){var n;if(!t)return null;let e=[];if(Array.isArray(t))for(let r of t)e.push(Qe(r));else if(typeof t=="object"){if("special"in t&&t.special!=null)return t.special;if("alignment"in t)return`${((n=t.alignment)!=null?n:[]).map(r=>Qe(r)).join(" ")}${t.chance?` (${t.chance}%)`:""}${t.note?` (${t.note})`:""}`}else{switch(t.toUpperCase()){case"L":return"lawful";case"N":return"neutral";case"NX":return"neutral (law/chaos axis)";case"NY":return"neutral (good/evil axis)";case"C":return"chaotic";case"G":return"good";case"E":return"evil";case"U":return"unaligned";case"A":return"any alignment"}return t}return e.join(" or ")}function ur(t){var l,u;let e=t.speed;if(!e)return"\\u2014";if(typeof e=="number")return`${e}`;function n(a){return typeof a=="number"?a:a.number!=null?a.number:a}function r(a){var f;return typeof a=="number"?"":(f=a==null?void 0:a.condition)!=null?f:""}let i=[],s=["walk","burrow","climb","fly","swim"];for(let a of s){if(a!="walk"&&!(a in e)&&!(a in((l=e.alternate)!=null?l:{})))continue;let f=[];i.push(`${a==="walk"?"":`${a} `}${n((u=e[a])!=null?u:0)} ft. ${r(e[a])}`.trim()),e.alternate&&e.alternate[a]&&e.alternate[a].forEach(h=>{i.push(`${a==="walk"?"":`${a} `}${n(h!=null?h:0)} ft. ${r(h)}`.trim())})}let o=", ";if(e.choose){o="; ";let a=e.choose.from.sort();a.length>1?(`${a.slice(0,a.length-1).join(", ")}${a[a.length-1]}${e.choose.amount}`,e.choose.note&&`${e.choose.note}`):i.push(`${a} ${e.choose.amount} ft.${e.choose.note?` ${e.choose.note}`:""}`)}return i.join(o)}function fr(t){var n,r;if(typeof t.senses=="string")return t.senses;let e=[(r=(n=t.senses)==null?void 0:n.join(", ").trim())!=null?r:""];return t.passive&&e.push(`passive Perception ${t.passive}`),e.join(", ")}function mr(t){var n,r,i;let e=[];return(n=t.source)!=null&&n.length&&e.push((r=c[t.source])!=null?r:t.source),(i=t.otherSources)!=null&&i.length&&e.push(...t.otherSources.map(s=>{var o;return(o=c[s.source])!=null?o:s.source})),e}function Te(t){return t.entries.reduce((n,r)=>{var s;if(typeof r!="string"){let o=(s=r.items)==null?void 0:s.map(l=>typeof l=="string"?{name:l,entries:[]}:"entry"in l?{name:l.name,entries:[l.entry]}:{name:l.name,entries:l.entries});return n.concat(o!=null?o:[])}return n.length>1||n[0].entries.push(r),n},[{name:t.name,entries:[]}]).map(({name:n,entries:r})=>({name:K(n),desc:K(r.join(`\n`))}))}var pr="F",hr="D",gr="T",dr="S",Sr="M",vr="L",yr="H",Rr="G",Cr="C",Er="V",_r={[pr]:"Fine",[hr]:"Diminutive",[gr]:"Tiny",[dr]:"Small",[Sr]:"Medium",[vr]:"Large",[yr]:"Huge",[Rr]:"Gargantuan",[Cr]:"Colossal",[Er]:"Varies"},Ar="CoS",Tr="DMG",Nr="EEPC",br="EET",wr="HotDQ",Dr="LMoP",$r="Mag",xr="MM",Mr="OotA",Or="PHB",Ir="PotA",Pr="RoT",kr="RoTOS",Fr="SCAG",Ur="SKT",Lr="ToA",Wr="ToD",Gr="TTP",jr="TftYP",Br="TftYP-AtG",Vr="TftYP-DiT",zr="TftYP-TFoF",Hr="TftYP-THSoT",Kr="TftYP-TSC",Yr="TftYP-ToH",Xr="TftYP-WPM",qr="VGM",Zr="XGE",Qr="OGA",Jr="MTF",ei="WDH",ti="WDMM",ni="GGR",ri="KKW",ii="LLK",si="GoS",ai="AI",oi="OoW",ci="ESK",li="DIP",ui="HftT",fi="DC",mi="SLW",pi="SDW",hi="BGDIA",gi="LR",di="AL",Si="SAC",vi="ERLW",yi="EFR",Ri="RMBRE",Ci="RMR",Ei="MFF",_i="AWM",Ai="IMR",Ti="SADS",Ni="EGW",bi="ToR",wi="DD",Di="FS",$i="US",xi="MOT",Mi="IDRotF",Oi="TCE",Ii="VRGR",Pi="HoL",ki="Screen",Fi="ScreenWildernessKit",Ui="HF",Li="CM",Wi="WBtW",Gi="CRCotN",Je="AL",ji=`${Je}CurseOfStrahd`,Bi=`${Je}ElementalEvil`,Vi=`${Je}RageOfDemons`,me="PS",zi=`${me}A`,Hi=`${me}I`,Ki=`${me}K`,Yi=`${me}Z`,Xi=`${me}X`,qi=`${me}D`,m="UA",Zi=`${m}Artificer`,Qi=`${m}EladrinAndGith`,Ji=`${m}Eberron`,es=`${m}FeatsForRaces`,ts=`${m}FeatsForSkills`,ns=`${m}FiendishOptions`,rs=`${m}Feats`,is=`${m}GothicHeroes`,ss=`${m}ModernMagic`,as=`${m}StarterSpells`,os=`${m}TheMysticClass`,cs=`${m}ThatOldBlackMagic`,ls=`${m}TheRangerRevised`,us=`${m}WaterborneAdventures`,fs=`${m}VariantRules`,ms=`${m}LightDarkUnderdark`,ps=`${m}RangerAndRogue`,hs=`${m}ATrioOfSubclasses`,gs=`${m}BarbarianPrimalPaths`,ds=`${m}RevisedSubclasses`,Ss=`${m}KitsOfOld`,vs=`${m}BardBardColleges`,ys=`${m}ClericDivineDomains`,Rs=`${m}Druid`,Cs=`${m}RevisedClassOptions`,Es=`${m}Fighter`,_s=`${m}Monk`,As=`${m}Paladin`,Ts=`${m}ModifyingClasses`,Ns=`${m}Sorcerer`,bs=`${m}WarlockAndWizard`,ws=`${m}TheFaithful`,Ds=`${m}WizardRevisited`,$s=`${m}ElfSubraces`,xs=`${m}MassCombat`,Ms=`${m}ThreePillarExperience`,Os=`${m}GreyhawkInitiative`,Is=`${m}ThreeSubclasses`,Ps=`${m}OrderDomain`,ks=`${m}CentaursMinotaurs`,Fs=`${m}GiantSoulSorcerer`,Us=`${m}RacesOfEberron`,Ls=`${m}RacesOfRavnica`,Ws=`${m}WGE`,Gs=`${m}OfShipsAndSea`,js=`${m}Sidekicks`,Bs=`${m}ArtificerRevisited`,Vs=`${m}BarbarianAndMonk`,zs=`${m}SorcererAndWarlock`,Hs=`${m}BardAndPaladin`,Ks=`${m}ClericDruidWizard`,Ys=`${m}FighterRangerRogue`,Xs=`${m}ClassFeatureVariants`,qs=`${m}FighterRogueWizard`,Zs=`${m}PrestigeClassesRunMagic`,Qs=`${m}Ranger`,Js=`${m}2020SubclassesPt1`,ea=`${m}2020SubclassesPt2`,ta=`${m}2020SubclassesPt3`,na=`${m}2020SubclassesPt4`,ra=`${m}2020SubclassesPt5`,ia=`${m}2020SpellsAndMagicTattoos`,sa=`${m}2020PsionicOptionsRevisited`,aa=`${m}2020SubclassesRevisited`,oa=`${m}2020Feats`,ca=`${m}2021GothicLineages`,la=`${m}2021FolkOfTheFeywild`,ua=`${m}2021DraconicOptions`,fa=`${m}2021MagesOfStrixhaven`,et="Adventurers League: ",pe="Plane Shift: ",p="Unearthed Arcana: ",Q="Tales from the Yawning Portal",c={};c[Ar]="Curse of Strahd";c[Tr]="Dungeon Master\'s Guide";c[Nr]="Elemental Evil Player\'s Companion";c[br]="Elemental Evil: Trinkets";c[wr]="Hoard of the Dragon Queen";c[Dr]="Lost Mine of Phandelver";c[$r]="Dragon Magazine";c[xr]="Monster Manual";c[Mr]="Out of the Abyss";c[Or]="Player\'s Handbook";c[Ir]="Princes of the Apocalypse";c[Pr]="The Rise of Tiamat";c[kr]="The Rise of Tiamat Online Supplement";c[Fr]="Sword Coast Adventurer\'s Guide";c[Ur]="Storm King\'s Thunder";c[Lr]="Tomb of Annihilation";c[Wr]="Tyranny of Dragons";c[Gr]="The Tortle Package";c[jr]=Q;c[Br]=`${Q}: Against the Giants`;c[Vr]=`${Q}: Dead in Thay`;c[zr]=`${Q}: The Forge of Fury`;c[Hr]=`${Q}: The Hidden Shrine of Tamoachan`;c[Kr]=`${Q}: The Sunless Citadel`;c[Yr]=`${Q}: Tomb of Horrors`;c[Xr]=`${Q}: White Plume Mountain`;c[qr]="Volo\'s Guide to Monsters";c[Zr]="Xanathar\'s Guide to Everything";c[Qr]="One Grung Above";c[Jr]="Mordenkainen\'s Tome of Foes";c[ei]="Waterdeep: Dragon Heist";c[ti]="Waterdeep: Dungeon of the Mad Mage";c[ni]="Guildmasters\' Guide to Ravnica";c[ri]="Krenko\'s Way";c[ii]="Lost Laboratory of Kwalish";c[si]="Ghosts of Saltmarsh";c[ai]="Acquisitions Incorporated";c[oi]="The Orrery of the Wanderer";c[ci]="Essentials Kit";c[li]="Dragon of Icespire Peak";c[ui]="Hunt for the Thessalhydra";c[fi]="Divine Contention";c[mi]="Storm Lord\'s Wrath";c[pi]="Sleeping Dragon\'s Wake";c[hi]="Baldur\'s Gate: Descent Into Avernus";c[gi]="Locathah Rising";c[di]="Adventurers\' League";c[Si]="Sage Advice Compendium";c[vi]="Eberron: Rising from the Last War";c[yi]="Eberron: Forgotten Relics";c[Ri]="The Lost Dungeon of Rickedness: Big Rick Energy";c[Ci]="Dungeons & Dragons vs. Rick and Morty: Basic Rules";c[Ei]="Mordenkainen\'s Fiendish Folio";c[_i]="Adventure with Muk";c[Ai]="Infernal Machine Rebuild";c[Ti]="Sapphire Anniversary Dice Set";c[Ni]="Explorer\'s Guide to Wildemount";c[bi]="Tide of Retribution";c[wi]="Dangerous Designs";c[Di]="Frozen Sick";c[$i]="Unwelcome Spirits";c[xi]="Mythic Odysseys of Theros";c[Mi]="Icewind Dale: Rime of the Frostmaiden";c[Oi]="Tasha\'s Cauldron of Everything";c[Ii]="Van Richten\'s Guide to Ravenloft";c[Pi]="The House of Lament";c[ki]="Dungeon Master\'s Screen";c[Fi]="Dungeon Master\'s Screen: Wilderness Kit";c[Ui]="Heroes\' Feast";c[Li]="Candlekeep Mysteries";c[ji]=`${et}Curse of Strahd`;c[Bi]=`${et}Elemental Evil`;c[Vi]=`${et}Rage of Demons`;c[zi]=`${pe}Amonkhet`;c[Hi]=`${pe}Innistrad`;c[Ki]=`${pe}Kaladesh`;c[Yi]=`${pe}Zendikar`;c[Xi]=`${pe}Ixalan`;c[qi]=`${pe}Dominaria`;c[Zi]=`${p}Artificer`;c[Qi]=`${p}Eladrin and Gith`;c[Ji]=`${p}Eberron`;c[es]=`${p}Feats for Races`;c[ts]=`${p}Feats for Skills`;c[ns]=`${p}Fiendish Options`;c[rs]=`${p}Feats`;c[is]=`${p}Gothic Heroes`;c[ss]=`${p}Modern Magic`;c[as]=`${p}Starter Spells`;c[os]=`${p}The Mystic Class`;c[cs]=`${p}That Old Black Magic`;c[ls]=`${p}The Ranger, Revised`;c[us]=`${p}Waterborne Adventures`;c[fs]=`${p}Variant Rules`;c[ms]=`${p}Light, Dark, Underdark!`;c[ps]=`${p}Ranger and Rogue`;c[hs]=`${p}A Trio of Subclasses`;c[gs]=`${p}Barbarian Primal Paths`;c[ds]=`${p}Revised Subclasses`;c[Ss]=`${p}Kits of Old`;c[vs]=`${p}Bard: Bard Colleges`;c[ys]=`${p}Cleric: Divine Domains`;c[Rs]=`${p}Druid`;c[Cs]=`${p}Revised Class Options`;c[Es]=`${p}Fighter`;c[_s]=`${p}Monk`;c[As]=`${p}Paladin`;c[Ts]=`${p}Modifying Classes`;c[Ns]=`${p}Sorcerer`;c[bs]=`${p}Warlock and Wizard`;c[ws]=`${p}The Faithful`;c[Ds]=`${p}Wizard Revisited`;c[$s]=`${p}Elf Subraces`;c[xs]=`${p}Mass Combat`;c[Ms]=`${p}Three-Pillar Experience`;c[Os]=`${p}Greyhawk Initiative`;c[Is]=`${p}Three Subclasses`;c[Ps]=`${p}Order Domain`;c[ks]=`${p}Centaurs and Minotaurs`;c[Fs]=`${p}Giant Soul Sorcerer`;c[Us]=`${p}Races of Eberron`;c[Ls]=`${p}Races of Ravnica`;c[Ws]="Wayfinder\'s Guide to Eberron";c[Gs]=`${p}Of Ships and the Sea`;c[js]=`${p}Sidekicks`;c[Bs]=`${p}Artificer Revisited`;c[Vs]=`${p}Barbarian and Monk`;c[zs]=`${p}Sorcerer and Warlock`;c[Hs]=`${p}Bard and Paladin`;c[Ks]=`${p}Cleric, Druid, and Wizard`;c[Ys]=`${p}Fighter, Ranger, and Rogue`;c[Xs]=`${p}Class Feature Variants`;c[qs]=`${p}Fighter, Rogue, and Wizard`;c[Zs]=`${p}Prestige Classes and Rune Magic`;c[Qs]=`${p}Ranger`;c[Js]=`${p}2020 Subclasses, Part 1`;c[ea]=`${p}2020 Subclasses, Part 2`;c[ta]=`${p}2020 Subclasses, Part 3`;c[na]=`${p}2020 Subclasses, Part 4`;c[ra]=`${p}2020 Subclasses, Part 5`;c[ia]=`${p}2020 Spells and Magic Tattoos`;c[sa]=`${p}2020 Psionic Options Revisited`;c[aa]=`${p}2020 Subclasses Revisited`;c[oa]=`${p}2020 Feats`;c[ca]=`${p}2021 Gothic Lineages`;c[la]=`${p}2021 Folk of the Feywild`;c[ua]=`${p}2021 Draconic Options`;c[fa]=`${p}2021 Mages of Strixhaven`;c[Wi]="The Wild Beyond the Witchlight";c[Gi]="Critical Role: Call of the Netherdeep";function ma(t){var i,s,o;let e=t.skill;if(!e)return[];let n=[],r=[];for(let l of Object.keys(e)){if(l=="other"){let f=e[l];for(let h of f){let S=h.oneOf;if(!S)continue;let E=Object.keys(S).sort(),y=E.shift(),R=S[y],[,v]=(i=R==null?void 0:R.match(/.*?(\\d+)/))!=null?i:[];r.push({[`plus one of the following: ${y.charAt(0).toUpperCase()+y.slice(1)}`]:v});for(let M of E.slice(1)){let P=S[M],[,b]=(s=P==null?void 0:P.match(/.*?(\\d+)/))!=null?s:[];!b||r.push({[M]:b})}}continue}let u=e[l],[,a]=(o=u==null?void 0:u.match(/.*?(\\d+)/))!=null?o:[];!a||n.push({[l]:a})}return[...n.filter(l=>l),...r.filter(l=>l)]}var hn={0:{cr:"0",value:0,xp:0},"1/8":{cr:"1/8",value:.125,xp:25},"1/4":{cr:"1/4",value:.25,xp:50},"1/2":{cr:"1/2",value:.5,xp:100},"0.125":{cr:"1/8",value:.125,xp:25},"0.25":{cr:"1/4",value:.25,xp:50},"0.5":{cr:"1/2",value:.5,xp:100},1:{cr:"1",value:1,xp:200},2:{cr:"2",value:2,xp:450},3:{cr:"3",value:3,xp:700},4:{cr:"4",value:4,xp:1100},5:{cr:"5",value:5,xp:1800},6:{cr:"6",value:6,xp:2300},7:{cr:"7",value:7,xp:2900},8:{cr:"8",value:8,xp:3900},9:{cr:"9",value:9,xp:5e3},10:{cr:"10",value:10,xp:5900},11:{cr:"11",value:11,xp:7200},12:{cr:"12",value:12,xp:8400},13:{cr:"13",value:13,xp:1e4},14:{cr:"14",value:14,xp:11500},15:{cr:"15",value:15,xp:13e3},16:{cr:"16",value:16,xp:15e3},17:{cr:"17",value:17,xp:18e3},18:{cr:"18",value:18,xp:2e4},19:{cr:"19",value:19,xp:22e3},20:{cr:"20",value:20,xp:25e3},21:{cr:"21",value:21,xp:33e3},22:{cr:"22",value:22,xp:41e3},23:{cr:"23",value:23,xp:5e4},24:{cr:"24",value:24,xp:62e3},25:{cr:"25",value:25,xp:75e3},26:{cr:"26",value:26,xp:9e4},27:{cr:"27",value:27,xp:105e3},28:{cr:"28",value:28,xp:12e4},29:{cr:"29",value:29,xp:135e3},30:{cr:"30",value:30,xp:155e3}};function Y(t){return Math.floor(((t!=null?t:10)-10)/2)}var gn={tiny:4,small:6,medium:8,large:10,huge:12,gargantuan:20},pa={str:"strength",dex:"dexterity",con:"constitution",int:"intelligence",wis:"wisdom",cha:"charisma"},Ne=class{constructor(e){this.monster=e;this.proficiency=this.getProf(this.monster);this.stats={str:this.monster.strPoints,dex:this.monster.dexPoints,con:this.monster.conPoints,int:this.monster.intPoints,wis:this.monster.wisPoints,cha:this.monster.chaPoints};this.modifiers={str:Y(this.stats.str),dex:Y(this.stats.dex),con:Y(this.stats.con),int:Y(this.stats.int),wis:Y(this.stats.wis),cha:Y(this.stats.cha)}}static parse(e){var i,s,o,l,u,a;let n=new Ne(e);return{image:null,name:e.name,source:"TetraCube",type:e.type,subtype:"",size:e.size,alignment:e.alignment,hp:(i=n.getHP(e))==null?void 0:i.hp,hit_dice:(s=n.getHP(e))==null?void 0:s.dice,ac:(u=(l=((o=e.ac)!=null?o:[])[0])==null?void 0:l.ac)!=null?u:"",speed:n.getSpeedString(e),stats:[e.strPoints,e.dexPoints,e.conPoints,e.intPoints,e.wisPoints,e.chaPoints],damage_immunities:n.parseImmune(e,"i"),damage_resistances:n.parseImmune(e,"r"),damage_vulnerabilities:n.parseImmune(e,"v"),condition_immunities:n.parseConditions(e),saves:n.getSaves(e),skillsaves:n.getSkills(e),senses:n.getSenses(e),languages:n.getLanguages(e),cr:(a=e.cr)!=null?a:"",traits:n.getTraits(e.abilities),actions:n.getTraits(e.actions),reactions:n.getTraits(e.reactions),legendary_actions:n.getTraits(e.legendaries),spells:n.getSpells(e.abilities)}}getHP(e){var n,r;if(e.customHP||e.hitDice&&/(\\d+) \\((.+)\\)/.test(e.hpText)){let[i,s,o]=(n=e.hpText.match(/(\\d+) \\((.+)\\)/))!=null?n:[];return{hp:s,dice:o}}if(e.hitDice){let i=Number(e.hitDice),s=(r=gn[e.size])!=null?r:gn.medium,o=this.modifiers.con,l=i*s/(2+.5)+o*i,u=o>0?"+":"-",a=o==0?"":` ${u} ${o*i}`;return{hp:l,dice:`${i}d${s}${a}`}}}getSpeedString(e){if(e.customSpeed)return e.speedDesc;let n=[e.speed+" ft."];return e.burrowSpeed>0&&n.push("burrow "+e.burrowSpeed+" ft."),e.climbSpeed>0&&n.push("climb "+e.climbSpeed+" ft."),e.flySpeed>0&&n.push("fly "+e.flySpeed+" ft."+(e.hover?" (hover)":"")),e.swimSpeed>0&&n.push("swim "+e.swimSpeed+" ft."),n.join(", ")}parseImmune(e,n){let r=[];"damagetypes"in e&&Array.isArray(e.damagetypes)&&r.push(...e.damagetypes.filter(s=>s.type==n).map(s=>s.name));let i=[];return"specialdamage"in e&&Array.isArray(e.specialdamage)&&i.push(...e.specialdamage.filter(s=>s.type==n).map(s=>s.name)),[r.join(", "),i.join(", ")].filter(s=>s&&s.length).join("; ")}getLanguages(e){let n=[],r=[],i=[];for(let s=0;s<e.languages.length;s++){let o=e.languages[s];o.speaks||o.speaks==null?r.push(o):i.push(o)}return r.length>0&&n.push([r.slice(0,r.length-2).map(s=>s.name).join(", "),r.slice(-1).map(s=>s.name)].filter(s=>s).join(" and ")),i.length>0&&n.push([i.slice(0,i.length-2).map(s=>s.name).join(", "),i.slice(-1).map(s=>s.name)].filter(s=>s).join(" and ")),e.telepathy>0&&n.push("telepathy "+e.telepathy+" ft."),n.length==0&&n.push("&mdash;"),n.join("; ")}getSenses(e){let n=[];e.blindsight>0&&n.push("blindsight "+e.blindsight+" ft."+(e.blind?" (blind beyond this radius)":"")),e.darkvision>0&&n.push("darkvision "+e.darkvision+" ft."),e.tremorsense>0&&n.push("tremorsense "+e.tremorsense+" ft."),e.truesight>0&&n.push("truesight "+e.truesight+" ft.");let r=e.skills.find(s=>s.name=="perception"),i=10+Y(e.wisPoints);return r!=null&&(i+=this.proficiency*("note"in r?2:1)),n.push("passive Perception "+i),n.join(", ")}transformString(e){return e.replace(/(_|\\*|\\s*>\\s*)/g,"").replace(/\\[MON(S)?\\]/g,`${this.monster.shortName&&this.monster.shortName.length?this.monster.shortName:this.monster.name}$1`).replace(/\\[(\\w+)\\]/g,(n,r)=>{if(r=r.toLowerCase(),!(r in this.modifiers))return n;let i=this.modifiers[r];return`${i>=0?"+":""}${i}`}).replace(/\\[(\\w+) (ATK|SAVE)\\s?(?:([+-])\\s?(\\d+))?\\]/g,(n,r,i="ATK",s="+",o=0)=>{if(r=r.toLowerCase(),!(r in this.modifiers))return n;o=s=="+"?Number(o):-Number(o);let l=(i=="ATK"?0:8)+this.modifiers[r]+this.proficiency+o;return`${l>=0?"+":""}${l}`}).replace(/\\[(\\w+)?\\s?(\\d*[dD]\\d+)\\s?(?:([+-])\\s?(\\d+))?\\]/g,(n,r,i,s="+",o=0)=>{var h;r=r.toLowerCase();let[,l=1,u]=(h=i.match(/(\\d*)[dD](\\d+)/))!=null?h:[];if(l||(l=1),!u)return n;o=s=="+"?Number(o):-Number(o),r in this.modifiers&&(o+=this.modifiers[r]);let a=Math.floor((u/2+.5)*l)+o,f=[`${l}d${u}`];return o&&o!=0&&(f.push(o>=0?"+":"-"),f.push(o)),`${a} (${f.join(" ")})`})}getTraits(e){return!e||!e.length?void 0:e.filter(r=>r.name!="Spellcasting").map(r=>({name:r.name,desc:this.transformString(r.desc)}))}getSpells(e){var i;if(!e.abilities||!e.abilities.length)return;let{desc:n}=(i=e.abilities.find(s=>s.name=="Spellcasting"))!=null?i:{};return n?this.transformString(n).trim().split(`\n`).filter(s=>s.length):void 0}getSaves(e){if(!("sthrows"in e)||!Array.isArray(e.sthrows)||!e.sthrows.length)return[];let n=this.proficiency,r=[];for(let i of e.sthrows){let s=i.name,o=Y(Number(e[`${s}Points`]));isNaN(o)||r.push({[pa[s]]:o+n})}return r}getSkills(e){if(!("skills"in e)||!Array.isArray(e.skills)||!e.skills.length)return[];let n=[],r=this.proficiency;for(let i of e.skills){let s=i.stat,o=Y(Number(e[`${s}Points`]));if(isNaN(o))continue;let l="note"in i;n.push({[i.name]:r+o+o*Number(l)})}return n}getProf(e){var r,i;let n=0;return e.cr=="*"&&(n=e.customProf),"cr"in e&&e.cr in hn&&(n=Math.max(Math.floor(2+(((i=(r=hn[e.cr])==null?void 0:r.value)!=null?i:0)-1)/4),2)),isNaN(Number(n))?0:Number(n)}parseConditions(e){if("conditions"in e&&Array.isArray(e.conditions))return e.conditions.map(n=>n.name).join(", ")}};async function dn(t){return new Promise((e,n)=>{let r=new FileReader,i=[];r.onload=async s=>{try{let o=JSON.parse(s.target.result),l;"monster"in o?l=o.monster:Array.isArray(o)?l=o:typeof o=="object"?l=[o]:n("Invalid monster JSON provided.");let u=[];for(let a of l)try{let f=Ne.parse(a);u.push(f)}catch(f){console.error(f);continue}e(u)}catch(o){console.error("reject!!!",o),n(o)}},r.readAsText(t)})}var tt=self;tt.onmessage=async t=>{if(!t.data)return;let{files:e,source:n}=t.data,r=[];for(let i of e)switch(n){case"5e":{let s=await pn(i);r.push(...s!=null?s:[]);break}case"critter":{let s=await mn(i);r.push(...s!=null?s:[]);break}case"improved":{let s=await fn(i);r.push(...s!=null?s:[]);break}case"appfile":{let s=await un(i);r.push(...s!=null?s:[]);break}case"tetra":{let s=await dn(i);r.push(...s!=null?s:[]);break}}tt.postMessage({monsters:r})};tt.addEventListener("unhandledrejection",function(t){throw t.reason});\n');
}

// src/importers/importer.ts
var import_obsidian = require("obsidian");

// src/utils/index.ts
function stringify(property, depth = 0, joiner = " ", parens = true) {
  const ret = [];
  if (depth == 5) {
    return "";
  }
  if (property == null)
    return ``;
  if (typeof property == "string")
    return property;
  if (typeof property == "number")
    return `${property}`;
  if (Array.isArray(property)) {
    ret.push(`${parens ? "(" : ""}${property.map((p) => stringify(p, depth++)).join(joiner)}${parens ? ")" : ""}`);
  } else if (typeof property == "object") {
    for (const value of Object.values(property)) {
      ret.push(stringify(value, depth++));
    }
  }
  return ret.join(" ");
}
function nanoid() {
  return "xyxyxyxyxyxy".replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
}

// src/importers/importer.ts
var SourcePromptModal = class extends import_obsidian.Modal {
  constructor() {
    super(...arguments);
    this.saved = false;
  }
  display() {
    this.titleEl.createSpan({ text: "Set Sources" });
    new import_obsidian.Setting(this.contentEl).setName("A source could not be found for some imported monsters. Do you wish to manually add one?").addText((t) => {
      t.setPlaceholder("Unknown").onChange((v) => {
        this.source = v;
      });
    });
    this.buildButtons(this.contentEl);
  }
  buildButtons(el) {
    new import_obsidian.Setting(el).addButton((b) => b.setCta().setIcon("checkmark").setTooltip("Save").onClick(() => {
      this.saved = true;
      this.close();
    })).addExtraButton((b) => b.setIcon("cross").setTooltip("Cancel").onClick(() => {
      this.close();
    }));
  }
  onOpen() {
    this.display();
  }
};
var getSourceFromPrompt = async (app2) => {
  return new Promise((resolve) => {
    const modal = new SourcePromptModal(app2);
    modal.onClose = () => {
      if (!modal.saved)
        resolve(null);
      resolve(modal.source);
    };
    modal.open();
  });
};
var Importer = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.workers = /* @__PURE__ */ new Map();
  }
  async import(files, source) {
    return new Promise((resolve) => {
      const worker = new Worker2();
      const id = nanoid();
      this.workers.set(id, worker);
      worker.onmessage = async (event) => {
        const { monsters } = event.data ?? {
          monsters: []
        };
        if (monsters) {
          new import_obsidian.Notice(`Successfully imported ${monsters.length} Monsters`);
          const sourceless = monsters.filter((monster) => monster.source == "Unknown" || !monster.source);
          let source2;
          if (sourceless.length && (source2 = await getSourceFromPrompt(this.plugin.app))) {
            sourceless.forEach((monster) => monster.source = source2);
          }
        }
        worker.terminate();
        this.workers.delete(id);
        resolve(monsters);
      };
      worker.onerror = (e) => {
        new import_obsidian.Notice(`There was an error importing the file.

${e.message}`);
        worker.terminate();
        this.workers.delete(id);
        resolve([]);
      };
      worker.postMessage({ files, source });
    });
  }
};

// src/settings/settings.ts
var FantasyBestiarySettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
    this.results = [];
    this.displayed = new Set(this.plugin.sources);
    this.importer = new Importer(this.plugin);
  }
  async display() {
    try {
      let { containerEl } = this;
      containerEl.empty();
      containerEl.addClass("fantasy-bestiary-settings");
      containerEl.createEl("h2", { text: "Fantasy Bestiary Settings" });
      this.integrationEl = containerEl.createDiv();
      this.systemsEl = containerEl.createDiv();
      this.downloadEl = containerEl.createDiv();
      this.importsEl = containerEl.createDiv();
      this.creatureEl = containerEl.createDiv();
      if (this.plugin.app.plugins.getPlugin("obsidian-5e-statblocks") && !this.plugin.settings.integratedStatblocks) {
        this.generateIntegration();
      }
      this.generateSystems();
      this.generateImports();
      this.generateDownloads();
      this.generateCreatures();
      const div = containerEl.createDiv("coffee");
      div.createEl("a", {
        href: "https://www.buymeacoffee.com/valentine195"
      }).createEl("img", {
        attr: {
          src: "https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=\u2615&slug=valentine195&button_colour=e3e7ef&font_colour=262626&font_family=Inter&outline_colour=262626&coffee_colour=ff0000"
        }
      });
    } catch (e) {
      console.error(e);
      new import_obsidian2.Notice("There was an error displaying the settings tab for Fantasy Bestiary.");
    }
  }
  generateIntegration() {
    this.integrationEl.empty();
    new import_obsidian2.Setting(this.integrationEl).setHeading().setName("Import Creatures from TTRPG Statblocks");
    const integrationContainer = this.integrationEl.createDiv("bestiary-additional-container");
    integrationContainer.createDiv().createEl("p", {
      text: "It looks like you were using TTRPG Statblocks to manage your bestiary. Would you like to import these creatures?"
    });
    integrationContainer.createDiv().createEl("p", {
      text: "This will remove the creatures from TTRPG Statblocks, but as long as you have updated that plugin, it will pull creatures from here."
    });
    const setting = new import_obsidian2.Setting(integrationContainer).setName("Import").addButton((b) => b.setButtonText("Import").onClick(async () => {
      setting.clear();
      setting.setName("Importing...").addExtraButton((b2) => b2.setIcon("refresh-cw").extraSettingsEl.addClass("bestiary-downloading"));
      const creatures = [
        ...app.plugins.getPlugin("obsidian-5e-statblocks").data.values()
      ].map((v) => index(v));
      this.plugin.settings.creatures.push(...creatures);
      setting.clear();
      setting.setName("Imported").setDesc(`${creatures.length} creatures imported`).addExtraButton((b2) => b2.setIcon("check"));
      this.plugin.settings.integratedStatblocks = true;
      await this.plugin.saveSettings();
      this.generateCreatures();
    })).addExtraButton((b) => b.setIcon("cross").setTooltip("No").onClick(() => {
      setting.clear();
      setting.setName("Are you sure?").setDesc("I will not ask again.").addButton((b2) => b2.setButtonText("Yes, I'm sure")).addExtraButton((b2) => b2.setIcon("cross").setTooltip("Cancel").onClick(() => this.generateIntegration()));
    }));
  }
  generateSystems() {
    this.systemsEl.empty();
    new import_obsidian2.Setting(this.systemsEl).setHeading().setName("Manage Game Systems");
    const systemsContainer = this.systemsEl.createDiv("bestiary-additional-container");
    new import_obsidian2.Setting(systemsContainer).setDesc("Game systems allow you to switch between different groups of creatures as you're playing different games - if you're running a DnD 5e game and a PF2 game simultaneously, you won't need to have both sets of creatures available at all times.");
    if (this.plugin.settings.systems.length) {
      new import_obsidian2.Setting(systemsContainer).setName("Current Active System").setDesc("Choose the active system here, which will filter monsters accordingly. Choosing 'None' enables all creatures.").addDropdown((d) => {
        d.addOption("none", "None");
        for (const system of this.plugin.settings.systems) {
          d.addOption(system.id, system.name);
        }
        d.setValue(this.plugin.settings.activeSystem);
        d.onChange(async (v) => {
          this.plugin.setActiveSystem(v);
          await this.plugin.saveSettings();
        });
      });
    }
    let tempSys;
    let textSys;
    let butSys;
    new import_obsidian2.Setting(systemsContainer).setName("Add System").setDesc("Add a new game system.").addText((t) => {
      textSys = t;
      t.onChange((v) => {
        tempSys = v;
        if (!butSys)
          return;
        if (tempSys.length && !this.plugin.settings.systems.find((s) => s.name == tempSys)) {
          butSys.setDisabled(false);
        } else {
          butSys.setDisabled(true);
        }
      });
    }).addButton((b) => {
      butSys = b;
      b.setIcon("plus").onClick(async () => {
        if (tempSys?.length) {
          this.plugin.settings.systems.push({
            name: tempSys,
            id: nanoid()
          });
          await this.plugin.saveSettings();
          this.generateSystems();
        }
      });
    });
    new import_obsidian2.Setting(systemsContainer).setName("Manage Systems");
    const additional = systemsContainer.createDiv("additional");
    if (this.plugin.settings.systems.length) {
      const systems = this.plugin.settings.systems;
      for (let i = 0; i < systems.length; i++) {
        const system = systems[i];
        const setting = new import_obsidian2.Setting(additional).setName(system.name).addExtraButton((b) => b.setIcon("pencil").onClick(() => {
          setting.controlEl.empty();
          let tempSys2;
          let butSys2;
          setting.addText((t) => {
            t.setValue(system.name).onChange((v) => {
              tempSys2 = v;
              if (!butSys2)
                return;
              if (tempSys2.length && (tempSys2 == system.name || !this.plugin.settings.systems.find((s) => s.name == tempSys2))) {
                butSys2.setDisabled(false);
              } else {
                butSys2.setDisabled(true);
              }
            });
          }).addExtraButton((b2) => {
            butSys2 = b2;
            b2.setIcon("check").onClick(() => {
              system.name = tempSys2;
              this.generateSystems();
            });
          }).addExtraButton((b2) => {
            b2.setIcon("cross").onClick(() => {
              this.generateSystems();
            });
          });
        })).addExtraButton((b) => b.setIcon("cross").onClick(async () => {
          this.plugin.settings.systems.splice(i, 1);
          if (this.plugin.settings.activeSystem == system.id) {
            this.plugin.settings.activeSystem = "none";
          }
          await this.plugin.saveSettings();
          this.generateSystems();
        }));
      }
    } else {
      additional.createSpan({ text: "Create a system to see it here." }).addClasses(["create-new", "setting-item"]);
    }
  }
  async consumeImport(element, source) {
    const { files } = element;
    if (!files?.length)
      return;
    try {
      const monsters = await this.importer.import(files, source);
      if (monsters && monsters.length) {
      }
      this.display();
    } catch (e) {
    }
  }
  async generateDownloads() {
    this.downloadEl.empty();
    new import_obsidian2.Setting(this.downloadEl).setHeading().setName("Download Creature Sets");
    const downloadContainer = this.downloadEl.createDiv("bestiary-additional-container");
    new import_obsidian2.Setting(downloadContainer).setDesc("Some basic creature sets, such as the 5e SRD, are stored online and downloadable here.");
    const sets = await (0, import_obsidian2.requestUrl)("https://raw.githubusercontent.com/valentine195/fantasy-bestiary/master/sets/sets.json").json;
    const add = new import_obsidian2.Setting(downloadContainer).setName("Available Sets");
    let additional;
    let atLeastOne = false;
    const need = [];
    for (const set of sets) {
      if (!this.plugin.settings.downloaded.includes(set.id)) {
        need.push(set);
      } else {
        if (!atLeastOne) {
          atLeastOne = true;
          new import_obsidian2.Setting(downloadContainer).setName("Downloaded Sets");
          additional = downloadContainer.createDiv("additional");
        }
        new import_obsidian2.Setting(additional).setName(set.name).addExtraButton((b) => b.setIcon("cross").onClick(async () => {
          this.plugin.settings.creatures = this.plugin.settings.creatures.filter((c) => {
            c.sets?.length == 1 && c.sets?.includes(set.id);
          });
          this.plugin.settings.downloaded = this.plugin.settings.downloaded.filter((d) => d != set.id);
          await this.plugin.saveSettings();
          this.generateCreatures();
          this.generateDownloads();
        }));
      }
    }
    if (need.length) {
      let chosen;
      add.addDropdown((d) => {
        d.onChange((v) => {
          chosen = v;
        });
        for (const set of need) {
          if (!chosen)
            chosen = set.id;
          d.addOption(set.id, set.name);
        }
      }).addExtraButton((b) => b.setIcon("download").setTooltip("Download Set").onClick(async () => {
        if (!chosen)
          return;
        b.setIcon("refresh-cw").setTooltip("downloading").extraSettingsEl.addClass("bestiary-downloading");
        try {
          const downloaded = await (0, import_obsidian2.requestUrl)(`https://raw.githubusercontent.com/valentine195/fantasy-bestiary/master/sets/${chosen}.json`).json;
          if (downloaded.system) {
            let conflict = this.plugin.hasSystemByName(downloaded.name);
            if (!conflict) {
              this.plugin.settings.systems.push({
                id: nanoid(),
                name: downloaded.name
              });
            }
            if (!conflict || await shouldAdd(this.plugin.getSystemByName(downloaded.name))) {
              const existing = this.plugin.getSystemByName(downloaded.name);
              downloaded.creatures = downloaded.creatures.map((c) => {
                c.systems = [existing.id];
                return c;
              });
            }
            this.plugin.settings.downloaded.push(chosen);
            this.plugin.settings.creatures.push(...downloaded.creatures);
          }
          await this.plugin.saveSettings();
          this.generateSystems();
          this.generateCreatures();
        } catch (e) {
          const set = sets.find((s) => s.id == chosen);
          new import_obsidian2.Notice("There was an issue downloading " + set?.name);
          console.error(e);
        } finally {
          this.generateDownloads();
        }
      })).setDesc("Download additional sets here!");
    } else {
      add.setDesc("No additional sets available for download at this time.");
    }
    add.addExtraButton((b) => b.setIcon("refresh-cw").setTooltip("Check for New Sets").onClick(() => this.generateDownloads()));
  }
  generateImports() {
    this.importsEl.empty();
    new import_obsidian2.Setting(this.importsEl).setHeading().setName("Import Homebrew Creatures");
    const importSettingsContainer = this.importsEl.createDiv("bestiary-additional-container");
    new import_obsidian2.Setting(importSettingsContainer).setDesc("Import creatures from creature files. Monsters are stored by name, so only the last creature by that name will be saved. This is destructive - any saved creature will be overwritten.");
    const importAdditional = importSettingsContainer.createDiv("additional");
    const importAppFile = new import_obsidian2.Setting(importAdditional).setName("Import DnDAppFile").setDesc("Only import content that you own.");
    const inputAppFile = createEl("input", {
      attr: {
        type: "file",
        name: "dndappfile",
        accept: ".xml",
        multiple: true
      }
    });
    inputAppFile.onchange = async () => this.consumeImport(inputAppFile, "appfile");
    importAppFile.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip("Import DnDAppFile Data");
      b.buttonEl.addClass("bestiary-file-upload");
      b.buttonEl.appendChild(inputAppFile);
      b.onClick(() => inputAppFile.click());
    });
    const importImprovedInitiative = new import_obsidian2.Setting(importAdditional).setName("Import Improved Initiative Data").setDesc("Only import content that you own.");
    const inputImprovedInitiative = createEl("input", {
      attr: {
        type: "file",
        name: "improvedinitiative",
        accept: ".json",
        multiple: true
      }
    });
    inputImprovedInitiative.onchange = async () => this.consumeImport(inputImprovedInitiative, "improved");
    importImprovedInitiative.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip("Import Improved Initiative Data");
      b.buttonEl.addClass("bestiary-file-upload");
      b.buttonEl.appendChild(inputImprovedInitiative);
      b.onClick(() => inputImprovedInitiative.click());
    });
    const importCritterDB = new import_obsidian2.Setting(importAdditional).setName("Import CritterDB Data").setDesc("Only import content that you own.");
    const inputCritterDB = createEl("input", {
      attr: {
        type: "file",
        name: "critterdb",
        accept: ".json",
        multiple: true
      }
    });
    inputCritterDB.onchange = async () => this.consumeImport(inputCritterDB, "critter");
    importCritterDB.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip("Import CritterDB Data");
      b.buttonEl.addClass("bestiary-file-upload");
      b.buttonEl.appendChild(inputCritterDB);
      b.onClick(() => inputCritterDB.click());
    });
    const import5eTools = new import_obsidian2.Setting(importAdditional).setName("Import 5e.tools Data").setDesc("Only import content that you own.");
    const input5eTools = createEl("input", {
      attr: {
        type: "file",
        name: "fivetools",
        accept: ".json",
        multiple: true
      }
    });
    input5eTools.onchange = async () => this.consumeImport(input5eTools, "5e");
    import5eTools.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip("Import 5e.tools Data");
      b.buttonEl.addClass("bestiary-file-upload");
      b.buttonEl.appendChild(input5eTools);
      b.onClick(() => input5eTools.click());
    });
    const importTetra = new import_obsidian2.Setting(importAdditional).setName("Import TetraCube Data").setDesc("Only import content that you own.");
    const inputTetra = createEl("input", {
      attr: {
        type: "file",
        name: "tetra",
        accept: ".json, .monster",
        multiple: true
      }
    });
    inputTetra.onchange = async () => this.consumeImport(inputTetra, "tetra");
    importTetra.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip("Import TetraCube Data");
      b.buttonEl.addClass("bestiary-file-upload");
      b.buttonEl.appendChild(inputTetra);
      b.onClick(() => inputTetra.click());
    });
  }
  generateCreatures() {
    this.creatureEl.empty();
    new import_obsidian2.Setting(this.creatureEl).setHeading().setName("Homebrew Creatures");
    const additionalContainer = this.creatureEl.createDiv("bestiary-additional-container bestiary-monsters");
    new import_obsidian2.Setting(additionalContainer).setName("Add Creature").addButton((b) => {
      b.setIcon("plus-with-circle").onClick(() => {
      });
    });
    const ancestor = this.containerEl.closest(".fantasy-bestiary-settings");
    const { backgroundColor, paddingTop } = getComputedStyle(ancestor);
    const filters = additionalContainer.createDiv({
      cls: "bestiary-monster-filter",
      attr: {
        style: `--bestiary-filter-offset: ${paddingTop}; --bestiary-filter-bg: ${backgroundColor}`
      }
    });
    this.filter = new import_obsidian2.Setting(filters).setClass("bestiary-filter-container").addSearch((t) => {
      t.setPlaceholder("Search Creatures").onChange((0, import_obsidian2.debounce)((v) => {
        this.showSearchResults(additional, v);
      }, 100));
    }).addExtraButton((b) => {
      b.setIcon("trash").setTooltip("Delete All Filtered Creatures").onClick(() => {
        const modal = new ConfirmModal(this.results.length, this.plugin.app);
        modal.onClose = async () => {
          if (modal.saved) {
            await this.plugin.deleteMonsters(...this.results?.map((m) => m.name) ?? []);
            this.generateCreatures();
          }
        };
        modal.open();
      });
    });
    this.setFilterDesc();
    const additional = additionalContainer.createDiv("additional");
    if (!this.plugin.creatures?.length) {
      additional.createDiv({
        attr: {
          style: "display: flex; justify-content: center; padding-bottom: 18px;"
        }
      }).createSpan({
        text: "No saved creatures! Create one to see it here."
      });
      return;
    }
    setTimeout(() => this.showSearchResults(additional, ""));
  }
  setFilterDesc() {
    this.filter.setDesc(createFragment((e) => {
      e.createSpan({
        text: `Managing ${this.plugin.settings.creatures.length} homebrew creature${this.plugin.settings.creatures.length == 1 ? "" : "s"}.`
      });
      e.createEl("p", {
        attr: {
          style: "margin: 0;"
        }
      }).createEl("small", {
        text: `Displaying: ${this.results.length} homebrew creatures.`
      });
    }));
  }
  showSearchResults(additional, search) {
    additional.empty();
    for (const item of this.performFuzzySearch(search)) {
      const content = new import_obsidian2.Setting(additional).setName(item.name);
      let desc = null, needTooltip = false;
      if (Array.isArray(item.source)) {
        let source = item.source.slice(0, 4);
        if (item.source.length > 4) {
          source.push(`and ${item.source.length - 4} more`);
          needTooltip = true;
        }
        desc = stringify(source, 0, ", ", false);
      } else if (item.source) {
        desc = item.source;
      }
      content.setDesc(desc ?? "");
      if (needTooltip) {
        content.descEl.setAttr("aria-label", stringify(item.source ?? "", 0, ", ", false));
      }
      content.addExtraButton((b) => {
        b.setIcon("info").setTooltip("View").onClick(() => {
        });
      }).addExtraButton((b) => {
        b.setIcon("pencil").setTooltip("Edit").onClick(() => {
        });
      }).addExtraButton((b) => {
        b.setIcon("trash").setTooltip("Delete").onClick(async () => {
          await this.plugin.deleteMonsters(item.name);
          this.showSearchResults(additional, search);
        });
      });
    }
    this.setFilterDesc();
  }
  performFuzzySearch(input) {
    const results = [];
    for (const resource of this.plugin.sorted) {
      if (!resource.name && !resource.source)
        continue;
      if (typeof resource.source == "string" && !this.displayed.has(resource.source))
        continue;
      if (Array.isArray(resource.source) && !resource.source.find((s) => this.displayed.has(s)))
        continue;
      const search = (0, import_obsidian2.prepareSimpleSearch)(input);
      let result = search(resource.name);
      if (!result && resource.source != null) {
        result = search(stringify(resource.source));
      }
      if (result) {
        results.push(resource);
      }
    }
    this.results = results.slice(0, 100);
    return this.results;
  }
};
var ConfirmModal = class extends import_obsidian2.Modal {
  constructor(filtered, app2) {
    super(app2);
    this.filtered = filtered;
    this.saved = false;
  }
  onOpen() {
    this.titleEl.setText("Are you sure?");
    this.contentEl.createEl("p", {
      text: `This will delete ${this.filtered} creatures. This cannot be undone.`
    });
    new import_obsidian2.Setting(this.contentEl).setClass("no-border-top").addButton((b) => {
      b.setIcon("checkmark").setCta().onClick(() => {
        this.saved = true;
        this.close();
      });
    }).addExtraButton((b) => b.setIcon("cross").onClick(() => {
      this.saved = true;
      this.close();
    }));
  }
};
async function shouldAdd(system) {
  return new Promise((resolve, reject) => {
    let result = false;
    const modal = new import_obsidian2.Modal(app);
    modal.onOpen = () => {
      modal.titleEl.setText("Game System Conflict");
      modal.contentEl.createEl("p", {
        text: "This creature set is tied to a game system that you already have defined."
      });
      modal.contentEl.createEl("p", {
        text: `Should these creatures be added to the ${system.name} system?`
      });
      new import_obsidian2.Setting(modal.contentEl).addButton((b) => b.setButtonText("Yes").setCta().onClick(() => {
        result = true;
        modal.close();
      })).addButton((b) => b.setButtonText("No").onClick(() => {
        modal.close();
      }));
    };
    modal.onClose = () => resolve(result);
    modal.open();
  });
}

// node_modules/fast-sort/dist/sort.es.js
var castComparer = function(comparer) {
  return function(a, b, order) {
    return comparer(a, b, order) * order;
  };
};
var throwInvalidConfigErrorIfTrue = function(condition, context) {
  if (condition)
    throw Error("Invalid sort config: " + context);
};
var unpackObjectSorter = function(sortByObj) {
  var _a2 = sortByObj || {}, asc = _a2.asc, desc = _a2.desc;
  var order = asc ? 1 : -1;
  var sortBy = asc || desc;
  throwInvalidConfigErrorIfTrue(!sortBy, "Expected `asc` or `desc` property");
  throwInvalidConfigErrorIfTrue(asc && desc, "Ambiguous object with `asc` and `desc` config properties");
  var comparer = sortByObj.comparer && castComparer(sortByObj.comparer);
  return { order, sortBy, comparer };
};
var multiPropertySorterProvider = function(defaultComparer2) {
  return function multiPropertySorter(sortBy, sortByArr, depth, order, comparer, a, b) {
    var valA;
    var valB;
    if (typeof sortBy === "string") {
      valA = a[sortBy];
      valB = b[sortBy];
    } else if (typeof sortBy === "function") {
      valA = sortBy(a);
      valB = sortBy(b);
    } else {
      var objectSorterConfig = unpackObjectSorter(sortBy);
      return multiPropertySorter(objectSorterConfig.sortBy, sortByArr, depth, objectSorterConfig.order, objectSorterConfig.comparer || defaultComparer2, a, b);
    }
    var equality = comparer(valA, valB, order);
    if ((equality === 0 || valA == null && valB == null) && sortByArr.length > depth) {
      return multiPropertySorter(sortByArr[depth], sortByArr, depth + 1, order, comparer, a, b);
    }
    return equality;
  };
};
function getSortStrategy(sortBy, comparer, order) {
  if (sortBy === void 0 || sortBy === true) {
    return function(a, b) {
      return comparer(a, b, order);
    };
  }
  if (typeof sortBy === "string") {
    throwInvalidConfigErrorIfTrue(sortBy.includes("."), "String syntax not allowed for nested properties.");
    return function(a, b) {
      return comparer(a[sortBy], b[sortBy], order);
    };
  }
  if (typeof sortBy === "function") {
    return function(a, b) {
      return comparer(sortBy(a), sortBy(b), order);
    };
  }
  if (Array.isArray(sortBy)) {
    var multiPropSorter_1 = multiPropertySorterProvider(comparer);
    return function(a, b) {
      return multiPropSorter_1(sortBy[0], sortBy, 1, order, comparer, a, b);
    };
  }
  var objectSorterConfig = unpackObjectSorter(sortBy);
  return getSortStrategy(objectSorterConfig.sortBy, objectSorterConfig.comparer || comparer, objectSorterConfig.order);
}
var sortArray = function(order, ctx, sortBy, comparer) {
  var _a2;
  if (!Array.isArray(ctx)) {
    return ctx;
  }
  if (Array.isArray(sortBy) && sortBy.length < 2) {
    _a2 = sortBy, sortBy = _a2[0];
  }
  return ctx.sort(getSortStrategy(sortBy, comparer, order));
};
function createNewSortInstance(opts) {
  var comparer = castComparer(opts.comparer);
  return function(_ctx) {
    var ctx = Array.isArray(_ctx) && !opts.inPlaceSorting ? _ctx.slice() : _ctx;
    return {
      asc: function(sortBy) {
        return sortArray(1, ctx, sortBy, comparer);
      },
      desc: function(sortBy) {
        return sortArray(-1, ctx, sortBy, comparer);
      },
      by: function(sortBy) {
        return sortArray(1, ctx, sortBy, comparer);
      }
    };
  };
}
var defaultComparer = function(a, b, order) {
  if (a == null)
    return order;
  if (b == null)
    return -order;
  if (a < b)
    return -1;
  if (a > b)
    return 1;
  return 0;
};
var sort = createNewSortInstance({
  comparer: defaultComparer
});
var inPlaceSort = createNewSortInstance({
  comparer: defaultComparer,
  inPlaceSorting: true
});

// src/main.ts
var DEFAULT_SETTINGS = {
  downloaded: [],
  systems: [],
  activeSystem: "none",
  creatures: [],
  integratedStatblocks: false
};
var FantasyBestiary = class extends import_obsidian3.Plugin {
  get creatures() {
    return this.settings.creatures;
  }
  get sorted() {
    return sort(this.creatures).asc((m) => m.name);
  }
  get sources() {
    const sources = /* @__PURE__ */ new Set();
    for (const creature of this.creatures) {
      if (!creature.source)
        continue;
      if (Array.isArray(creature.source)) {
        for (const source of creature.source) {
          sources.add(source);
        }
      }
      if (typeof creature.source == "string") {
        sources.add(creature.source);
      }
    }
    return sources;
  }
  deleteMonsters(...monsters) {
    throw new Error("Method not implemented.");
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new FantasyBestiarySettingTab(app, this));
    (0, import_obsidian3.addIcon)("bestiary-game-system", `<svg xmlns="http://www.w3.org/2000/svg" fill=currentColor viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 43 43 0 96 0H384h32c17.7 0 32 14.3 32 32V352c0 17.7-14.3 32-32 32v64c17.7 0 32 14.3 32 32s-14.3 32-32 32H384 96c-53 0-96-43-96-96V96zM64 416c0 17.7 14.3 32 32 32H352V384H96c-17.7 0-32 14.3-32 32zM320 112c0-35.3-35.8-64-80-64s-80 28.7-80 64c0 20.9 12.6 39.5 32 51.2V176c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16V163.2c19.4-11.7 32-30.3 32-51.2zM208 128c-8.8 0-16-7.2-16-16s7.2-16 16-16s16 7.2 16 16s-7.2 16-16 16zm80-16c0 8.8-7.2 16-16 16s-16-7.2-16-16s7.2-16 16-16s16 7.2 16 16zM134.3 209.3c-8.1-3.5-17.5 .3-21 8.4s.3 17.5 8.4 21L199.4 272l-77.7 33.3c-8.1 3.5-11.9 12.9-8.4 21s12.9 11.9 21 8.4L240 289.4l105.7 45.3c8.1 3.5 17.5-.3 21-8.4s-.3-17.5-8.4-21L280.6 272l77.7-33.3c8.1-3.5 11.9-12.9 8.4-21s-12.9-11.9-21-8.4L240 254.6 134.3 209.3z"/></svg>`);
    this.app.workspace.onLayoutReady(() => {
      this.statusBar = this.addStatusBarItem();
      this.statusBar.addClass("fantasy-bestiary-status-bar");
      this.buildStatusBar();
      this.addCommand({
        name: "Change Game System",
        id: "change-game-system",
        checkCallback: (checking) => {
          if (this.settings.systems.length) {
            if (!checking) {
            }
            return true;
          }
        }
      });
    });
  }
  buildStatusBar() {
    (0, import_obsidian3.setIcon)(this.statusBar.createDiv(), "bestiary-game-system");
    this.statusBarSystem = this.statusBar.createDiv({
      text: this.getSystemById(this.settings.activeSystem)?.name ?? "None"
    });
    this.statusBar.onClickEvent((evt) => {
      const menu = this.getStatusBarMenu();
      menu.showAtMouseEvent(evt);
    });
  }
  getStatusBarMenu() {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => {
      item.setTitle("None");
      if (this.settings.activeSystem == "none") {
        item.setChecked(true);
      }
      item.onClick(() => {
        this.setActiveSystem("none");
      });
    });
    for (const system of this.settings.systems) {
      menu.addItem((item) => {
        item.setTitle(system.name);
        if (this.settings.activeSystem == system.id) {
          item.setChecked(true);
        }
        item.onClick(() => {
          this.setActiveSystem(system.id);
        });
      });
    }
    return menu;
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  hasSystemById(id) {
    return this.settings.systems.find((sys) => sys.id == id) != null;
  }
  hasSystemByName(name) {
    return this.settings.systems.find((sys) => sys.name == name) != null;
  }
  getSystemById(id) {
    return this.settings.systems.find((sys) => sys.id == id);
  }
  getSystemByName(name) {
    return this.settings.systems.find((sys) => sys.name == name);
  }
  async setActiveSystem(id) {
    this.settings.activeSystem = id;
    const system = this.getSystemById(id);
    this.statusBarSystem.setText(system?.name ?? "None");
    await this.saveSettings();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vR2l0SHViL2ZhbnRhc3ktYmVzdGlhcnkvc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vR2l0SHViL2ZhbnRhc3ktYmVzdGlhcnkvc3JjL3NldHRpbmdzL3NldHRpbmdzLnRzIiwgIi4uLy4uLy4uLy4uL0dpdEh1Yi9mYW50YXN5LWJlc3RpYXJ5L3NyYy91dGlscy50cyIsICIuLi8uLi8uLi8uLi9HaXRIdWIvZmFudGFzeS1iZXN0aWFyeS9zcmMvY29waWVyLnRzIiwgIi4uLy4uLy4uLy4uL0dpdEh1Yi9mYW50YXN5LWJlc3RpYXJ5L3NyYy9pbmRleC50cyIsICJpbmxpbmUtd29ya2VyOl9faW5saW5lLXdvcmtlciIsICIuLi8uLi8uLi8uLi9HaXRIdWIvZmFudGFzeS1iZXN0aWFyeS9zcmMvaW1wb3J0ZXJzL2ltcG9ydGVyLndvcmtlci50cyIsICIuLi8uLi8uLi8uLi9HaXRIdWIvZmFudGFzeS1iZXN0aWFyeS9zcmMvaW1wb3J0ZXJzL2ltcG9ydGVyLnRzIiwgIi4uLy4uLy4uLy4uL0dpdEh1Yi9mYW50YXN5LWJlc3RpYXJ5L3NyYy91dGlscy9pbmRleC50cyIsICIuLi8uLi8uLi8uLi9HaXRIdWIvZmFudGFzeS1iZXN0aWFyeS9ub2RlX21vZHVsZXMvZmFzdC1zb3J0L2Rpc3Qvc29ydC5lcy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgYWRkSWNvbiwgTWVudSwgUGx1Z2luLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNb25zdGVyIH0gZnJvbSBcIi4vQHR5cGVzXCI7XG5pbXBvcnQgeyBHYW1lU3lzdGVtIH0gZnJvbSBcIi4vQHR5cGVzL3N5c3RlbXNcIjtcbmltcG9ydCB0eXBlIHsgUGx1Z2lucyB9IGZyb20gXCIuLi8uLi9vYnNpZGlhbi1vdmVybG9hZFwiO1xuaW1wb3J0IEZhbnRhc3lCZXN0aWFyeVNldHRpbmdUYWIgZnJvbSBcIi4vc2V0dGluZ3Mvc2V0dGluZ3NcIjtcbmltcG9ydCB7IHNvcnQgfSBmcm9tIFwiZmFzdC1zb3J0XCI7XG5cbmRlY2xhcmUgbW9kdWxlIFwib2JzaWRpYW5cIiB7XG5cdGludGVyZmFjZSBBcHAge1xuXHRcdHBsdWdpbnM6IHtcblx0XHRcdGdldFBsdWdpbjxUIGV4dGVuZHMga2V5b2YgUGx1Z2lucz4ocGx1Z2luOiBUKTogUGx1Z2luc1tUXTtcblx0XHR9O1xuXHR9XG59XG5cbmludGVyZmFjZSBGYW50YXN5QmVzdGlhcnlTZXR0aW5ncyB7XG5cdGRvd25sb2FkZWQ6IHN0cmluZ1tdO1xuXHRzeXN0ZW1zOiBHYW1lU3lzdGVtW107XG5cdGFjdGl2ZVN5c3RlbTogc3RyaW5nO1xuXHRjcmVhdHVyZXM6IE1vbnN0ZXJbXTtcblx0aW50ZWdyYXRlZFN0YXRibG9ja3M6IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEZhbnRhc3lCZXN0aWFyeVNldHRpbmdzID0ge1xuXHRkb3dubG9hZGVkOiBbXSxcblx0c3lzdGVtczogW10sXG5cdGFjdGl2ZVN5c3RlbTogXCJub25lXCIsXG5cdGNyZWF0dXJlczogW10sXG5cdGludGVncmF0ZWRTdGF0YmxvY2tzOiBmYWxzZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZhbnRhc3lCZXN0aWFyeSBleHRlbmRzIFBsdWdpbiB7XG5cdHN0YXR1c0JhcjogSFRNTEVsZW1lbnQ7XG5cdHN0YXR1c0JhclN5c3RlbTogSFRNTERpdkVsZW1lbnQ7XG5cdHN0YXR1c0Jhck1lbnU6IE1lbnU7XG5cdGdldCBjcmVhdHVyZXMoKTogTW9uc3RlcltdIHtcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5jcmVhdHVyZXM7XG5cdH1cblx0Z2V0IHNvcnRlZCgpOiBNb25zdGVyW10ge1xuXHRcdHJldHVybiBzb3J0PE1vbnN0ZXI+KHRoaXMuY3JlYXR1cmVzKS5hc2MoKG0pID0+IG0ubmFtZSk7XG5cdH1cblx0Z2V0IHNvdXJjZXMoKTogU2V0PHN0cmluZz4ge1xuXHRcdGNvbnN0IHNvdXJjZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXHRcdGZvciAoY29uc3QgY3JlYXR1cmUgb2YgdGhpcy5jcmVhdHVyZXMpIHtcblx0XHRcdGlmICghY3JlYXR1cmUuc291cmNlKSBjb250aW51ZTtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KGNyZWF0dXJlLnNvdXJjZSkpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBzb3VyY2Ugb2YgY3JlYXR1cmUuc291cmNlKSB7XG5cdFx0XHRcdFx0c291cmNlcy5hZGQoc291cmNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBjcmVhdHVyZS5zb3VyY2UgPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRzb3VyY2VzLmFkZChjcmVhdHVyZS5zb3VyY2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gc291cmNlcztcblx0fVxuXHRkZWxldGVNb25zdGVycyguLi5tb25zdGVyczogc3RyaW5nW10pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcblx0fVxuXHRzZXR0aW5nczogRmFudGFzeUJlc3RpYXJ5U2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGYW50YXN5QmVzdGlhcnlTZXR0aW5nVGFiKGFwcCwgdGhpcykpO1xuXHRcdGFkZEljb24oXG5cdFx0XHRcImJlc3RpYXJ5LWdhbWUtc3lzdGVtXCIsXG5cdFx0XHRgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1jdXJyZW50Q29sb3Igdmlld0JveD1cIjAgMCA0NDggNTEyXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjIuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cIk0wIDk2QzAgNDMgNDMgMCA5NiAwSDM4NGgzMmMxNy43IDAgMzIgMTQuMyAzMiAzMlYzNTJjMCAxNy43LTE0LjMgMzItMzIgMzJ2NjRjMTcuNyAwIDMyIDE0LjMgMzIgMzJzLTE0LjMgMzItMzIgMzJIMzg0IDk2Yy01MyAwLTk2LTQzLTk2LTk2Vjk2ek02NCA0MTZjMCAxNy43IDE0LjMgMzIgMzIgMzJIMzUyVjM4NEg5NmMtMTcuNyAwLTMyIDE0LjMtMzIgMzJ6TTMyMCAxMTJjMC0zNS4zLTM1LjgtNjQtODAtNjRzLTgwIDI4LjctODAgNjRjMCAyMC45IDEyLjYgMzkuNSAzMiA1MS4yVjE3NmMwIDguOCA3LjIgMTYgMTYgMTZoNjRjOC44IDAgMTYtNy4yIDE2LTE2VjE2My4yYzE5LjQtMTEuNyAzMi0zMC4zIDMyLTUxLjJ6TTIwOCAxMjhjLTguOCAwLTE2LTcuMi0xNi0xNnM3LjItMTYgMTYtMTZzMTYgNy4yIDE2IDE2cy03LjIgMTYtMTYgMTZ6bTgwLTE2YzAgOC44LTcuMiAxNi0xNiAxNnMtMTYtNy4yLTE2LTE2czcuMi0xNiAxNi0xNnMxNiA3LjIgMTYgMTZ6TTEzNC4zIDIwOS4zYy04LjEtMy41LTE3LjUgLjMtMjEgOC40cy4zIDE3LjUgOC40IDIxTDE5OS40IDI3MmwtNzcuNyAzMy4zYy04LjEgMy41LTExLjkgMTIuOS04LjQgMjFzMTIuOSAxMS45IDIxIDguNEwyNDAgMjg5LjRsMTA1LjcgNDUuM2M4LjEgMy41IDE3LjUtLjMgMjEtOC40cy0uMy0xNy41LTguNC0yMUwyODAuNiAyNzJsNzcuNy0zMy4zYzguMS0zLjUgMTEuOS0xMi45IDguNC0yMXMtMTIuOS0xMS45LTIxLTguNEwyNDAgMjU0LjYgMTM0LjMgMjA5LjN6XCIvPjwvc3ZnPmBcblx0XHQpO1xuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuc3RhdHVzQmFyID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0XHR0aGlzLnN0YXR1c0Jhci5hZGRDbGFzcyhcImZhbnRhc3ktYmVzdGlhcnktc3RhdHVzLWJhclwiKTtcblx0XHRcdHRoaXMuYnVpbGRTdGF0dXNCYXIoKTtcblxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdFx0bmFtZTogXCJDaGFuZ2UgR2FtZSBTeXN0ZW1cIixcblx0XHRcdFx0aWQ6IFwiY2hhbmdlLWdhbWUtc3lzdGVtXCIsXG5cdFx0XHRcdGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZykgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnN5c3RlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGJ1aWxkU3RhdHVzQmFyKCkge1xuXHRcdHNldEljb24odGhpcy5zdGF0dXNCYXIuY3JlYXRlRGl2KCksIFwiYmVzdGlhcnktZ2FtZS1zeXN0ZW1cIik7XG5cdFx0dGhpcy5zdGF0dXNCYXJTeXN0ZW0gPSB0aGlzLnN0YXR1c0Jhci5jcmVhdGVEaXYoe1xuXHRcdFx0dGV4dDpcblx0XHRcdFx0dGhpcy5nZXRTeXN0ZW1CeUlkKHRoaXMuc2V0dGluZ3MuYWN0aXZlU3lzdGVtKT8ubmFtZSA/PyBcIk5vbmVcIixcblx0XHR9KTtcblx0XHR0aGlzLnN0YXR1c0Jhci5vbkNsaWNrRXZlbnQoKGV2dCkgPT4ge1xuXHRcdFx0Y29uc3QgbWVudSA9IHRoaXMuZ2V0U3RhdHVzQmFyTWVudSgpO1xuXHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGV2dCk7XG5cdFx0fSk7XG5cdH1cblx0Z2V0U3RhdHVzQmFyTWVudSgpIHtcblx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0aXRlbS5zZXRUaXRsZShcIk5vbmVcIik7XG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5hY3RpdmVTeXN0ZW0gPT0gXCJub25lXCIpIHtcblx0XHRcdFx0aXRlbS5zZXRDaGVja2VkKHRydWUpO1xuXHRcdFx0fVxuXHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0dGhpcy5zZXRBY3RpdmVTeXN0ZW0oXCJub25lXCIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0Zm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5zZXR0aW5ncy5zeXN0ZW1zKSB7XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbS5zZXRUaXRsZShzeXN0ZW0ubmFtZSk7XG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmFjdGl2ZVN5c3RlbSA9PSBzeXN0ZW0uaWQpIHtcblx0XHRcdFx0XHRpdGVtLnNldENoZWNrZWQodHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNldEFjdGl2ZVN5c3RlbShzeXN0ZW0uaWQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBtZW51O1xuXHR9XG5cdG9udW5sb2FkKCkge31cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIGEgc3lzdGVtIGlzIGluIHRoZSBsaXN0IGJ5IGlkLlxuXHQgKi9cblx0aGFzU3lzdGVtQnlJZChpZDogc3RyaW5nKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3Muc3lzdGVtcy5maW5kKChzeXMpID0+IHN5cy5pZCA9PSBpZCkgIT0gbnVsbDtcblx0fVxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIGEgc3lzdGVtIGlzIGluIHRoZSBsaXN0IGJ5IG5hbWUuXG5cdCAqL1xuXHRoYXNTeXN0ZW1CeU5hbWUobmFtZTogc3RyaW5nKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3Muc3lzdGVtcy5maW5kKChzeXMpID0+IHN5cy5uYW1lID09IG5hbWUpICE9IG51bGw7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgYSBnYW1lIHN5c3RlbSBmb3IgYSBnaXZlbiBpZCwgaWYgaXQgaXMgaW4gdGhlIGxpc3QuXG5cdCAqL1xuXHRnZXRTeXN0ZW1CeUlkKGlkOiBzdHJpbmcpIHtcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5zeXN0ZW1zLmZpbmQoKHN5cykgPT4gc3lzLmlkID09IGlkKTtcblx0fVxuXHQvKipcblx0ICogUmV0dXJucyBhIGdhbWUgc3lzdGVtIGZvciBhIGdpdmVuIG5hbWUsIGlmIGl0IGlzIGluIHRoZSBsaXN0LlxuXHQgKi9cblx0Z2V0U3lzdGVtQnlOYW1lKG5hbWU6IHN0cmluZykge1xuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzLnN5c3RlbXMuZmluZCgoc3lzKSA9PiBzeXMubmFtZSA9PSBuYW1lKTtcblx0fVxuXG5cdGFzeW5jIHNldEFjdGl2ZVN5c3RlbShpZDogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZXR0aW5ncy5hY3RpdmVTeXN0ZW0gPSBpZDtcblx0XHRjb25zdCBzeXN0ZW0gPSB0aGlzLmdldFN5c3RlbUJ5SWQoaWQpO1xuXHRcdHRoaXMuc3RhdHVzQmFyU3lzdGVtLnNldFRleHQoc3lzdGVtPy5uYW1lID8/IFwiTm9uZVwiKTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHtcblx0QXBwLFxuXHRCdXR0b25Db21wb25lbnQsXG5cdGRlYm91bmNlLFxuXHREcm9wZG93bkNvbXBvbmVudCxcblx0RXh0cmFCdXR0b25Db21wb25lbnQsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpblNldHRpbmdUYWIsXG5cdHByZXBhcmVTaW1wbGVTZWFyY2gsXG5cdHJlcXVlc3RVcmwsXG5cdFNldHRpbmcsXG5cdFRleHRDb21wb25lbnQsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IGNvcHkgZnJvbSBcImZhc3QtY29weVwiO1xuaW1wb3J0IHsgTW9uc3RlciB9IGZyb20gXCJzcmMvQHR5cGVzXCI7XG5pbXBvcnQge1xuXHREb3dubG9hZGFibGVTZXQsXG5cdERvd25sb2FkYWJsZVNldERlZmluaXRpb24sXG59IGZyb20gXCJzcmMvQHR5cGVzL2Rvd25sb2Fkc1wiO1xuaW1wb3J0IEltcG9ydGVyIGZyb20gXCJzcmMvaW1wb3J0ZXJzL2ltcG9ydGVyXCI7XG5cbmltcG9ydCB0eXBlIEZhbnRhc3lCZXN0aWFyeSBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7IG5hbm9pZCwgc3RyaW5naWZ5IH0gZnJvbSBcInNyYy91dGlsc1wiO1xuaW1wb3J0IHsgR2FtZVN5c3RlbSB9IGZyb20gXCJzcmMvQHR5cGVzL3N5c3RlbXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmFudGFzeUJlc3RpYXJ5U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRmaWx0ZXI6IFNldHRpbmc7XG5cdGltcG9ydGVyOiBJbXBvcnRlcjtcblx0cmVzdWx0czogTW9uc3RlcltdID0gW107XG5cdHN5c3RlbXNFbDogSFRNTERpdkVsZW1lbnQ7XG5cdGRvd25sb2FkRWw6IEhUTUxEaXZFbGVtZW50O1xuXHRpbXBvcnRzRWw6IEhUTUxEaXZFbGVtZW50O1xuXHRjcmVhdHVyZUVsOiBIVE1MRGl2RWxlbWVudDtcblx0aW50ZWdyYXRpb25FbDogSFRNTERpdkVsZW1lbnQ7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogRmFudGFzeUJlc3RpYXJ5KSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMuaW1wb3J0ZXIgPSBuZXcgSW1wb3J0ZXIodGhpcy5wbHVnaW4pO1xuXHR9XG5cblx0YXN5bmMgZGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0bGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cblx0XHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKFwiZmFudGFzeS1iZXN0aWFyeS1zZXR0aW5nc1wiKTtcblxuXHRcdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiRmFudGFzeSBCZXN0aWFyeSBTZXR0aW5nc1wiIH0pO1xuXHRcdFx0dGhpcy5pbnRlZ3JhdGlvbkVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0XHR0aGlzLnN5c3RlbXNFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdFx0dGhpcy5kb3dubG9hZEVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0XHR0aGlzLmltcG9ydHNFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdFx0dGhpcy5jcmVhdHVyZUVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cblx0XHRcdGlmIChcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwib2JzaWRpYW4tNWUtc3RhdGJsb2Nrc1wiKSAmJlxuXHRcdFx0XHQhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW50ZWdyYXRlZFN0YXRibG9ja3Ncblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLmdlbmVyYXRlSW50ZWdyYXRpb24oKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5nZW5lcmF0ZVN5c3RlbXMoKTtcblx0XHRcdHRoaXMuZ2VuZXJhdGVJbXBvcnRzKCk7XG5cdFx0XHR0aGlzLmdlbmVyYXRlRG93bmxvYWRzKCk7XG5cdFx0XHR0aGlzLmdlbmVyYXRlQ3JlYXR1cmVzKCk7XG5cblx0XHRcdGNvbnN0IGRpdiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdihcImNvZmZlZVwiKTtcblx0XHRcdGRpdi5jcmVhdGVFbChcImFcIiwge1xuXHRcdFx0XHRocmVmOiBcImh0dHBzOi8vd3d3LmJ1eW1lYWNvZmZlZS5jb20vdmFsZW50aW5lMTk1XCIsXG5cdFx0XHR9KS5jcmVhdGVFbChcImltZ1wiLCB7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRzcmM6IFwiaHR0cHM6Ly9pbWcuYnV5bWVhY29mZmVlLmNvbS9idXR0b24tYXBpLz90ZXh0PUJ1eSBtZSBhIGNvZmZlZSZlbW9qaT1cdTI2MTUmc2x1Zz12YWxlbnRpbmUxOTUmYnV0dG9uX2NvbG91cj1lM2U3ZWYmZm9udF9jb2xvdXI9MjYyNjI2JmZvbnRfZmFtaWx5PUludGVyJm91dGxpbmVfY29sb3VyPTI2MjYyNiZjb2ZmZWVfY29sb3VyPWZmMDAwMFwiLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlKTtcblx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdFwiVGhlcmUgd2FzIGFuIGVycm9yIGRpc3BsYXlpbmcgdGhlIHNldHRpbmdzIHRhYiBmb3IgRmFudGFzeSBCZXN0aWFyeS5cIlxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblx0Z2VuZXJhdGVJbnRlZ3JhdGlvbigpIHtcblx0XHR0aGlzLmludGVncmF0aW9uRWwuZW1wdHkoKTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLmludGVncmF0aW9uRWwpXG5cdFx0XHQuc2V0SGVhZGluZygpXG5cdFx0XHQuc2V0TmFtZShcIkltcG9ydCBDcmVhdHVyZXMgZnJvbSBUVFJQRyBTdGF0YmxvY2tzXCIpO1xuXHRcdGNvbnN0IGludGVncmF0aW9uQ29udGFpbmVyID0gdGhpcy5pbnRlZ3JhdGlvbkVsLmNyZWF0ZURpdihcblx0XHRcdFwiYmVzdGlhcnktYWRkaXRpb25hbC1jb250YWluZXJcIlxuXHRcdCk7XG5cblx0XHRpbnRlZ3JhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoKS5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJJdCBsb29rcyBsaWtlIHlvdSB3ZXJlIHVzaW5nIFRUUlBHIFN0YXRibG9ja3MgdG8gbWFuYWdlIHlvdXIgYmVzdGlhcnkuIFdvdWxkIHlvdSBsaWtlIHRvIGltcG9ydCB0aGVzZSBjcmVhdHVyZXM/XCIsXG5cdFx0fSk7XG5cdFx0aW50ZWdyYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCkuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdHRleHQ6IFwiVGhpcyB3aWxsIHJlbW92ZSB0aGUgY3JlYXR1cmVzIGZyb20gVFRSUEcgU3RhdGJsb2NrcywgYnV0IGFzIGxvbmcgYXMgeW91IGhhdmUgdXBkYXRlZCB0aGF0IHBsdWdpbiwgaXQgd2lsbCBwdWxsIGNyZWF0dXJlcyBmcm9tIGhlcmUuXCIsXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGludGVncmF0aW9uQ29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoXCJJbXBvcnRcIilcblx0XHRcdC5hZGRCdXR0b24oKGIpID0+XG5cdFx0XHRcdGIuc2V0QnV0dG9uVGV4dChcIkltcG9ydFwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5nLmNsZWFyKCk7XG5cdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0LnNldE5hbWUoXCJJbXBvcnRpbmcuLi5cIilcblx0XHRcdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYikgPT5cblx0XHRcdFx0XHRcdFx0YlxuXHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxuXHRcdFx0XHRcdFx0XHRcdC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXG5cdFx0XHRcdFx0XHRcdFx0XHRcImJlc3RpYXJ5LWRvd25sb2FkaW5nXCJcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Y29uc3QgY3JlYXR1cmVzID0gW1xuXHRcdFx0XHRcdFx0Li4uYXBwLnBsdWdpbnNcblx0XHRcdFx0XHRcdFx0LmdldFBsdWdpbihcIm9ic2lkaWFuLTVlLXN0YXRibG9ja3NcIilcblx0XHRcdFx0XHRcdFx0LmRhdGEudmFsdWVzKCksXG5cdFx0XHRcdFx0XS5tYXAoKHYpID0+IGNvcHkodikpO1xuXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JlYXR1cmVzLnB1c2goLi4uY3JlYXR1cmVzKTtcblxuXHRcdFx0XHRcdHNldHRpbmcuY2xlYXIoKTtcblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZShcIkltcG9ydGVkXCIpXG5cdFx0XHRcdFx0XHQuc2V0RGVzYyhgJHtjcmVhdHVyZXMubGVuZ3RofSBjcmVhdHVyZXMgaW1wb3J0ZWRgKVxuXHRcdFx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChiKSA9PiBiLnNldEljb24oXCJjaGVja1wiKSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW50ZWdyYXRlZFN0YXRibG9ja3MgPSB0cnVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVDcmVhdHVyZXMoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYikgPT5cblx0XHRcdFx0YlxuXHRcdFx0XHRcdC5zZXRJY29uKFwiY3Jvc3NcIilcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIk5vXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0c2V0dGluZy5jbGVhcigpO1xuXHRcdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0XHQuc2V0TmFtZShcIkFyZSB5b3Ugc3VyZT9cIilcblx0XHRcdFx0XHRcdFx0LnNldERlc2MoXCJJIHdpbGwgbm90IGFzayBhZ2Fpbi5cIilcblx0XHRcdFx0XHRcdFx0LmFkZEJ1dHRvbigoYikgPT4gYi5zZXRCdXR0b25UZXh0KFwiWWVzLCBJJ20gc3VyZVwiKSlcblx0XHRcdFx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChiKSA9PlxuXHRcdFx0XHRcdFx0XHRcdGJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwiY3Jvc3NcIilcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiQ2FuY2VsXCIpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLmdlbmVyYXRlSW50ZWdyYXRpb24oKSlcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxuXHRnZW5lcmF0ZVN5c3RlbXMoKSB7XG5cdFx0dGhpcy5zeXN0ZW1zRWwuZW1wdHkoKTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLnN5c3RlbXNFbCkuc2V0SGVhZGluZygpLnNldE5hbWUoXCJNYW5hZ2UgR2FtZSBTeXN0ZW1zXCIpO1xuXHRcdGNvbnN0IHN5c3RlbXNDb250YWluZXIgPSB0aGlzLnN5c3RlbXNFbC5jcmVhdGVEaXYoXG5cdFx0XHRcImJlc3RpYXJ5LWFkZGl0aW9uYWwtY29udGFpbmVyXCJcblx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoc3lzdGVtc0NvbnRhaW5lcikuc2V0RGVzYyhcblx0XHRcdFwiR2FtZSBzeXN0ZW1zIGFsbG93IHlvdSB0byBzd2l0Y2ggYmV0d2VlbiBkaWZmZXJlbnQgZ3JvdXBzIG9mIGNyZWF0dXJlcyBhcyB5b3UncmUgcGxheWluZyBkaWZmZXJlbnQgZ2FtZXMgLSBpZiB5b3UncmUgcnVubmluZyBhIERuRCA1ZSBnYW1lIGFuZCBhIFBGMiBnYW1lIHNpbXVsdGFuZW91c2x5LCB5b3Ugd29uJ3QgbmVlZCB0byBoYXZlIGJvdGggc2V0cyBvZiBjcmVhdHVyZXMgYXZhaWxhYmxlIGF0IGFsbCB0aW1lcy5cIlxuXHRcdCk7XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtcy5sZW5ndGgpIHtcblx0XHRcdG5ldyBTZXR0aW5nKHN5c3RlbXNDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiQ3VycmVudCBBY3RpdmUgU3lzdGVtXCIpXG5cdFx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcdFwiQ2hvb3NlIHRoZSBhY3RpdmUgc3lzdGVtIGhlcmUsIHdoaWNoIHdpbGwgZmlsdGVyIG1vbnN0ZXJzIGFjY29yZGluZ2x5LiBDaG9vc2luZyAnTm9uZScgZW5hYmxlcyBhbGwgY3JlYXR1cmVzLlwiXG5cdFx0XHRcdClcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkKSA9PiB7XG5cdFx0XHRcdFx0ZC5hZGRPcHRpb24oXCJub25lXCIsIFwiTm9uZVwiKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHN5c3RlbSBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1zKSB7XG5cdFx0XHRcdFx0XHRkLmFkZE9wdGlvbihzeXN0ZW0uaWQsIHN5c3RlbS5uYW1lKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3RpdmVTeXN0ZW0pO1xuXHRcdFx0XHRcdGQub25DaGFuZ2UoYXN5bmMgKHYpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldEFjdGl2ZVN5c3RlbSh2KTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHRsZXQgdGVtcFN5czogc3RyaW5nIHwgbnVsbDtcblx0XHRsZXQgdGV4dFN5czogVGV4dENvbXBvbmVudCB8IG51bGw7XG5cdFx0bGV0IGJ1dFN5czogQnV0dG9uQ29tcG9uZW50IHwgbnVsbDtcblx0XHRuZXcgU2V0dGluZyhzeXN0ZW1zQ29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoXCJBZGQgU3lzdGVtXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkFkZCBhIG5ldyBnYW1lIHN5c3RlbS5cIilcblx0XHRcdC5hZGRUZXh0KCh0KSA9PiB7XG5cdFx0XHRcdHRleHRTeXMgPSB0O1xuXHRcdFx0XHR0Lm9uQ2hhbmdlKCh2KSA9PiB7XG5cdFx0XHRcdFx0dGVtcFN5cyA9IHY7XG5cdFx0XHRcdFx0aWYgKCFidXRTeXMpIHJldHVybjtcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHR0ZW1wU3lzLmxlbmd0aCAmJlxuXHRcdFx0XHRcdFx0IXRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbXMuZmluZChcblx0XHRcdFx0XHRcdFx0KHMpID0+IHMubmFtZSA9PSB0ZW1wU3lzXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRidXRTeXMuc2V0RGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRidXRTeXMuc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQuYWRkQnV0dG9uKChiKSA9PiB7XG5cdFx0XHRcdGJ1dFN5cyA9IGI7XG5cdFx0XHRcdGIuc2V0SWNvbihcInBsdXNcIikub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRlbXBTeXM/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtcy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0bmFtZTogdGVtcFN5cyxcblx0XHRcdFx0XHRcdFx0aWQ6IG5hbm9pZCgpLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVTeXN0ZW1zKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoc3lzdGVtc0NvbnRhaW5lcikuc2V0TmFtZShcIk1hbmFnZSBTeXN0ZW1zXCIpO1xuXHRcdGNvbnN0IGFkZGl0aW9uYWwgPSBzeXN0ZW1zQ29udGFpbmVyLmNyZWF0ZURpdihcImFkZGl0aW9uYWxcIik7XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBzeXN0ZW1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtcztcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3lzdGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBzeXN0ZW0gPSBzeXN0ZW1zW2ldO1xuXHRcdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoYWRkaXRpb25hbClcblx0XHRcdFx0XHQuc2V0TmFtZShzeXN0ZW0ubmFtZSlcblx0XHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+XG5cdFx0XHRcdFx0XHRiLnNldEljb24oXCJwZW5jaWxcIikub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmcuY29udHJvbEVsLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHRcdGxldCB0ZW1wU3lzOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdGxldCBidXRTeXM6IEV4dHJhQnV0dG9uQ29tcG9uZW50O1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdFx0LmFkZFRleHQoKHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHQuc2V0VmFsdWUoc3lzdGVtLm5hbWUpLm9uQ2hhbmdlKCh2KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlbXBTeXMgPSB2O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWJ1dFN5cykgcmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGVtcFN5cy5sZW5ndGggJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQodGVtcFN5cyA9PSBzeXN0ZW0ubmFtZSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0IXRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbXMuZmluZChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KHMpID0+IHMubmFtZSA9PSB0ZW1wU3lzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRidXRTeXMuc2V0RGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1dFN5cy5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dFN5cyA9IGI7XG5cdFx0XHRcdFx0XHRcdFx0XHRiLnNldEljb24oXCJjaGVja1wiKS5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3lzdGVtLm5hbWUgPSB0ZW1wU3lzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlU3lzdGVtcygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGIuc2V0SWNvbihcImNyb3NzXCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlU3lzdGVtcygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+XG5cdFx0XHRcdFx0XHRiLnNldEljb24oXCJjcm9zc1wiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtcy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3RpdmVTeXN0ZW0gPT0gc3lzdGVtLmlkXG5cdFx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZVN5c3RlbSA9IFwibm9uZVwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlU3lzdGVtcygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGRpdGlvbmFsXG5cdFx0XHRcdC5jcmVhdGVTcGFuKHsgdGV4dDogXCJDcmVhdGUgYSBzeXN0ZW0gdG8gc2VlIGl0IGhlcmUuXCIgfSlcblx0XHRcdFx0LmFkZENsYXNzZXMoW1wiY3JlYXRlLW5ld1wiLCBcInNldHRpbmctaXRlbVwiXSk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGNvbnN1bWVJbXBvcnQoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgc291cmNlOiBzdHJpbmcpIHtcblx0XHRjb25zdCB7IGZpbGVzIH0gPSBlbGVtZW50O1xuXHRcdGlmICghZmlsZXM/Lmxlbmd0aCkgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBtb25zdGVycyA9IGF3YWl0IHRoaXMuaW1wb3J0ZXIuaW1wb3J0KGZpbGVzLCBzb3VyY2UpO1xuXHRcdFx0aWYgKG1vbnN0ZXJzICYmIG1vbnN0ZXJzLmxlbmd0aCkge1xuXHRcdFx0XHQvKiBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlTW9uc3RlcnMobW9uc3RlcnMpOyAqL1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0fSBjYXRjaCAoZSkge31cblx0fVxuXHRhc3luYyBnZW5lcmF0ZURvd25sb2FkcygpIHtcblx0XHR0aGlzLmRvd25sb2FkRWwuZW1wdHkoKTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLmRvd25sb2FkRWwpXG5cdFx0XHQuc2V0SGVhZGluZygpXG5cdFx0XHQuc2V0TmFtZShcIkRvd25sb2FkIENyZWF0dXJlIFNldHNcIik7XG5cdFx0Y29uc3QgZG93bmxvYWRDb250YWluZXIgPSB0aGlzLmRvd25sb2FkRWwuY3JlYXRlRGl2KFxuXHRcdFx0XCJiZXN0aWFyeS1hZGRpdGlvbmFsLWNvbnRhaW5lclwiXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGRvd25sb2FkQ29udGFpbmVyKS5zZXREZXNjKFxuXHRcdFx0XCJTb21lIGJhc2ljIGNyZWF0dXJlIHNldHMsIHN1Y2ggYXMgdGhlIDVlIFNSRCwgYXJlIHN0b3JlZCBvbmxpbmUgYW5kIGRvd25sb2FkYWJsZSBoZXJlLlwiXG5cdFx0KTtcblxuXHRcdGNvbnN0IHNldHM6IERvd25sb2FkYWJsZVNldERlZmluaXRpb25bXSA9IGF3YWl0IHJlcXVlc3RVcmwoXG5cdFx0XHRcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS92YWxlbnRpbmUxOTUvZmFudGFzeS1iZXN0aWFyeS9tYXN0ZXIvc2V0cy9zZXRzLmpzb25cIlxuXHRcdCkuanNvbjtcblxuXHRcdGNvbnN0IGFkZCA9IG5ldyBTZXR0aW5nKGRvd25sb2FkQ29udGFpbmVyKS5zZXROYW1lKFwiQXZhaWxhYmxlIFNldHNcIik7XG5cblx0XHRsZXQgYWRkaXRpb25hbDogSFRNTERpdkVsZW1lbnQ7XG5cdFx0bGV0IGF0TGVhc3RPbmUgPSBmYWxzZTtcblx0XHRjb25zdCBuZWVkOiBEb3dubG9hZGFibGVTZXREZWZpbml0aW9uW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IHNldCBvZiBzZXRzKSB7XG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmRvd25sb2FkZWQuaW5jbHVkZXMoc2V0LmlkKSkge1xuXHRcdFx0XHRuZWVkLnB1c2goc2V0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghYXRMZWFzdE9uZSkge1xuXHRcdFx0XHRcdGF0TGVhc3RPbmUgPSB0cnVlO1xuXHRcdFx0XHRcdG5ldyBTZXR0aW5nKGRvd25sb2FkQ29udGFpbmVyKS5zZXROYW1lKFwiRG93bmxvYWRlZCBTZXRzXCIpO1xuXHRcdFx0XHRcdGFkZGl0aW9uYWwgPSBkb3dubG9hZENvbnRhaW5lci5jcmVhdGVEaXYoXCJhZGRpdGlvbmFsXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5ldyBTZXR0aW5nKGFkZGl0aW9uYWwhKS5zZXROYW1lKHNldC5uYW1lKS5hZGRFeHRyYUJ1dHRvbigoYikgPT5cblx0XHRcdFx0XHRiLnNldEljb24oXCJjcm9zc1wiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNyZWF0dXJlcyA9XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNyZWF0dXJlcy5maWx0ZXIoKGMpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjLnNldHM/Lmxlbmd0aCA9PSAxICYmIGMuc2V0cz8uaW5jbHVkZXMoc2V0LmlkKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb3dubG9hZGVkID1cblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZG93bmxvYWRlZC5maWx0ZXIoXG5cdFx0XHRcdFx0XHRcdFx0KGQpID0+IGQgIT0gc2V0LmlkXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVDcmVhdHVyZXMoKTtcblx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVEb3dubG9hZHMoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAobmVlZC5sZW5ndGgpIHtcblx0XHRcdGxldCBjaG9zZW46IHN0cmluZztcblx0XHRcdGFkZC5hZGREcm9wZG93bigoZCkgPT4ge1xuXHRcdFx0XHRkLm9uQ2hhbmdlKCh2KSA9PiB7XG5cdFx0XHRcdFx0Y2hvc2VuID0gdjtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2V0IG9mIG5lZWQpIHtcblx0XHRcdFx0XHRpZiAoIWNob3NlbikgY2hvc2VuID0gc2V0LmlkO1xuXHRcdFx0XHRcdGQuYWRkT3B0aW9uKHNldC5pZCwgc2V0Lm5hbWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+XG5cdFx0XHRcdFx0YlxuXHRcdFx0XHRcdFx0LnNldEljb24oXCJkb3dubG9hZFwiKVxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJEb3dubG9hZCBTZXRcIilcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKCFjaG9zZW4pIHJldHVybjtcblx0XHRcdFx0XHRcdFx0Yi5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxuXHRcdFx0XHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiZG93bmxvYWRpbmdcIilcblx0XHRcdFx0XHRcdFx0XHQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJiZXN0aWFyeS1kb3dubG9hZGluZ1wiXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBkb3dubG9hZGVkOiBEb3dubG9hZGFibGVTZXQgPVxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgcmVxdWVzdFVybChcblx0XHRcdFx0XHRcdFx0XHRcdFx0YGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS92YWxlbnRpbmUxOTUvZmFudGFzeS1iZXN0aWFyeS9tYXN0ZXIvc2V0cy8ke2Nob3Nlbn0uanNvbmBcblx0XHRcdFx0XHRcdFx0XHRcdCkuanNvbjtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChkb3dubG9hZGVkLnN5c3RlbSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGNvbmZsaWN0ID0gdGhpcy5wbHVnaW4uaGFzU3lzdGVtQnlOYW1lKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkb3dubG9hZGVkLm5hbWVcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWNvbmZsaWN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbXMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG5hbm9pZCgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGRvd25sb2FkZWQubmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCFjb25mbGljdCB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoYXdhaXQgc2hvdWxkQWRkKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmdldFN5c3RlbUJ5TmFtZShcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRvd25sb2FkZWQubmFtZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCkhXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCkpXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmcgPVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmdldFN5c3RlbUJ5TmFtZShcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRvd25sb2FkZWQubmFtZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCkhO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRvd25sb2FkZWQuY3JlYXR1cmVzID1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkb3dubG9hZGVkLmNyZWF0dXJlcy5tYXAoKGMpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGMuc3lzdGVtcyA9IFtleGlzdGluZy5pZF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRvd25sb2FkZWQucHVzaChcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hvc2VuXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JlYXR1cmVzLnB1c2goXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC4uLmRvd25sb2FkZWQuY3JlYXR1cmVzXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlU3lzdGVtcygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVDcmVhdHVyZXMoKTtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNldCA9IHNldHMuZmluZCgocykgPT4gcy5pZCA9PSBjaG9zZW4pO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdFx0XHRcdFx0XHRcIlRoZXJlIHdhcyBhbiBpc3N1ZSBkb3dubG9hZGluZyBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldD8ubmFtZSA/PyBcInRoZSBjcmVhdHVyZSBzZXRcIiArIFwiLlwiXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGUpO1xuXHRcdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVEb3dubG9hZHMoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KVxuXHRcdFx0XHQuc2V0RGVzYyhcIkRvd25sb2FkIGFkZGl0aW9uYWwgc2V0cyBoZXJlIVwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWRkLnNldERlc2MoXG5cdFx0XHRcdFwiTm8gYWRkaXRpb25hbCBzZXRzIGF2YWlsYWJsZSBmb3IgZG93bmxvYWQgYXQgdGhpcyB0aW1lLlwiXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRhZGQuYWRkRXh0cmFCdXR0b24oKGIpID0+XG5cdFx0XHRiXG5cdFx0XHRcdC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIkNoZWNrIGZvciBOZXcgU2V0c1wiKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLmdlbmVyYXRlRG93bmxvYWRzKCkpXG5cdFx0KTtcblx0fVxuXHRnZW5lcmF0ZUltcG9ydHMoKSB7XG5cdFx0dGhpcy5pbXBvcnRzRWwuZW1wdHkoKTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLmltcG9ydHNFbClcblx0XHRcdC5zZXRIZWFkaW5nKClcblx0XHRcdC5zZXROYW1lKFwiSW1wb3J0IEhvbWVicmV3IENyZWF0dXJlc1wiKTtcblx0XHRjb25zdCBpbXBvcnRTZXR0aW5nc0NvbnRhaW5lciA9IHRoaXMuaW1wb3J0c0VsLmNyZWF0ZURpdihcblx0XHRcdFwiYmVzdGlhcnktYWRkaXRpb25hbC1jb250YWluZXJcIlxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhpbXBvcnRTZXR0aW5nc0NvbnRhaW5lcikuc2V0RGVzYyhcblx0XHRcdFwiSW1wb3J0IGNyZWF0dXJlcyBmcm9tIGNyZWF0dXJlIGZpbGVzLiBNb25zdGVycyBhcmUgc3RvcmVkIGJ5IG5hbWUsIHNvIG9ubHkgdGhlIGxhc3QgY3JlYXR1cmUgYnkgdGhhdCBuYW1lIHdpbGwgYmUgc2F2ZWQuIFRoaXMgaXMgZGVzdHJ1Y3RpdmUgLSBhbnkgc2F2ZWQgY3JlYXR1cmUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cIlxuXHRcdCk7XG5cblx0XHRjb25zdCBpbXBvcnRBZGRpdGlvbmFsID1cblx0XHRcdGltcG9ydFNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdihcImFkZGl0aW9uYWxcIik7XG5cdFx0Y29uc3QgaW1wb3J0QXBwRmlsZSA9IG5ldyBTZXR0aW5nKGltcG9ydEFkZGl0aW9uYWwpXG5cdFx0XHQuc2V0TmFtZShcIkltcG9ydCBEbkRBcHBGaWxlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIk9ubHkgaW1wb3J0IGNvbnRlbnQgdGhhdCB5b3Ugb3duLlwiKTtcblx0XHRjb25zdCBpbnB1dEFwcEZpbGUgPSBjcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHRcdG5hbWU6IFwiZG5kYXBwZmlsZVwiLFxuXHRcdFx0XHRhY2NlcHQ6IFwiLnhtbFwiLFxuXHRcdFx0XHRtdWx0aXBsZTogdHJ1ZSxcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRpbnB1dEFwcEZpbGUub25jaGFuZ2UgPSBhc3luYyAoKSA9PlxuXHRcdFx0dGhpcy5jb25zdW1lSW1wb3J0KGlucHV0QXBwRmlsZSwgXCJhcHBmaWxlXCIpO1xuXG5cdFx0aW1wb3J0QXBwRmlsZS5hZGRCdXR0b24oKGIpID0+IHtcblx0XHRcdGIuc2V0QnV0dG9uVGV4dChcIkNob29zZSBGaWxlKHMpXCIpLnNldFRvb2x0aXAoXG5cdFx0XHRcdFwiSW1wb3J0IERuREFwcEZpbGUgRGF0YVwiXG5cdFx0XHQpO1xuXHRcdFx0Yi5idXR0b25FbC5hZGRDbGFzcyhcImJlc3RpYXJ5LWZpbGUtdXBsb2FkXCIpO1xuXHRcdFx0Yi5idXR0b25FbC5hcHBlbmRDaGlsZChpbnB1dEFwcEZpbGUpO1xuXHRcdFx0Yi5vbkNsaWNrKCgpID0+IGlucHV0QXBwRmlsZS5jbGljaygpKTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGltcG9ydEltcHJvdmVkSW5pdGlhdGl2ZSA9IG5ldyBTZXR0aW5nKGltcG9ydEFkZGl0aW9uYWwpXG5cdFx0XHQuc2V0TmFtZShcIkltcG9ydCBJbXByb3ZlZCBJbml0aWF0aXZlIERhdGFcIilcblx0XHRcdC5zZXREZXNjKFwiT25seSBpbXBvcnQgY29udGVudCB0aGF0IHlvdSBvd24uXCIpO1xuXHRcdGNvbnN0IGlucHV0SW1wcm92ZWRJbml0aWF0aXZlID0gY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdFx0XHRuYW1lOiBcImltcHJvdmVkaW5pdGlhdGl2ZVwiLFxuXHRcdFx0XHRhY2NlcHQ6IFwiLmpzb25cIixcblx0XHRcdFx0bXVsdGlwbGU6IHRydWUsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0aW5wdXRJbXByb3ZlZEluaXRpYXRpdmUub25jaGFuZ2UgPSBhc3luYyAoKSA9PlxuXHRcdFx0dGhpcy5jb25zdW1lSW1wb3J0KGlucHV0SW1wcm92ZWRJbml0aWF0aXZlLCBcImltcHJvdmVkXCIpO1xuXG5cdFx0aW1wb3J0SW1wcm92ZWRJbml0aWF0aXZlLmFkZEJ1dHRvbigoYikgPT4ge1xuXHRcdFx0Yi5zZXRCdXR0b25UZXh0KFwiQ2hvb3NlIEZpbGUocylcIikuc2V0VG9vbHRpcChcblx0XHRcdFx0XCJJbXBvcnQgSW1wcm92ZWQgSW5pdGlhdGl2ZSBEYXRhXCJcblx0XHRcdCk7XG5cdFx0XHRiLmJ1dHRvbkVsLmFkZENsYXNzKFwiYmVzdGlhcnktZmlsZS11cGxvYWRcIik7XG5cdFx0XHRiLmJ1dHRvbkVsLmFwcGVuZENoaWxkKGlucHV0SW1wcm92ZWRJbml0aWF0aXZlKTtcblx0XHRcdGIub25DbGljaygoKSA9PiBpbnB1dEltcHJvdmVkSW5pdGlhdGl2ZS5jbGljaygpKTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGltcG9ydENyaXR0ZXJEQiA9IG5ldyBTZXR0aW5nKGltcG9ydEFkZGl0aW9uYWwpXG5cdFx0XHQuc2V0TmFtZShcIkltcG9ydCBDcml0dGVyREIgRGF0YVwiKVxuXHRcdFx0LnNldERlc2MoXCJPbmx5IGltcG9ydCBjb250ZW50IHRoYXQgeW91IG93bi5cIik7XG5cdFx0Y29uc3QgaW5wdXRDcml0dGVyREIgPSBjcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHRcdG5hbWU6IFwiY3JpdHRlcmRiXCIsXG5cdFx0XHRcdGFjY2VwdDogXCIuanNvblwiLFxuXHRcdFx0XHRtdWx0aXBsZTogdHJ1ZSxcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRpbnB1dENyaXR0ZXJEQi5vbmNoYW5nZSA9IGFzeW5jICgpID0+XG5cdFx0XHR0aGlzLmNvbnN1bWVJbXBvcnQoaW5wdXRDcml0dGVyREIsIFwiY3JpdHRlclwiKTtcblxuXHRcdGltcG9ydENyaXR0ZXJEQi5hZGRCdXR0b24oKGIpID0+IHtcblx0XHRcdGIuc2V0QnV0dG9uVGV4dChcIkNob29zZSBGaWxlKHMpXCIpLnNldFRvb2x0aXAoXG5cdFx0XHRcdFwiSW1wb3J0IENyaXR0ZXJEQiBEYXRhXCJcblx0XHRcdCk7XG5cdFx0XHRiLmJ1dHRvbkVsLmFkZENsYXNzKFwiYmVzdGlhcnktZmlsZS11cGxvYWRcIik7XG5cdFx0XHRiLmJ1dHRvbkVsLmFwcGVuZENoaWxkKGlucHV0Q3JpdHRlckRCKTtcblx0XHRcdGIub25DbGljaygoKSA9PiBpbnB1dENyaXR0ZXJEQi5jbGljaygpKTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGltcG9ydDVlVG9vbHMgPSBuZXcgU2V0dGluZyhpbXBvcnRBZGRpdGlvbmFsKVxuXHRcdFx0LnNldE5hbWUoXCJJbXBvcnQgNWUudG9vbHMgRGF0YVwiKVxuXHRcdFx0LnNldERlc2MoXCJPbmx5IGltcG9ydCBjb250ZW50IHRoYXQgeW91IG93bi5cIik7XG5cdFx0Y29uc3QgaW5wdXQ1ZVRvb2xzID0gY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdFx0XHRuYW1lOiBcImZpdmV0b29sc1wiLFxuXHRcdFx0XHRhY2NlcHQ6IFwiLmpzb25cIixcblx0XHRcdFx0bXVsdGlwbGU6IHRydWUsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0aW5wdXQ1ZVRvb2xzLm9uY2hhbmdlID0gYXN5bmMgKCkgPT5cblx0XHRcdHRoaXMuY29uc3VtZUltcG9ydChpbnB1dDVlVG9vbHMsIFwiNWVcIik7XG5cblx0XHRpbXBvcnQ1ZVRvb2xzLmFkZEJ1dHRvbigoYikgPT4ge1xuXHRcdFx0Yi5zZXRCdXR0b25UZXh0KFwiQ2hvb3NlIEZpbGUocylcIikuc2V0VG9vbHRpcChcblx0XHRcdFx0XCJJbXBvcnQgNWUudG9vbHMgRGF0YVwiXG5cdFx0XHQpO1xuXHRcdFx0Yi5idXR0b25FbC5hZGRDbGFzcyhcImJlc3RpYXJ5LWZpbGUtdXBsb2FkXCIpO1xuXHRcdFx0Yi5idXR0b25FbC5hcHBlbmRDaGlsZChpbnB1dDVlVG9vbHMpO1xuXHRcdFx0Yi5vbkNsaWNrKCgpID0+IGlucHV0NWVUb29scy5jbGljaygpKTtcblx0XHR9KTtcblx0XHRjb25zdCBpbXBvcnRUZXRyYSA9IG5ldyBTZXR0aW5nKGltcG9ydEFkZGl0aW9uYWwpXG5cdFx0XHQuc2V0TmFtZShcIkltcG9ydCBUZXRyYUN1YmUgRGF0YVwiKVxuXHRcdFx0LnNldERlc2MoXCJPbmx5IGltcG9ydCBjb250ZW50IHRoYXQgeW91IG93bi5cIik7XG5cdFx0Y29uc3QgaW5wdXRUZXRyYSA9IGNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0bmFtZTogXCJ0ZXRyYVwiLFxuXHRcdFx0XHRhY2NlcHQ6IFwiLmpzb24sIC5tb25zdGVyXCIsXG5cdFx0XHRcdG11bHRpcGxlOiB0cnVlLFxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHRpbnB1dFRldHJhLm9uY2hhbmdlID0gYXN5bmMgKCkgPT5cblx0XHRcdHRoaXMuY29uc3VtZUltcG9ydChpbnB1dFRldHJhLCBcInRldHJhXCIpO1xuXG5cdFx0aW1wb3J0VGV0cmEuYWRkQnV0dG9uKChiKSA9PiB7XG5cdFx0XHRiLnNldEJ1dHRvblRleHQoXCJDaG9vc2UgRmlsZShzKVwiKS5zZXRUb29sdGlwKFxuXHRcdFx0XHRcIkltcG9ydCBUZXRyYUN1YmUgRGF0YVwiXG5cdFx0XHQpO1xuXHRcdFx0Yi5idXR0b25FbC5hZGRDbGFzcyhcImJlc3RpYXJ5LWZpbGUtdXBsb2FkXCIpO1xuXHRcdFx0Yi5idXR0b25FbC5hcHBlbmRDaGlsZChpbnB1dFRldHJhKTtcblx0XHRcdGIub25DbGljaygoKSA9PiBpbnB1dFRldHJhLmNsaWNrKCkpO1xuXHRcdH0pO1xuXHR9XG5cdGdlbmVyYXRlQ3JlYXR1cmVzKCkge1xuXHRcdHRoaXMuY3JlYXR1cmVFbC5lbXB0eSgpO1xuXHRcdG5ldyBTZXR0aW5nKHRoaXMuY3JlYXR1cmVFbCkuc2V0SGVhZGluZygpLnNldE5hbWUoXCJIb21lYnJldyBDcmVhdHVyZXNcIik7XG5cdFx0Y29uc3QgYWRkaXRpb25hbENvbnRhaW5lciA9IHRoaXMuY3JlYXR1cmVFbC5jcmVhdGVEaXYoXG5cdFx0XHRcImJlc3RpYXJ5LWFkZGl0aW9uYWwtY29udGFpbmVyIGJlc3RpYXJ5LW1vbnN0ZXJzXCJcblx0XHQpO1xuXHRcdG5ldyBTZXR0aW5nKGFkZGl0aW9uYWxDb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZShcIkFkZCBDcmVhdHVyZVwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYikgPT4ge1xuXHRcdFx0XHRiLnNldEljb24oXCJwbHVzLXdpdGgtY2lyY2xlXCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdC8qIGNvbnN0IG1vZGFsID0gbmV3IEVkaXRNb25zdGVyTW9kYWwodGhpcy5wbHVnaW4pO1xuXHRcdFx0XHRcdG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlQ3JlYXR1cmVzKGNvbnRhaW5lckVsKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdG1vZGFsLm9wZW4oKTsgKi9cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnN0IGFuY2VzdG9yID0gdGhpcy5jb250YWluZXJFbC5jbG9zZXN0KFxuXHRcdFx0XCIuZmFudGFzeS1iZXN0aWFyeS1zZXR0aW5nc1wiXG5cdFx0KSE7XG5cdFx0Y29uc3QgeyBiYWNrZ3JvdW5kQ29sb3IsIHBhZGRpbmdUb3AgfSA9IGdldENvbXB1dGVkU3R5bGUoYW5jZXN0b3IpO1xuXG5cdFx0Y29uc3QgZmlsdGVycyA9IGFkZGl0aW9uYWxDb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJiZXN0aWFyeS1tb25zdGVyLWZpbHRlclwiLFxuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHRzdHlsZTogYC0tYmVzdGlhcnktZmlsdGVyLW9mZnNldDogJHtwYWRkaW5nVG9wfTsgLS1iZXN0aWFyeS1maWx0ZXItYmc6ICR7YmFja2dyb3VuZENvbG9yfWAsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHRoaXMuZmlsdGVyID0gbmV3IFNldHRpbmcoZmlsdGVycylcblx0XHRcdC5zZXRDbGFzcyhcImJlc3RpYXJ5LWZpbHRlci1jb250YWluZXJcIilcblxuXHRcdFx0LmFkZFNlYXJjaCgodCkgPT4ge1xuXHRcdFx0XHR0LnNldFBsYWNlaG9sZGVyKFwiU2VhcmNoIENyZWF0dXJlc1wiKS5vbkNoYW5nZShcblx0XHRcdFx0XHRkZWJvdW5jZSgodikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5zaG93U2VhcmNoUmVzdWx0cyhhZGRpdGlvbmFsLCB2KTtcblx0XHRcdFx0XHR9LCAxMDApXG5cdFx0XHRcdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKChiKSA9PiB7XG5cdFx0XHRcdGIuc2V0SWNvbihcInRyYXNoXCIpXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJEZWxldGUgQWxsIEZpbHRlcmVkIENyZWF0dXJlc1wiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcblx0XHRcdFx0XHRcdFx0dGhpcy5yZXN1bHRzLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0bW9kYWwub25DbG9zZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKG1vZGFsLnNhdmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlTW9uc3RlcnMoXG5cdFx0XHRcdFx0XHRcdFx0XHQuLi4odGhpcy5yZXN1bHRzPy5tYXAoKG0pID0+IG0ubmFtZSkgPz8gW10pXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmdlbmVyYXRlQ3JlYXR1cmVzKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR0aGlzLnNldEZpbHRlckRlc2MoKTtcblx0XHQvKiBjb25zdCBzb3VyY2VzU2V0dGluZyA9IGZpbHRlcnMuY3JlYXRlRWwoXCJkZXRhaWxzXCIpO1xuXHRcdHNvdXJjZXNTZXR0aW5nLmNyZWF0ZUVsKFwic3VtbWFyeVwiLCB7IHRleHQ6IFwiRmlsdGVyIFNvdXJjZXNcIiB9KTtcblx0XHRjb25zdCBsaXN0ID0gc291cmNlc1NldHRpbmcuY3JlYXRlRWwoXG5cdFx0XHRcInVsXCIsXG5cdFx0XHRcImNvbnRhaW5zLXRhc2stbGlzdCB0YXNrLWxpc3QtaW5saW5lIG1hcmtkb3duLXByZXZpZXctdmlld1wiXG5cdFx0KTtcblxuXHRcdGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnBsdWdpbi5zb3VyY2VzKSB7XG5cdFx0XHRjb25zdCBsaSA9IGxpc3QuY3JlYXRlRWwoXCJsaVwiLCBcInRhc2stbGlzdC1pdGVtXCIpO1xuXHRcdFx0bGkuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRpZDogXCJpbnB1dF9cIiArIHNvdXJjZSxcblx0XHRcdFx0XHRjaGVja2VkOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0eXBlOiBcImNoZWNrYm94XCIsXG5cdFx0XHRcdGNsczogXCJ0YXNrLWxpc3QtaXRlbS1jaGVja2JveFwiLFxuXHRcdFx0fSkub25jbGljayA9IChldnQpID0+IHtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRpZiAodGFyZ2V0LmNoZWNrZWQpIHtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXllZC5hZGQoc291cmNlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXllZC5kZWxldGUoc291cmNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnNob3dTZWFyY2hSZXN1bHRzKGFkZGl0aW9uYWwsIFwiXCIpO1xuXHRcdFx0fTtcblx0XHRcdGxpLmNyZWF0ZUVsKFwibGFiZWxcIiwge1xuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0Zm9yOiBcImlucHV0X1wiICsgc291cmNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0ZXh0OiBzb3VyY2UsXG5cdFx0XHR9KTtcblx0XHR9ICovXG5cdFx0Y29uc3QgYWRkaXRpb25hbCA9IGFkZGl0aW9uYWxDb250YWluZXIuY3JlYXRlRGl2KFwiYWRkaXRpb25hbFwiKTtcblx0XHRpZiAoIXRoaXMucGx1Z2luLmNyZWF0dXJlcz8ubGVuZ3RoKSB7XG5cdFx0XHRhZGRpdGlvbmFsXG5cdFx0XHRcdC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRcdHN0eWxlOiBcImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBwYWRkaW5nLWJvdHRvbTogMThweDtcIixcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0dGV4dDogXCJObyBzYXZlZCBjcmVhdHVyZXMhIENyZWF0ZSBvbmUgdG8gc2VlIGl0IGhlcmUuXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93U2VhcmNoUmVzdWx0cyhhZGRpdGlvbmFsLCBcIlwiKSk7XG5cdH1cblx0c2V0RmlsdGVyRGVzYygpIHtcblx0XHR0aGlzLmZpbHRlci5zZXREZXNjKFxuXHRcdFx0Y3JlYXRlRnJhZ21lbnQoKGUpID0+IHtcblx0XHRcdFx0ZS5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHR0ZXh0OiBgTWFuYWdpbmcgJHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNyZWF0dXJlcy5sZW5ndGhcblx0XHRcdFx0XHR9IGhvbWVicmV3IGNyZWF0dXJlJHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNyZWF0dXJlcy5sZW5ndGggPT0gMSA/IFwiXCIgOiBcInNcIlxuXHRcdFx0XHRcdH0uYCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGUuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0XHRzdHlsZTogXCJtYXJnaW46IDA7XCIsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSkuY3JlYXRlRWwoXCJzbWFsbFwiLCB7XG5cdFx0XHRcdFx0dGV4dDogYERpc3BsYXlpbmc6ICR7dGhpcy5yZXN1bHRzLmxlbmd0aH0gaG9tZWJyZXcgY3JlYXR1cmVzLmAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cdHNob3dTZWFyY2hSZXN1bHRzKGFkZGl0aW9uYWw6IEhUTUxEaXZFbGVtZW50LCBzZWFyY2g6IHN0cmluZykge1xuXHRcdGFkZGl0aW9uYWwuZW1wdHkoKTtcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5wZXJmb3JtRnV6enlTZWFyY2goc2VhcmNoKSkge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IG5ldyBTZXR0aW5nKGFkZGl0aW9uYWwpLnNldE5hbWUoaXRlbS5uYW1lKTtcblx0XHRcdGxldCBkZXNjOiBzdHJpbmcgfCBudWxsID0gbnVsbCxcblx0XHRcdFx0bmVlZFRvb2x0aXAgPSBmYWxzZTtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KGl0ZW0uc291cmNlKSkge1xuXHRcdFx0XHRsZXQgc291cmNlID0gaXRlbS5zb3VyY2Uuc2xpY2UoMCwgNCk7XG5cdFx0XHRcdGlmIChpdGVtLnNvdXJjZS5sZW5ndGggPiA0KSB7XG5cdFx0XHRcdFx0c291cmNlLnB1c2goYGFuZCAke2l0ZW0uc291cmNlLmxlbmd0aCAtIDR9IG1vcmVgKTtcblx0XHRcdFx0XHRuZWVkVG9vbHRpcCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGVzYyA9IHN0cmluZ2lmeShzb3VyY2UsIDAsIFwiLCBcIiwgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnNvdXJjZSkge1xuXHRcdFx0XHRkZXNjID0gaXRlbS5zb3VyY2U7XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50LnNldERlc2MoZGVzYyA/PyBcIlwiKTtcblx0XHRcdGlmIChuZWVkVG9vbHRpcCkge1xuXHRcdFx0XHRjb250ZW50LmRlc2NFbC5zZXRBdHRyKFxuXHRcdFx0XHRcdFwiYXJpYS1sYWJlbFwiLFxuXHRcdFx0XHRcdHN0cmluZ2lmeShpdGVtLnNvdXJjZSA/PyBcIlwiLCAwLCBcIiwgXCIsIGZhbHNlKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0Y29udGVudFxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+IHtcblx0XHRcdFx0XHRiLnNldEljb24oXCJpbmZvXCIpXG5cdFx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlZpZXdcIilcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0LyogY29uc3QgbW9kYWwgPSBuZXcgVmlld01vbnN0ZXJNb2RhbChcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdFx0XHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTsgKi9cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+IHtcblx0XHRcdFx0XHRiLnNldEljb24oXCJwZW5jaWxcIilcblx0XHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiRWRpdFwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvKiBjb25zdCBtb2RhbCA9IG5ldyBFZGl0TW9uc3Rlck1vZGFsKFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLFxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2hvd1NlYXJjaFJlc3VsdHMoYWRkaXRpb25hbCwgc2VhcmNoKTtcblx0XHRcdFx0XHRcdFx0fTsgKi9cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+IHtcblx0XHRcdFx0XHRiLnNldEljb24oXCJ0cmFzaFwiKVxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJEZWxldGVcIilcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlTW9uc3RlcnMoaXRlbS5uYW1lKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93U2VhcmNoUmVzdWx0cyhhZGRpdGlvbmFsLCBzZWFyY2gpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLnNldEZpbHRlckRlc2MoKTtcblx0fVxuXHRkaXNwbGF5ZWQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldCh0aGlzLnBsdWdpbi5zb3VyY2VzKTtcblx0cGVyZm9ybUZ1enp5U2VhcmNoKGlucHV0OiBzdHJpbmcpIHtcblx0XHRjb25zdCByZXN1bHRzOiBNb25zdGVyW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IHJlc291cmNlIG9mIHRoaXMucGx1Z2luLnNvcnRlZCkge1xuXHRcdFx0aWYgKCFyZXNvdXJjZS5uYW1lICYmICFyZXNvdXJjZS5zb3VyY2UpIGNvbnRpbnVlO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0eXBlb2YgcmVzb3VyY2Uuc291cmNlID09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXRoaXMuZGlzcGxheWVkLmhhcyhyZXNvdXJjZS5zb3VyY2UpXG5cdFx0XHQpXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRBcnJheS5pc0FycmF5KHJlc291cmNlLnNvdXJjZSkgJiZcblx0XHRcdFx0IXJlc291cmNlLnNvdXJjZS5maW5kKChzOiBzdHJpbmcpID0+IHRoaXMuZGlzcGxheWVkLmhhcyhzKSlcblx0XHRcdClcblx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdGNvbnN0IHNlYXJjaCA9IHByZXBhcmVTaW1wbGVTZWFyY2goaW5wdXQpO1xuXHRcdFx0bGV0IHJlc3VsdCA9IHNlYXJjaChyZXNvdXJjZS5uYW1lKTtcblx0XHRcdGlmICghcmVzdWx0ICYmIHJlc291cmNlLnNvdXJjZSAhPSBudWxsKSB7XG5cdFx0XHRcdHJlc3VsdCA9IHNlYXJjaChzdHJpbmdpZnkocmVzb3VyY2Uuc291cmNlKSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaChyZXNvdXJjZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMucmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwgMTAwKTtcblx0XHRyZXR1cm4gdGhpcy5yZXN1bHRzO1xuXHR9XG59XG5cbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0c2F2ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0Y29uc3RydWN0b3IocHVibGljIGZpbHRlcmVkOiBudW1iZXIsIGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXHRvbk9wZW4oKSB7XG5cdFx0dGhpcy50aXRsZUVsLnNldFRleHQoXCJBcmUgeW91IHN1cmU/XCIpO1xuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OiBgVGhpcyB3aWxsIGRlbGV0ZSAke3RoaXMuZmlsdGVyZWR9IGNyZWF0dXJlcy4gVGhpcyBjYW5ub3QgYmUgdW5kb25lLmAsXG5cdFx0fSk7XG5cdFx0bmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXG5cdFx0XHQuc2V0Q2xhc3MoXCJuby1ib3JkZXItdG9wXCIpXG5cdFx0XHQuYWRkQnV0dG9uKChiKSA9PiB7XG5cdFx0XHRcdGIuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuc2F2ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSlcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYikgPT5cblx0XHRcdFx0Yi5zZXRJY29uKFwiY3Jvc3NcIikub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zYXZlZCA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaG91bGRBZGQoc3lzdGVtOiBHYW1lU3lzdGVtKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0bGV0IHJlc3VsdCA9IGZhbHNlO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG5cdFx0bW9kYWwub25PcGVuID0gKCkgPT4ge1xuXHRcdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiR2FtZSBTeXN0ZW0gQ29uZmxpY3RcIik7XG5cdFx0XHRtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogXCJUaGlzIGNyZWF0dXJlIHNldCBpcyB0aWVkIHRvIGEgZ2FtZSBzeXN0ZW0gdGhhdCB5b3UgYWxyZWFkeSBoYXZlIGRlZmluZWQuXCIsXG5cdFx0XHR9KTtcblx0XHRcdG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBgU2hvdWxkIHRoZXNlIGNyZWF0dXJlcyBiZSBhZGRlZCB0byB0aGUgJHtzeXN0ZW0ubmFtZX0gc3lzdGVtP2AsXG5cdFx0XHR9KTtcblx0XHRcdG5ldyBTZXR0aW5nKG1vZGFsLmNvbnRlbnRFbClcblx0XHRcdFx0LmFkZEJ1dHRvbigoYikgPT5cblx0XHRcdFx0XHRiXG5cdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIlllc1wiKVxuXHRcdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpXG5cdFx0XHRcdC5hZGRCdXR0b24oKGIpID0+XG5cdFx0XHRcdFx0Yi5zZXRCdXR0b25UZXh0KFwiTm9cIikub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fTtcblx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4gcmVzb2x2ZShyZXN1bHQpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fSk7XG59XG4iLCAiZXhwb3J0IGludGVyZmFjZSBDYWNoZSB7XG4gIGhhczogKHZhbHVlOiBhbnkpID0+IGJvb2xlYW47XG4gIHNldDogKGtleTogYW55LCB2YWx1ZTogYW55KSA9PiB2b2lkO1xuICBnZXQ6IChrZXk6IGFueSkgPT4gYW55O1xufVxuXG5jb25zdCB7IHRvU3RyaW5nOiB0b1N0cmluZ0Z1bmN0aW9uIH0gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5jb25zdCB7IGNyZWF0ZSB9ID0gT2JqZWN0O1xuY29uc3QgeyB0b1N0cmluZzogdG9TdHJpbmdPYmplY3QgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogQGNsYXNzZGVzYyBGYWxsYmFjayBjYWNoZSBmb3Igd2hlbiBXZWFrTWFwIGlzIG5vdCBuYXRpdmVseSBzdXBwb3J0ZWRcbiAqL1xuY2xhc3MgTGVnYWN5Q2FjaGUge1xuICBwcml2YXRlIF9rZXlzOiBhbnlbXSA9IFtdO1xuICBwcml2YXRlIF92YWx1ZXM6IGFueVtdID0gW107XG5cbiAgaGFzKGtleTogYW55KSB7XG4gICAgcmV0dXJuICEhfnRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICB9XG5cbiAgZ2V0KGtleTogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlc1t0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KV07XG4gIH1cblxuICBzZXQoa2V5OiBhbnksIHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLl9rZXlzLnB1c2goa2V5KTtcbiAgICB0aGlzLl92YWx1ZXMucHVzaCh2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FjaGVMZWdhY3koKTogQ2FjaGUge1xuICByZXR1cm4gbmV3IExlZ2FjeUNhY2hlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlTW9kZXJuKCk6IENhY2hlIHtcbiAgcmV0dXJuIG5ldyBXZWFrTWFwKCk7XG59XG5cbi8qKlxuICogR2V0IGEgbmV3IGNhY2hlIG9iamVjdCB0byBwcmV2ZW50IGNpcmN1bGFyIHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVDYWNoZSA9XG4gIHR5cGVvZiBXZWFrTWFwICE9PSAndW5kZWZpbmVkJyA/IGNyZWF0ZUNhY2hlTW9kZXJuIDogY3JlYXRlQ2FjaGVMZWdhY3k7XG5cbi8qKlxuICogR2V0IGFuIGVtcHR5IHZlcnNpb24gb2YgdGhlIG9iamVjdCB3aXRoIHRoZSBzYW1lIHByb3RvdHlwZSBpdCBoYXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGVhbkNsb25lKHByb3RvdHlwZTogYW55KTogYW55IHtcbiAgaWYgKCFwcm90b3R5cGUpIHtcbiAgICByZXR1cm4gY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgY29uc3QgQ29uc3RydWN0b3IgPSBwcm90b3R5cGUuY29uc3RydWN0b3I7XG5cbiAgaWYgKENvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICByZXR1cm4gcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlID8ge30gOiBjcmVhdGUocHJvdG90eXBlKTtcbiAgfVxuXG4gIGlmICh+dG9TdHJpbmdGdW5jdGlvbi5jYWxsKENvbnN0cnVjdG9yKS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgIH0gY2F0Y2gge31cbiAgfVxuXG4gIHJldHVybiBjcmVhdGUocHJvdG90eXBlKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmVnRXhwRmxhZ3NMZWdhY3kocmVnRXhwOiBSZWdFeHApOiBzdHJpbmcge1xuICBsZXQgZmxhZ3MgPSAnJztcblxuICBpZiAocmVnRXhwLmdsb2JhbCkge1xuICAgIGZsYWdzICs9ICdnJztcbiAgfVxuXG4gIGlmIChyZWdFeHAuaWdub3JlQ2FzZSkge1xuICAgIGZsYWdzICs9ICdpJztcbiAgfVxuXG4gIGlmIChyZWdFeHAubXVsdGlsaW5lKSB7XG4gICAgZmxhZ3MgKz0gJ20nO1xuICB9XG5cbiAgaWYgKHJlZ0V4cC51bmljb2RlKSB7XG4gICAgZmxhZ3MgKz0gJ3UnO1xuICB9XG5cbiAgaWYgKHJlZ0V4cC5zdGlja3kpIHtcbiAgICBmbGFncyArPSAneSc7XG4gIH1cblxuICByZXR1cm4gZmxhZ3M7XG59XG5cbmZ1bmN0aW9uIGdldFJlZ0V4cEZsYWdzTW9kZXJuKHJlZ0V4cDogUmVnRXhwKTogc3RyaW5nIHtcbiAgcmV0dXJuIHJlZ0V4cC5mbGFncztcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZsYWdzIHRvIGFwcGx5IHRvIHRoZSBjb3BpZWQgcmVnZXhwLlxuICovXG5leHBvcnQgY29uc3QgZ2V0UmVnRXhwRmxhZ3MgPVxuICAvdGVzdC9nLmZsYWdzID09PSAnZycgPyBnZXRSZWdFeHBGbGFnc01vZGVybiA6IGdldFJlZ0V4cEZsYWdzTGVnYWN5O1xuXG5mdW5jdGlvbiBnZXRUYWdMZWdhY3kodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGUgPSB0b1N0cmluZ09iamVjdC5jYWxsKHZhbHVlKTtcblxuICByZXR1cm4gdHlwZS5zdWJzdHJpbmcoOCwgdHlwZS5sZW5ndGggLSAxKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFnTW9kZXJuKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICByZXR1cm4gdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCBnZXRUYWdMZWdhY3kodmFsdWUpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdGFnIG9mIHRoZSB2YWx1ZSBwYXNzZWQsIHNvIHRoYXQgdGhlIGNvcnJlY3QgY29waWVyIGNhbiBiZSB1c2VkLlxuICovXG5leHBvcnQgY29uc3QgZ2V0VGFnID1cbiAgdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgPyBnZXRUYWdNb2Rlcm4gOiBnZXRUYWdMZWdhY3k7XG4iLCAiaW1wb3J0IHsgZ2V0Q2xlYW5DbG9uZSwgZ2V0UmVnRXhwRmxhZ3MgfSBmcm9tICcuL3V0aWxzJztcblxuaW1wb3J0IHR5cGUgeyBDYWNoZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBJbnRlcm5hbENvcGllcjxWYWx1ZT4gPSAodmFsdWU6IFZhbHVlLCBzdGF0ZTogU3RhdGUpID0+IFZhbHVlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgQ29uc3RydWN0b3I6IGFueTtcbiAgY2FjaGU6IENhY2hlO1xuICBjb3BpZXI6IEludGVybmFsQ29waWVyPGFueT47XG4gIHByb3RvdHlwZTogYW55O1xufVxuXG5jb25zdCB7XG4gIGRlZmluZVByb3BlcnR5LFxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIGdldE93blByb3BlcnR5TmFtZXMsXG4gIGdldE93blByb3BlcnR5U3ltYm9scyxcbn0gPSBPYmplY3Q7XG5jb25zdCB7IGhhc093blByb3BlcnR5LCBwcm9wZXJ0eUlzRW51bWVyYWJsZSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuY29uc3QgU1VQUE9SVFNfU1lNQk9MID0gdHlwZW9mIGdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJztcblxuZnVuY3Rpb24gZ2V0U3RyaWN0UHJvcGVydGllc01vZGVybihvYmplY3Q6IGFueSk6IEFycmF5PHN0cmluZyB8IHN5bWJvbD4ge1xuICByZXR1cm4gKGdldE93blByb3BlcnR5TmFtZXMob2JqZWN0KSBhcyBBcnJheTxzdHJpbmcgfCBzeW1ib2w+KS5jb25jYXQoXG4gICAgZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdClcbiAgKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHByb3Blcml0ZXMgdXNlZCB3aGVuIGNvcHlpbmcgb2JqZWN0cyBzdHJpY3RseS4gVGhpcyBpbmNsdWRlcyBib3RoIGtleXMgYW5kIHN5bWJvbHMuXG4gKi9cbmNvbnN0IGdldFN0cmljdFByb3BlcnRpZXMgPSBTVVBQT1JUU19TWU1CT0xcbiAgPyBnZXRTdHJpY3RQcm9wZXJ0aWVzTW9kZXJuXG4gIDogZ2V0T3duUHJvcGVydHlOYW1lcztcblxuLyoqXG4gKiBTdHJpY2x0eSBjb3B5IGFsbCBwcm9wZXJ0aWVzIGNvbnRhaW5lZCBvbiB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBjb3B5T3duUHJvcGVydGllc1N0cmljdDxWYWx1ZT4oXG4gIHZhbHVlOiBWYWx1ZSxcbiAgY2xvbmU6IFZhbHVlLFxuICBzdGF0ZTogU3RhdGVcbik6IFZhbHVlIHtcbiAgY29uc3QgcHJvcGVydGllcyA9IGdldFN0cmljdFByb3BlcnRpZXModmFsdWUpO1xuXG4gIGZvciAoXG4gICAgbGV0IGluZGV4ID0gMCwgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGgsIHByb3BlcnR5LCBkZXNjcmlwdG9yO1xuICAgIGluZGV4IDwgbGVuZ3RoO1xuICAgICsraW5kZXhcbiAgKSB7XG4gICAgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2luZGV4XTtcblxuICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2NhbGxlZScgfHwgcHJvcGVydHkgPT09ICdjYWxsZXInKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBwcm9wZXJ0eSk7XG5cbiAgICBpZiAoIWRlc2NyaXB0b3IpIHtcbiAgICAgIC8vIEluIGV4dHJhIGVkZ2UgY2FzZXMgd2hlcmUgdGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgY2Fubm90IGJlIHJldHJpdmVkLCBmYWxsIGJhY2sgdG9cbiAgICAgIC8vIHRoZSBsb29zZSBhc3NpZ25tZW50LlxuICAgICAgKGNsb25lIGFzIGFueSlbcHJvcGVydHldID0gc3RhdGUuY29waWVyKCh2YWx1ZSBhcyBhbnkpW3Byb3BlcnR5XSwgc3RhdGUpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gT25seSBjbG9uZSB0aGUgdmFsdWUgaWYgYWN0dWFsbHkgYSB2YWx1ZSwgbm90IGEgZ2V0dGVyIC8gc2V0dGVyLlxuICAgIGlmICghZGVzY3JpcHRvci5nZXQgJiYgIWRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgICBkZXNjcmlwdG9yLnZhbHVlID0gc3RhdGUuY29waWVyKGRlc2NyaXB0b3IudmFsdWUsIHN0YXRlKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgZGVmaW5lUHJvcGVydHkoY2xvbmUsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gVGVlIGFib3ZlIGNhbiBmYWlsIG9uIG5vZGUgaW4gZWRnZSBjYXNlcywgc28gZmFsbCBiYWNrIHRvIHRoZSBsb29zZSBhc3NpZ25tZW50LlxuICAgICAgKGNsb25lIGFzIGFueSlbcHJvcGVydHldID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2xvbmU7XG59XG5cbi8qKlxuICogRGVlcGx5IGNvcHkgdGhlIGluZGV4ZWQgdmFsdWVzIGluIHRoZSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlBcnJheUxvb3NlKGFycmF5OiBhbnlbXSwgc3RhdGU6IFN0YXRlKSB7XG4gIGNvbnN0IGNsb25lID0gbmV3IHN0YXRlLkNvbnN0cnVjdG9yKCk7XG5cbiAgLy8gc2V0IGluIHRoZSBjYWNoZSBpbW1lZGlhdGVseSB0byBiZSBhYmxlIHRvIHJldXNlIHRoZSBvYmplY3QgcmVjdXJzaXZlbHlcbiAgc3RhdGUuY2FjaGUuc2V0KGFycmF5LCBjbG9uZSk7XG5cbiAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyArK2luZGV4KSB7XG4gICAgY2xvbmVbaW5kZXhdID0gc3RhdGUuY29waWVyKGFycmF5W2luZGV4XSwgc3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG4vKipcbiAqIERlZXBseSBjb3B5IHRoZSBpbmRleGVkIHZhbHVlcyBpbiB0aGUgYXJyYXksIGFzIHdlbGwgYXMgYW55IGN1c3RvbSBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weUFycmF5U3RyaWN0PFZhbHVlIGV4dGVuZHMgYW55W10+KFxuICBhcnJheTogVmFsdWUsXG4gIHN0YXRlOiBTdGF0ZVxuKSB7XG4gIGNvbnN0IGNsb25lID0gbmV3IHN0YXRlLkNvbnN0cnVjdG9yKCkgYXMgVmFsdWU7XG5cbiAgLy8gc2V0IGluIHRoZSBjYWNoZSBpbW1lZGlhdGVseSB0byBiZSBhYmxlIHRvIHJldXNlIHRoZSBvYmplY3QgcmVjdXJzaXZlbHlcbiAgc3RhdGUuY2FjaGUuc2V0KGFycmF5LCBjbG9uZSk7XG5cbiAgcmV0dXJuIGNvcHlPd25Qcm9wZXJ0aWVzU3RyaWN0KGFycmF5LCBjbG9uZSwgc3RhdGUpO1xufVxuXG4vKipcbiAqIENvcHkgdGhlIGNvbnRlbnRzIG9mIHRoZSBBcnJheUJ1ZmZlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlBcnJheUJ1ZmZlcjxWYWx1ZSBleHRlbmRzIEFycmF5QnVmZmVyPihcbiAgYXJyYXlCdWZmZXI6IFZhbHVlLFxuICBfc3RhdGU6IFN0YXRlXG4pOiBWYWx1ZSB7XG4gIHJldHVybiBhcnJheUJ1ZmZlci5zbGljZSgwKSBhcyBWYWx1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgQmxvYiB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgb3JpZ2luYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5QmxvYjxWYWx1ZSBleHRlbmRzIEJsb2I+KFxuICBibG9iOiBWYWx1ZSxcbiAgX3N0YXRlOiBTdGF0ZVxuKTogVmFsdWUge1xuICByZXR1cm4gYmxvYi5zbGljZSgwLCBibG9iLnNpemUsIGJsb2IudHlwZSkgYXMgVmFsdWU7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IERhdGFWaWV3IHdpdGggdGhlIGNvbnRlbnRzIG9mIHRoZSBvcmlnaW5hbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlEYXRhVmlldzxWYWx1ZSBleHRlbmRzIERhdGFWaWV3PihcbiAgZGF0YVZpZXc6IFZhbHVlLFxuICBzdGF0ZTogU3RhdGVcbik6IFZhbHVlIHtcbiAgcmV0dXJuIG5ldyBzdGF0ZS5Db25zdHJ1Y3Rvcihjb3B5QXJyYXlCdWZmZXIoZGF0YVZpZXcuYnVmZmVyLCBzdGF0ZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBEYXRlIGJhc2VkIG9uIHRoZSB0aW1lIG9mIHRoZSBvcmlnaW5hbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlEYXRlPFZhbHVlIGV4dGVuZHMgRGF0ZT4oZGF0ZTogVmFsdWUsIHN0YXRlOiBTdGF0ZSk6IFZhbHVlIHtcbiAgcmV0dXJuIG5ldyBzdGF0ZS5Db25zdHJ1Y3RvcihkYXRlLmdldFRpbWUoKSk7XG59XG5cbi8qKlxuICogRGVlcGx5IGNvcHkgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgb3JpZ2luYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5TWFwTG9vc2U8VmFsdWUgZXh0ZW5kcyBNYXA8YW55LCBhbnk+PihcbiAgbWFwOiBWYWx1ZSxcbiAgc3RhdGU6IFN0YXRlXG4pOiBWYWx1ZSB7XG4gIGNvbnN0IGNsb25lID0gbmV3IHN0YXRlLkNvbnN0cnVjdG9yKCkgYXMgVmFsdWU7XG5cbiAgLy8gc2V0IGluIHRoZSBjYWNoZSBpbW1lZGlhdGVseSB0byBiZSBhYmxlIHRvIHJldXNlIHRoZSBvYmplY3QgcmVjdXJzaXZlbHlcbiAgc3RhdGUuY2FjaGUuc2V0KG1hcCwgY2xvbmUpO1xuXG4gIG1hcC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgY2xvbmUuc2V0KGtleSwgc3RhdGUuY29waWVyKHZhbHVlLCBzdGF0ZSkpO1xuICB9KTtcblxuICByZXR1cm4gY2xvbmU7XG59XG5cbi8qKlxuICogRGVlcGx5IGNvcHkgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgb3JpZ2luYWwsIGFzIHdlbGwgYXMgYW55IGN1c3RvbSBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weU1hcFN0cmljdDxWYWx1ZSBleHRlbmRzIE1hcDxhbnksIGFueT4+KFxuICBtYXA6IFZhbHVlLFxuICBzdGF0ZTogU3RhdGVcbikge1xuICByZXR1cm4gY29weU93blByb3BlcnRpZXNTdHJpY3QobWFwLCBjb3B5TWFwTG9vc2UobWFwLCBzdGF0ZSksIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gY29weU9iamVjdExvb3NlTGVnYWN5PFZhbHVlIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gIG9iamVjdDogVmFsdWUsXG4gIHN0YXRlOiBTdGF0ZVxuKTogVmFsdWUge1xuICBjb25zdCBjbG9uZTogYW55ID0gZ2V0Q2xlYW5DbG9uZShzdGF0ZS5wcm90b3R5cGUpO1xuXG4gIC8vIHNldCBpbiB0aGUgY2FjaGUgaW1tZWRpYXRlbHkgdG8gYmUgYWJsZSB0byByZXVzZSB0aGUgb2JqZWN0IHJlY3Vyc2l2ZWx5XG4gIHN0YXRlLmNhY2hlLnNldChvYmplY3QsIGNsb25lKTtcblxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIGNsb25lW2tleV0gPSBzdGF0ZS5jb3BpZXIob2JqZWN0W2tleV0sIHN0YXRlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2xvbmU7XG59XG5cbmZ1bmN0aW9uIGNvcHlPYmplY3RMb29zZU1vZGVybjxWYWx1ZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBvYmplY3Q6IFZhbHVlLFxuICBzdGF0ZTogU3RhdGVcbik6IFZhbHVlIHtcbiAgY29uc3QgY2xvbmUgPSBnZXRDbGVhbkNsb25lKHN0YXRlLnByb3RvdHlwZSk7XG5cbiAgLy8gc2V0IGluIHRoZSBjYWNoZSBpbW1lZGlhdGVseSB0byBiZSBhYmxlIHRvIHJldXNlIHRoZSBvYmplY3QgcmVjdXJzaXZlbHlcbiAgc3RhdGUuY2FjaGUuc2V0KG9iamVjdCwgY2xvbmUpO1xuXG4gIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgY2xvbmVba2V5XSA9IHN0YXRlLmNvcGllcihvYmplY3Rba2V5XSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN5bWJvbHMgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTtcblxuICBmb3IgKFxuICAgIGxldCBpbmRleCA9IDAsIGxlbmd0aCA9IHN5bWJvbHMubGVuZ3RoLCBzeW1ib2w7XG4gICAgaW5kZXggPCBsZW5ndGg7XG4gICAgKytpbmRleFxuICApIHtcbiAgICBzeW1ib2wgPSBzeW1ib2xzW2luZGV4XTtcblxuICAgIGlmIChwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iamVjdCwgc3ltYm9sKSkge1xuICAgICAgY2xvbmVbc3ltYm9sXSA9IHN0YXRlLmNvcGllcigob2JqZWN0IGFzIGFueSlbc3ltYm9sXSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjbG9uZTtcbn1cblxuLyoqXG4gKiBEZWVwbHkgY29weSB0aGUgcHJvcGVydGllcyAoa2V5cyBhbmQgc3ltYm9scykgYW5kIHZhbHVlcyBvZiB0aGUgb3JpZ2luYWwuXG4gKi9cbmV4cG9ydCBjb25zdCBjb3B5T2JqZWN0TG9vc2UgPSBTVVBQT1JUU19TWU1CT0xcbiAgPyBjb3B5T2JqZWN0TG9vc2VNb2Rlcm5cbiAgOiBjb3B5T2JqZWN0TG9vc2VMZWdhY3k7XG5cbi8qKlxuICogRGVlcGx5IGNvcHkgdGhlIHByb3BlcnRpZXMgKGtleXMgYW5kIHN5bWJvbHMpIGFuZCB2YWx1ZXMgb2YgdGhlIG9yaWdpbmFsLCBhcyB3ZWxsXG4gKiBhcyBhbnkgaGlkZGVuIG9yIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5T2JqZWN0U3RyaWN0PFZhbHVlIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gIG9iamVjdDogVmFsdWUsXG4gIHN0YXRlOiBTdGF0ZVxuKTogVmFsdWUge1xuICBjb25zdCBjbG9uZSA9IGdldENsZWFuQ2xvbmUoc3RhdGUucHJvdG90eXBlKTtcblxuICAvLyBzZXQgaW4gdGhlIGNhY2hlIGltbWVkaWF0ZWx5IHRvIGJlIGFibGUgdG8gcmV1c2UgdGhlIG9iamVjdCByZWN1cnNpdmVseVxuICBzdGF0ZS5jYWNoZS5zZXQob2JqZWN0LCBjbG9uZSk7XG5cbiAgcmV0dXJuIGNvcHlPd25Qcm9wZXJ0aWVzU3RyaWN0KG9iamVjdCwgY2xvbmUsIHN0YXRlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcHJpbWl0aXZlIHdyYXBwZXIgZnJvbSB0aGUgdmFsdWUgb2YgdGhlIG9yaWdpbmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weVByaW1pdGl2ZVdyYXBwZXI8XG4gIC8vIFNwZWNpZmljYWxseSB1c2UgdGhlIG9iamVjdCBjb25zdHJ1Y3RvciB0eXBlc1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuICBWYWx1ZSBleHRlbmRzIEJvb2xlYW4gfCBOdW1iZXIgfCBTdHJpbmdcbj4ocHJpbWl0aXZlT2JqZWN0OiBWYWx1ZSwgc3RhdGU6IFN0YXRlKTogVmFsdWUge1xuICByZXR1cm4gbmV3IHN0YXRlLkNvbnN0cnVjdG9yKHByaW1pdGl2ZU9iamVjdC52YWx1ZU9mKCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBSZWdFeHAgYmFzZWQgb24gdGhlIHZhbHVlIGFuZCBmbGFncyBvZiB0aGUgb3JpZ2luYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5UmVnRXhwPFZhbHVlIGV4dGVuZHMgUmVnRXhwPihcbiAgcmVnRXhwOiBWYWx1ZSxcbiAgc3RhdGU6IFN0YXRlXG4pOiBWYWx1ZSB7XG4gIGNvbnN0IGNsb25lID0gbmV3IHN0YXRlLkNvbnN0cnVjdG9yKFxuICAgIHJlZ0V4cC5zb3VyY2UsXG4gICAgZ2V0UmVnRXhwRmxhZ3MocmVnRXhwKVxuICApIGFzIFZhbHVlO1xuXG4gIGNsb25lLmxhc3RJbmRleCA9IHJlZ0V4cC5sYXN0SW5kZXg7XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgb3JpZ2luYWwgdmFsdWUgKGFuIGlkZW50aXR5IGZ1bmN0aW9uKS5cbiAqXG4gKiBAbm90ZVxuICogVEhpcyBpcyB1c2VkIGZvciBvYmplY3RzIHRoYXQgY2Fubm90IGJlIGNvcGllZCwgc3VjaCBhcyBXZWFrTWFwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weVNlbGY8VmFsdWU+KHZhbHVlOiBWYWx1ZSwgX3N0YXRlOiBTdGF0ZSk6IFZhbHVlIHtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIERlZXBseSBjb3B5IHRoZSB2YWx1ZXMgb2YgdGhlIG9yaWdpbmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weVNldExvb3NlPFZhbHVlIGV4dGVuZHMgU2V0PGFueT4+KFxuICBzZXQ6IFZhbHVlLFxuICBzdGF0ZTogU3RhdGVcbik6IFZhbHVlIHtcbiAgY29uc3QgY2xvbmUgPSBuZXcgc3RhdGUuQ29uc3RydWN0b3IoKSBhcyBWYWx1ZTtcblxuICAvLyBzZXQgaW4gdGhlIGNhY2hlIGltbWVkaWF0ZWx5IHRvIGJlIGFibGUgdG8gcmV1c2UgdGhlIG9iamVjdCByZWN1cnNpdmVseVxuICBzdGF0ZS5jYWNoZS5zZXQoc2V0LCBjbG9uZSk7XG5cbiAgc2V0LmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgY2xvbmUuYWRkKHN0YXRlLmNvcGllcih2YWx1ZSwgc3RhdGUpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNsb25lO1xufVxuXG4vKipcbiAqIERlZXBseSBjb3B5IHRoZSB2YWx1ZXMgb2YgdGhlIG9yaWdpbmFsLCBhcyB3ZWxsIGFzIGFueSBjdXN0b20gcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlTZXRTdHJpY3Q8VmFsdWUgZXh0ZW5kcyBTZXQ8YW55Pj4oXG4gIHNldDogVmFsdWUsXG4gIHN0YXRlOiBTdGF0ZVxuKTogVmFsdWUge1xuICByZXR1cm4gY29weU93blByb3BlcnRpZXNTdHJpY3Qoc2V0LCBjb3B5U2V0TG9vc2Uoc2V0LCBzdGF0ZSksIHN0YXRlKTtcbn1cbiIsICJpbXBvcnQge1xuICBjb3B5QXJyYXlCdWZmZXIsXG4gIGNvcHlBcnJheUxvb3NlLFxuICBjb3B5QXJyYXlTdHJpY3QsXG4gIGNvcHlCbG9iLFxuICBjb3B5RGF0YVZpZXcsXG4gIGNvcHlEYXRlLFxuICBjb3B5TWFwTG9vc2UsXG4gIGNvcHlNYXBTdHJpY3QsXG4gIGNvcHlPYmplY3RMb29zZSxcbiAgY29weU9iamVjdFN0cmljdCxcbiAgY29weVByaW1pdGl2ZVdyYXBwZXIsXG4gIGNvcHlSZWdFeHAsXG4gIGNvcHlTZWxmLFxuICBjb3B5U2V0TG9vc2UsXG4gIGNvcHlTZXRTdHJpY3QsXG59IGZyb20gJy4vY29waWVyJztcbmltcG9ydCB7IGNyZWF0ZUNhY2hlLCBnZXRUYWcgfSBmcm9tICcuL3V0aWxzJztcblxuaW1wb3J0IHR5cGUgeyBJbnRlcm5hbENvcGllciwgU3RhdGUgfSBmcm9tICcuL2NvcGllcic7XG5cbmV4cG9ydCB0eXBlIHsgU3RhdGUgfSBmcm9tICcuL2NvcGllcic7XG5cbmNvbnN0IHsgaXNBcnJheSB9ID0gQXJyYXk7XG5jb25zdCB7IGFzc2lnbiwgZ2V0UHJvdG90eXBlT2YgfSA9IE9iamVjdDtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVDb3BpZXJPcHRpb25zIHtcbiAgYXJyYXk/OiBJbnRlcm5hbENvcGllcjxhbnlbXT47XG4gIGFycmF5QnVmZmVyPzogSW50ZXJuYWxDb3BpZXI8QXJyYXlCdWZmZXI+O1xuICBibG9iPzogSW50ZXJuYWxDb3BpZXI8QmxvYj47XG4gIGRhdGFWaWV3PzogSW50ZXJuYWxDb3BpZXI8RGF0YVZpZXc+O1xuICBkYXRlPzogSW50ZXJuYWxDb3BpZXI8RGF0ZT47XG4gIGVycm9yPzogSW50ZXJuYWxDb3BpZXI8YW55PjtcbiAgbWFwPzogSW50ZXJuYWxDb3BpZXI8TWFwPGFueSwgYW55Pj47XG4gIG9iamVjdD86IEludGVybmFsQ29waWVyPFJlY29yZDxzdHJpbmcsIGFueT4+O1xuICByZWdFeHA/OiBJbnRlcm5hbENvcGllcjxSZWdFeHA+O1xuICBzZXQ/OiBJbnRlcm5hbENvcGllcjxTZXQ8YW55Pj47XG59XG5cbmNvbnN0IERFRkFVTFRfTE9PU0VfT1BUSU9OUzogUmVxdWlyZWQ8Q3JlYXRlQ29waWVyT3B0aW9ucz4gPSB7XG4gIGFycmF5OiBjb3B5QXJyYXlMb29zZSxcbiAgYXJyYXlCdWZmZXI6IGNvcHlBcnJheUJ1ZmZlcixcbiAgYmxvYjogY29weUJsb2IsXG4gIGRhdGFWaWV3OiBjb3B5RGF0YVZpZXcsXG4gIGRhdGU6IGNvcHlEYXRlLFxuICBlcnJvcjogY29weVNlbGYsXG4gIG1hcDogY29weU1hcExvb3NlLFxuICBvYmplY3Q6IGNvcHlPYmplY3RMb29zZSxcbiAgcmVnRXhwOiBjb3B5UmVnRXhwLFxuICBzZXQ6IGNvcHlTZXRMb29zZSxcbn07XG5jb25zdCBERUZBVUxUX1NUUklDVF9PUFRJT05TOiBSZXF1aXJlZDxDcmVhdGVDb3BpZXJPcHRpb25zPiA9IGFzc2lnbihcbiAge30sXG4gIERFRkFVTFRfTE9PU0VfT1BUSU9OUyxcbiAge1xuICAgIGFycmF5OiBjb3B5QXJyYXlTdHJpY3QsXG4gICAgbWFwOiBjb3B5TWFwU3RyaWN0LFxuICAgIG9iamVjdDogY29weU9iamVjdFN0cmljdCxcbiAgICBzZXQ6IGNvcHlTZXRTdHJpY3QsXG4gIH1cbik7XG5cbi8qKlxuICogR2V0IHRoZSBjb3BpZXJzIHVzZWQgZm9yIGVhY2ggc3BlY2lmaWMgb2JqZWN0IHRhZy5cbiAqL1xuZnVuY3Rpb24gZ2V0VGFnU3BlY2lmaWNDb3BpZXJzKFxuICBvcHRpb25zOiBSZXF1aXJlZDxDcmVhdGVDb3BpZXJPcHRpb25zPlxuKTogUmVjb3JkPHN0cmluZywgSW50ZXJuYWxDb3BpZXI8YW55Pj4ge1xuICByZXR1cm4ge1xuICAgIEFyZ3VtZW50czogb3B0aW9ucy5vYmplY3QsXG4gICAgQXJyYXk6IG9wdGlvbnMuYXJyYXksXG4gICAgQXJyYXlCdWZmZXI6IG9wdGlvbnMuYXJyYXlCdWZmZXIsXG4gICAgQmxvYjogb3B0aW9ucy5ibG9iLFxuICAgIEJvb2xlYW46IGNvcHlQcmltaXRpdmVXcmFwcGVyLFxuICAgIERhdGFWaWV3OiBvcHRpb25zLmRhdGFWaWV3LFxuICAgIERhdGU6IG9wdGlvbnMuZGF0ZSxcbiAgICBFcnJvcjogb3B0aW9ucy5lcnJvcixcbiAgICBGbG9hdDMyQXJyYXk6IG9wdGlvbnMuYXJyYXlCdWZmZXIsXG4gICAgRmxvYXQ2NEFycmF5OiBvcHRpb25zLmFycmF5QnVmZmVyLFxuICAgIEludDhBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgICBJbnQxNkFycmF5OiBvcHRpb25zLmFycmF5QnVmZmVyLFxuICAgIEludDMyQXJyYXk6IG9wdGlvbnMuYXJyYXlCdWZmZXIsXG4gICAgTWFwOiBvcHRpb25zLm1hcCxcbiAgICBOdW1iZXI6IGNvcHlQcmltaXRpdmVXcmFwcGVyLFxuICAgIE9iamVjdDogb3B0aW9ucy5vYmplY3QsXG4gICAgUHJvbWlzZTogY29weVNlbGYsXG4gICAgUmVnRXhwOiBvcHRpb25zLnJlZ0V4cCxcbiAgICBTZXQ6IG9wdGlvbnMuc2V0LFxuICAgIFN0cmluZzogY29weVByaW1pdGl2ZVdyYXBwZXIsXG4gICAgV2Vha01hcDogY29weVNlbGYsXG4gICAgV2Vha1NldDogY29weVNlbGYsXG4gICAgVWludDhBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgICBVaW50OENsYW1wZWRBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgICBVaW50MTZBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgICBVaW50MzJBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgICBVaW50NjRBcnJheTogb3B0aW9ucy5hcnJheUJ1ZmZlcixcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjdXN0b20gY29waWVyIGJhc2VkIG9uIHRoZSBvYmplY3Qtc3BlY2lmaWMgY29weSBtZXRob2RzIHBhc3NlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvcGllcihvcHRpb25zOiBDcmVhdGVDb3BpZXJPcHRpb25zKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRPcHRpb25zID0gYXNzaWduKHt9LCBERUZBVUxUX0xPT1NFX09QVElPTlMsIG9wdGlvbnMpO1xuICBjb25zdCB0YWdTcGVjaWZpY0NvcGllcnMgPSBnZXRUYWdTcGVjaWZpY0NvcGllcnMobm9ybWFsaXplZE9wdGlvbnMpO1xuICBjb25zdCB7IEFycmF5OiBhcnJheSwgT2JqZWN0OiBvYmplY3QgfSA9IHRhZ1NwZWNpZmljQ29waWVycztcblxuICBmdW5jdGlvbiBjb3BpZXIodmFsdWU6IGFueSwgc3RhdGU6IFN0YXRlKTogYW55IHtcbiAgICBzdGF0ZS5wcm90b3R5cGUgPSBzdGF0ZS5Db25zdHJ1Y3RvciA9IHVuZGVmaW5lZDtcblxuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5jYWNoZS5oYXModmFsdWUpKSB7XG4gICAgICByZXR1cm4gc3RhdGUuY2FjaGUuZ2V0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBzdGF0ZS5wcm90b3R5cGUgPSB2YWx1ZS5fX3Byb3RvX18gfHwgZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgIHN0YXRlLkNvbnN0cnVjdG9yID0gc3RhdGUucHJvdG90eXBlICYmIHN0YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcblxuICAgIC8vIHBsYWluIG9iamVjdHNcbiAgICBpZiAoIXN0YXRlLkNvbnN0cnVjdG9yIHx8IHN0YXRlLkNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QodmFsdWUsIHN0YXRlKTtcbiAgICB9XG5cbiAgICAvLyBhcnJheXNcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBhcnJheSh2YWx1ZSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHRhZ1NwZWNpZmljQ29waWVyID0gdGFnU3BlY2lmaWNDb3BpZXJzW2dldFRhZyh2YWx1ZSldO1xuXG4gICAgaWYgKHRhZ1NwZWNpZmljQ29waWVyKSB7XG4gICAgICByZXR1cm4gdGFnU3BlY2lmaWNDb3BpZXIodmFsdWUsIHN0YXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicgPyB2YWx1ZSA6IG9iamVjdCh2YWx1ZSwgc3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvcHk8VmFsdWU+KHZhbHVlOiBWYWx1ZSk6IFZhbHVlIHtcbiAgICByZXR1cm4gY29waWVyKHZhbHVlLCB7XG4gICAgICBDb25zdHJ1Y3RvcjogdW5kZWZpbmVkLFxuICAgICAgY2FjaGU6IGNyZWF0ZUNhY2hlKCksXG4gICAgICBjb3BpZXIsXG4gICAgICBwcm90b3R5cGU6IHVuZGVmaW5lZCxcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjdXN0b20gY29waWVyIGJhc2VkIG9uIHRoZSBvYmplY3Qtc3BlY2lmaWMgY29weSBtZXRob2RzIHBhc3NlZCwgZGVmYXVsdGluZyB0byB0aGVcbiAqIHNhbWUgaW50ZXJuYWxzIGFzIGBjb3B5U3RyaWN0YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmljdENvcGllcihvcHRpb25zOiBDcmVhdGVDb3BpZXJPcHRpb25zKSB7XG4gIHJldHVybiBjcmVhdGVDb3BpZXIoYXNzaWduKHt9LCBERUZBVUxUX1NUUklDVF9PUFRJT05TLCBvcHRpb25zKSk7XG59XG5cbi8qKlxuICogQ29weSBhbiB2YWx1ZSBkZWVwbHkgYXMgbXVjaCBhcyBwb3NzaWJsZSwgd2hlcmUgc3RyaWN0IHJlY3JlYXRpb24gb2Ygb2JqZWN0IHByb3BlcnRpZXNcbiAqIGFyZSBtYWludGFpbmVkLiBBbGwgcHJvcGVydGllcyAoaW5jbHVkaW5nIG5vbi1lbnVtZXJhYmxlIG9uZXMpIGFyZSBjb3BpZWQgd2l0aCB0aGVpclxuICogb3JpZ2luYWwgcHJvcGVydHkgZGVzY3JpcHRvcnMgb24gYm90aCBvYmplY3RzIGFuZCBhcnJheXMuXG4gKi9cbmV4cG9ydCBjb25zdCBjb3B5U3RyaWN0ID0gY3JlYXRlU3RyaWN0Q29waWVyKHt9KTtcblxuLyoqXG4gKiBDb3B5IGFuIHZhbHVlIGRlZXBseSBhcyBtdWNoIGFzIHBvc3NpYmxlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb3BpZXIoe30pO1xuIiwgIlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5saW5lV29ya2VyKHNjcmlwdFRleHQpIHtcbiAgbGV0IGJsb2IgPSBuZXcgQmxvYihbc2NyaXB0VGV4dF0sIHt0eXBlOiAndGV4dC9qYXZhc2NyaXB0J30pO1xuICBsZXQgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgbGV0IHdvcmtlciA9IG5ldyBXb3JrZXIodXJsKTtcbiAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICByZXR1cm4gd29ya2VyO1xufVxuIiwgImltcG9ydCBpbmxpbmVXb3JrZXIgZnJvbSAnX19pbmxpbmUtd29ya2VyJ1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV29ya2VyKCkge1xuICByZXR1cm4gaW5saW5lV29ya2VyKFwidmFyIHluPU9iamVjdC5jcmVhdGU7dmFyIEF0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgUm49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt2YXIgQ249T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7dmFyIEVuPU9iamVjdC5nZXRQcm90b3R5cGVPZixfbj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBiZT0odCxlKT0+KCk9PihlfHx0KChlPXtleHBvcnRzOnt9fSkuZXhwb3J0cyxlKSxlLmV4cG9ydHMpO3ZhciBBbj0odCxlLG4scik9PntpZihlJiZ0eXBlb2YgZT09XFxcIm9iamVjdFxcXCJ8fHR5cGVvZiBlPT1cXFwiZnVuY3Rpb25cXFwiKWZvcihsZXQgaSBvZiBDbihlKSkhX24uY2FsbCh0LGkpJiZpIT09biYmQXQodCxpLHtnZXQ6KCk9PmVbaV0sZW51bWVyYWJsZTohKHI9Um4oZSxpKSl8fHIuZW51bWVyYWJsZX0pO3JldHVybiB0fTt2YXIgVG49KHQsZSxuKT0+KG49dCE9bnVsbD95bihFbih0KSk6e30sQW4oZXx8IXR8fCF0Ll9fZXNNb2R1bGU/QXQobixcXFwiZGVmYXVsdFxcXCIse3ZhbHVlOnQsZW51bWVyYWJsZTohMH0pOm4sdCkpO3ZhciBOdD1iZShUdD0+e1R0LmVudGl0eU1hcD17bHQ6XFxcIjxcXFwiLGd0OlxcXCI+XFxcIixhbXA6XFxcIiZcXFwiLHF1b3Q6J1xcXCInLGFwb3M6XFxcIidcXFwiLEFncmF2ZTpcXFwiXFxcXHhDMFxcXCIsQWFjdXRlOlxcXCJcXFxceEMxXFxcIixBY2lyYzpcXFwiXFxcXHhDMlxcXCIsQXRpbGRlOlxcXCJcXFxceEMzXFxcIixBdW1sOlxcXCJcXFxceEM0XFxcIixBcmluZzpcXFwiXFxcXHhDNVxcXCIsQUVsaWc6XFxcIlxcXFx4QzZcXFwiLENjZWRpbDpcXFwiXFxcXHhDN1xcXCIsRWdyYXZlOlxcXCJcXFxceEM4XFxcIixFYWN1dGU6XFxcIlxcXFx4QzlcXFwiLEVjaXJjOlxcXCJcXFxceENBXFxcIixFdW1sOlxcXCJcXFxceENCXFxcIixJZ3JhdmU6XFxcIlxcXFx4Q0NcXFwiLElhY3V0ZTpcXFwiXFxcXHhDRFxcXCIsSWNpcmM6XFxcIlxcXFx4Q0VcXFwiLEl1bWw6XFxcIlxcXFx4Q0ZcXFwiLEVUSDpcXFwiXFxcXHhEMFxcXCIsTnRpbGRlOlxcXCJcXFxceEQxXFxcIixPZ3JhdmU6XFxcIlxcXFx4RDJcXFwiLE9hY3V0ZTpcXFwiXFxcXHhEM1xcXCIsT2NpcmM6XFxcIlxcXFx4RDRcXFwiLE90aWxkZTpcXFwiXFxcXHhENVxcXCIsT3VtbDpcXFwiXFxcXHhENlxcXCIsT3NsYXNoOlxcXCJcXFxceEQ4XFxcIixVZ3JhdmU6XFxcIlxcXFx4RDlcXFwiLFVhY3V0ZTpcXFwiXFxcXHhEQVxcXCIsVWNpcmM6XFxcIlxcXFx4REJcXFwiLFV1bWw6XFxcIlxcXFx4RENcXFwiLFlhY3V0ZTpcXFwiXFxcXHhERFxcXCIsVEhPUk46XFxcIlxcXFx4REVcXFwiLHN6bGlnOlxcXCJcXFxceERGXFxcIixhZ3JhdmU6XFxcIlxcXFx4RTBcXFwiLGFhY3V0ZTpcXFwiXFxcXHhFMVxcXCIsYWNpcmM6XFxcIlxcXFx4RTJcXFwiLGF0aWxkZTpcXFwiXFxcXHhFM1xcXCIsYXVtbDpcXFwiXFxcXHhFNFxcXCIsYXJpbmc6XFxcIlxcXFx4RTVcXFwiLGFlbGlnOlxcXCJcXFxceEU2XFxcIixjY2VkaWw6XFxcIlxcXFx4RTdcXFwiLGVncmF2ZTpcXFwiXFxcXHhFOFxcXCIsZWFjdXRlOlxcXCJcXFxceEU5XFxcIixlY2lyYzpcXFwiXFxcXHhFQVxcXCIsZXVtbDpcXFwiXFxcXHhFQlxcXCIsaWdyYXZlOlxcXCJcXFxceEVDXFxcIixpYWN1dGU6XFxcIlxcXFx4RURcXFwiLGljaXJjOlxcXCJcXFxceEVFXFxcIixpdW1sOlxcXCJcXFxceEVGXFxcIixldGg6XFxcIlxcXFx4RjBcXFwiLG50aWxkZTpcXFwiXFxcXHhGMVxcXCIsb2dyYXZlOlxcXCJcXFxceEYyXFxcIixvYWN1dGU6XFxcIlxcXFx4RjNcXFwiLG9jaXJjOlxcXCJcXFxceEY0XFxcIixvdGlsZGU6XFxcIlxcXFx4RjVcXFwiLG91bWw6XFxcIlxcXFx4RjZcXFwiLG9zbGFzaDpcXFwiXFxcXHhGOFxcXCIsdWdyYXZlOlxcXCJcXFxceEY5XFxcIix1YWN1dGU6XFxcIlxcXFx4RkFcXFwiLHVjaXJjOlxcXCJcXFxceEZCXFxcIix1dW1sOlxcXCJcXFxceEZDXFxcIix5YWN1dGU6XFxcIlxcXFx4RkRcXFwiLHRob3JuOlxcXCJcXFxceEZFXFxcIix5dW1sOlxcXCJcXFxceEZGXFxcIixuYnNwOlxcXCJcXFxceEEwXFxcIixpZXhjbDpcXFwiXFxcXHhBMVxcXCIsY2VudDpcXFwiXFxcXHhBMlxcXCIscG91bmQ6XFxcIlxcXFx4QTNcXFwiLGN1cnJlbjpcXFwiXFxcXHhBNFxcXCIseWVuOlxcXCJcXFxceEE1XFxcIixicnZiYXI6XFxcIlxcXFx4QTZcXFwiLHNlY3Q6XFxcIlxcXFx4QTdcXFwiLHVtbDpcXFwiXFxcXHhBOFxcXCIsY29weTpcXFwiXFxcXHhBOVxcXCIsb3JkZjpcXFwiXFxcXHhBQVxcXCIsbGFxdW86XFxcIlxcXFx4QUJcXFwiLG5vdDpcXFwiXFxcXHhBQ1xcXCIsc2h5OlxcXCJcXFxceEFEXFxcXHhBRFxcXCIscmVnOlxcXCJcXFxceEFFXFxcIixtYWNyOlxcXCJcXFxceEFGXFxcIixkZWc6XFxcIlxcXFx4QjBcXFwiLHBsdXNtbjpcXFwiXFxcXHhCMVxcXCIsc3VwMjpcXFwiXFxcXHhCMlxcXCIsc3VwMzpcXFwiXFxcXHhCM1xcXCIsYWN1dGU6XFxcIlxcXFx4QjRcXFwiLG1pY3JvOlxcXCJcXFxceEI1XFxcIixwYXJhOlxcXCJcXFxceEI2XFxcIixtaWRkb3Q6XFxcIlxcXFx4QjdcXFwiLGNlZGlsOlxcXCJcXFxceEI4XFxcIixzdXAxOlxcXCJcXFxceEI5XFxcIixvcmRtOlxcXCJcXFxceEJBXFxcIixyYXF1bzpcXFwiXFxcXHhCQlxcXCIsZnJhYzE0OlxcXCJcXFxceEJDXFxcIixmcmFjMTI6XFxcIlxcXFx4QkRcXFwiLGZyYWMzNDpcXFwiXFxcXHhCRVxcXCIsaXF1ZXN0OlxcXCJcXFxceEJGXFxcIix0aW1lczpcXFwiXFxcXHhEN1xcXCIsZGl2aWRlOlxcXCJcXFxceEY3XFxcIixmb3JhbGw6XFxcIlxcXFx1MjIwMFxcXCIscGFydDpcXFwiXFxcXHUyMjAyXFxcIixleGlzdDpcXFwiXFxcXHUyMjAzXFxcIixlbXB0eTpcXFwiXFxcXHUyMjA1XFxcIixuYWJsYTpcXFwiXFxcXHUyMjA3XFxcIixpc2luOlxcXCJcXFxcdTIyMDhcXFwiLG5vdGluOlxcXCJcXFxcdTIyMDlcXFwiLG5pOlxcXCJcXFxcdTIyMEJcXFwiLHByb2Q6XFxcIlxcXFx1MjIwRlxcXCIsc3VtOlxcXCJcXFxcdTIyMTFcXFwiLG1pbnVzOlxcXCJcXFxcdTIyMTJcXFwiLGxvd2FzdDpcXFwiXFxcXHUyMjE3XFxcIixyYWRpYzpcXFwiXFxcXHUyMjFBXFxcIixwcm9wOlxcXCJcXFxcdTIyMURcXFwiLGluZmluOlxcXCJcXFxcdTIyMUVcXFwiLGFuZzpcXFwiXFxcXHUyMjIwXFxcIixhbmQ6XFxcIlxcXFx1MjIyN1xcXCIsb3I6XFxcIlxcXFx1MjIyOFxcXCIsY2FwOlxcXCJcXFxcdTIyMjlcXFwiLGN1cDpcXFwiXFxcXHUyMjJBXFxcIixpbnQ6XFxcIlxcXFx1MjIyQlxcXCIsdGhlcmU0OlxcXCJcXFxcdTIyMzRcXFwiLHNpbTpcXFwiXFxcXHUyMjNDXFxcIixjb25nOlxcXCJcXFxcdTIyNDVcXFwiLGFzeW1wOlxcXCJcXFxcdTIyNDhcXFwiLG5lOlxcXCJcXFxcdTIyNjBcXFwiLGVxdWl2OlxcXCJcXFxcdTIyNjFcXFwiLGxlOlxcXCJcXFxcdTIyNjRcXFwiLGdlOlxcXCJcXFxcdTIyNjVcXFwiLHN1YjpcXFwiXFxcXHUyMjgyXFxcIixzdXA6XFxcIlxcXFx1MjI4M1xcXCIsbnN1YjpcXFwiXFxcXHUyMjg0XFxcIixzdWJlOlxcXCJcXFxcdTIyODZcXFwiLHN1cGU6XFxcIlxcXFx1MjI4N1xcXCIsb3BsdXM6XFxcIlxcXFx1MjI5NVxcXCIsb3RpbWVzOlxcXCJcXFxcdTIyOTdcXFwiLHBlcnA6XFxcIlxcXFx1MjJBNVxcXCIsc2RvdDpcXFwiXFxcXHUyMkM1XFxcIixBbHBoYTpcXFwiXFxcXHUwMzkxXFxcIixCZXRhOlxcXCJcXFxcdTAzOTJcXFwiLEdhbW1hOlxcXCJcXFxcdTAzOTNcXFwiLERlbHRhOlxcXCJcXFxcdTAzOTRcXFwiLEVwc2lsb246XFxcIlxcXFx1MDM5NVxcXCIsWmV0YTpcXFwiXFxcXHUwMzk2XFxcIixFdGE6XFxcIlxcXFx1MDM5N1xcXCIsVGhldGE6XFxcIlxcXFx1MDM5OFxcXCIsSW90YTpcXFwiXFxcXHUwMzk5XFxcIixLYXBwYTpcXFwiXFxcXHUwMzlBXFxcIixMYW1iZGE6XFxcIlxcXFx1MDM5QlxcXCIsTXU6XFxcIlxcXFx1MDM5Q1xcXCIsTnU6XFxcIlxcXFx1MDM5RFxcXCIsWGk6XFxcIlxcXFx1MDM5RVxcXCIsT21pY3JvbjpcXFwiXFxcXHUwMzlGXFxcIixQaTpcXFwiXFxcXHUwM0EwXFxcIixSaG86XFxcIlxcXFx1MDNBMVxcXCIsU2lnbWE6XFxcIlxcXFx1MDNBM1xcXCIsVGF1OlxcXCJcXFxcdTAzQTRcXFwiLFVwc2lsb246XFxcIlxcXFx1MDNBNVxcXCIsUGhpOlxcXCJcXFxcdTAzQTZcXFwiLENoaTpcXFwiXFxcXHUwM0E3XFxcIixQc2k6XFxcIlxcXFx1MDNBOFxcXCIsT21lZ2E6XFxcIlxcXFx1MDNBOVxcXCIsYWxwaGE6XFxcIlxcXFx1MDNCMVxcXCIsYmV0YTpcXFwiXFxcXHUwM0IyXFxcIixnYW1tYTpcXFwiXFxcXHUwM0IzXFxcIixkZWx0YTpcXFwiXFxcXHUwM0I0XFxcIixlcHNpbG9uOlxcXCJcXFxcdTAzQjVcXFwiLHpldGE6XFxcIlxcXFx1MDNCNlxcXCIsZXRhOlxcXCJcXFxcdTAzQjdcXFwiLHRoZXRhOlxcXCJcXFxcdTAzQjhcXFwiLGlvdGE6XFxcIlxcXFx1MDNCOVxcXCIsa2FwcGE6XFxcIlxcXFx1MDNCQVxcXCIsbGFtYmRhOlxcXCJcXFxcdTAzQkJcXFwiLG11OlxcXCJcXFxcdTAzQkNcXFwiLG51OlxcXCJcXFxcdTAzQkRcXFwiLHhpOlxcXCJcXFxcdTAzQkVcXFwiLG9taWNyb246XFxcIlxcXFx1MDNCRlxcXCIscGk6XFxcIlxcXFx1MDNDMFxcXCIscmhvOlxcXCJcXFxcdTAzQzFcXFwiLHNpZ21hZjpcXFwiXFxcXHUwM0MyXFxcIixzaWdtYTpcXFwiXFxcXHUwM0MzXFxcIix0YXU6XFxcIlxcXFx1MDNDNFxcXCIsdXBzaWxvbjpcXFwiXFxcXHUwM0M1XFxcIixwaGk6XFxcIlxcXFx1MDNDNlxcXCIsY2hpOlxcXCJcXFxcdTAzQzdcXFwiLHBzaTpcXFwiXFxcXHUwM0M4XFxcIixvbWVnYTpcXFwiXFxcXHUwM0M5XFxcIix0aGV0YXN5bTpcXFwiXFxcXHUwM0QxXFxcIix1cHNpaDpcXFwiXFxcXHUwM0QyXFxcIixwaXY6XFxcIlxcXFx1MDNENlxcXCIsT0VsaWc6XFxcIlxcXFx1MDE1MlxcXCIsb2VsaWc6XFxcIlxcXFx1MDE1M1xcXCIsU2Nhcm9uOlxcXCJcXFxcdTAxNjBcXFwiLHNjYXJvbjpcXFwiXFxcXHUwMTYxXFxcIixZdW1sOlxcXCJcXFxcdTAxNzhcXFwiLGZub2Y6XFxcIlxcXFx1MDE5MlxcXCIsY2lyYzpcXFwiXFxcXHUwMkM2XFxcIix0aWxkZTpcXFwiXFxcXHUwMkRDXFxcIixlbnNwOlxcXCJcXFxcdTIwMDJcXFwiLGVtc3A6XFxcIlxcXFx1MjAwM1xcXCIsdGhpbnNwOlxcXCJcXFxcdTIwMDlcXFwiLHp3bmo6XFxcIlxcXFx1MjAwQ1xcXCIsendqOlxcXCJcXFxcdTIwMERcXFwiLGxybTpcXFwiXFxcXHUyMDBFXFxcIixybG06XFxcIlxcXFx1MjAwRlxcXCIsbmRhc2g6XFxcIlxcXFx1MjAxM1xcXCIsbWRhc2g6XFxcIlxcXFx1MjAxNFxcXCIsbHNxdW86XFxcIlxcXFx1MjAxOFxcXCIscnNxdW86XFxcIlxcXFx1MjAxOVxcXCIsc2JxdW86XFxcIlxcXFx1MjAxQVxcXCIsbGRxdW86XFxcIlxcXFx1MjAxQ1xcXCIscmRxdW86XFxcIlxcXFx1MjAxRFxcXCIsYmRxdW86XFxcIlxcXFx1MjAxRVxcXCIsZGFnZ2VyOlxcXCJcXFxcdTIwMjBcXFwiLERhZ2dlcjpcXFwiXFxcXHUyMDIxXFxcIixidWxsOlxcXCJcXFxcdTIwMjJcXFwiLGhlbGxpcDpcXFwiXFxcXHUyMDI2XFxcIixwZXJtaWw6XFxcIlxcXFx1MjAzMFxcXCIscHJpbWU6XFxcIlxcXFx1MjAzMlxcXCIsUHJpbWU6XFxcIlxcXFx1MjAzM1xcXCIsbHNhcXVvOlxcXCJcXFxcdTIwMzlcXFwiLHJzYXF1bzpcXFwiXFxcXHUyMDNBXFxcIixvbGluZTpcXFwiXFxcXHUyMDNFXFxcIixldXJvOlxcXCJcXFxcdTIwQUNcXFwiLHRyYWRlOlxcXCJcXFxcdTIxMjJcXFwiLGxhcnI6XFxcIlxcXFx1MjE5MFxcXCIsdWFycjpcXFwiXFxcXHUyMTkxXFxcIixyYXJyOlxcXCJcXFxcdTIxOTJcXFwiLGRhcnI6XFxcIlxcXFx1MjE5M1xcXCIsaGFycjpcXFwiXFxcXHUyMTk0XFxcIixjcmFycjpcXFwiXFxcXHUyMUI1XFxcIixsY2VpbDpcXFwiXFxcXHUyMzA4XFxcIixyY2VpbDpcXFwiXFxcXHUyMzA5XFxcIixsZmxvb3I6XFxcIlxcXFx1MjMwQVxcXCIscmZsb29yOlxcXCJcXFxcdTIzMEJcXFwiLGxvejpcXFwiXFxcXHUyNUNBXFxcIixzcGFkZXM6XFxcIlxcXFx1MjY2MFxcXCIsY2x1YnM6XFxcIlxcXFx1MjY2M1xcXCIsaGVhcnRzOlxcXCJcXFxcdTI2NjVcXFwiLGRpYW1zOlxcXCJcXFxcdTI2NjZcXFwifX0pO3ZhciBJdD1iZShMZT0+e3ZhciBVZT0vW0EtWl9hLXpcXFxceEMwLVxcXFx4RDZcXFxceEQ4LVxcXFx4RjZcXFxcdTAwRjgtXFxcXHUwMkZGXFxcXHUwMzcwLVxcXFx1MDM3RFxcXFx1MDM3Ri1cXFxcdTFGRkZcXFxcdTIwMEMtXFxcXHUyMDBEXFxcXHUyMDcwLVxcXFx1MjE4RlxcXFx1MkMwMC1cXFxcdTJGRUZcXFxcdTMwMDEtXFxcXHVEN0ZGXFxcXHVGOTAwLVxcXFx1RkRDRlxcXFx1RkRGMC1cXFxcdUZGRkRdLyxidD1uZXcgUmVnRXhwKFxcXCJbXFxcXFxcXFwtXFxcXFxcXFwuMC05XFxcIitVZS5zb3VyY2Uuc2xpY2UoMSwtMSkrXFxcIlxcXFxcXFxcdTAwQjdcXFxcXFxcXHUwMzAwLVxcXFxcXFxcdTAzNkZcXFxcXFxcXHUyMDNGLVxcXFxcXFxcdTIwNDBdXFxcIiksd3Q9bmV3IFJlZ0V4cChcXFwiXlxcXCIrVWUuc291cmNlK2J0LnNvdXJjZStcXFwiKig/OjpcXFwiK1VlLnNvdXJjZStidC5zb3VyY2UrXFxcIiopPyRcXFwiKSxoZT0wLHE9MSxuZT0yLGdlPTMscmU9NCxpZT01LGRlPTYsd2U9NztmdW5jdGlvbiBzZSh0LGUpe3RoaXMubWVzc2FnZT10LHRoaXMubG9jYXRvcj1lLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHNlKX1zZS5wcm90b3R5cGU9bmV3IEVycm9yO3NlLnByb3RvdHlwZS5uYW1lPXNlLm5hbWU7ZnVuY3Rpb24geHQoKXt9eHQucHJvdG90eXBlPXtwYXJzZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5kb21CdWlsZGVyO3Iuc3RhcnREb2N1bWVudCgpLE10KGUsZT17fSksTm4odCxlLG4scix0aGlzLmVycm9ySGFuZGxlciksci5lbmREb2N1bWVudCgpfX07ZnVuY3Rpb24gTm4odCxlLG4scixpKXtmdW5jdGlvbiBzKF8pe2lmKF8+NjU1MzUpe18tPTY1NTM2O3ZhciBnPTU1Mjk2KyhfPj4xMCksZWU9NTYzMjArKF8mMTAyMyk7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZyxlZSl9ZWxzZSByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShfKX1mdW5jdGlvbiBvKF8pe3ZhciBnPV8uc2xpY2UoMSwtMSk7cmV0dXJuIGcgaW4gbj9uW2ddOmcuY2hhckF0KDApPT09XFxcIiNcXFwiP3MocGFyc2VJbnQoZy5zdWJzdHIoMSkucmVwbGFjZShcXFwieFxcXCIsXFxcIjB4XFxcIikpKTooaS5lcnJvcihcXFwiZW50aXR5IG5vdCBmb3VuZDpcXFwiK18pLF8pfWZ1bmN0aW9uIGwoXyl7aWYoXz5SKXt2YXIgZz10LnN1YnN0cmluZyhSLF8pLnJlcGxhY2UoLyYjP1xcXFx3KzsvZyxvKTtTJiZ1KFIpLHIuY2hhcmFjdGVycyhnLDAsXy1SKSxSPV99fWZ1bmN0aW9uIHUoXyxnKXtmb3IoO18+PWYmJihnPWguZXhlYyh0KSk7KWE9Zy5pbmRleCxmPWErZ1swXS5sZW5ndGgsUy5saW5lTnVtYmVyKys7Uy5jb2x1bW5OdW1iZXI9Xy1hKzF9Zm9yKHZhciBhPTAsZj0wLGg9Ly4qKD86XFxcXHJcXFxcbj98XFxcXG4pfC4qJC9nLFM9ci5sb2NhdG9yLEU9W3tjdXJyZW50TlNNYXA6ZX1dLHk9e30sUj0wOzspe3RyeXt2YXIgdj10LmluZGV4T2YoXFxcIjxcXFwiLFIpO2lmKHY8MCl7aWYoIXQuc3Vic3RyKFIpLm1hdGNoKC9eXFxcXHMqJC8pKXt2YXIgTT1yLmRvYyxQPU0uY3JlYXRlVGV4dE5vZGUodC5zdWJzdHIoUikpO00uYXBwZW5kQ2hpbGQoUCksci5jdXJyZW50RWxlbWVudD1QfXJldHVybn1zd2l0Y2godj5SJiZsKHYpLHQuY2hhckF0KHYrMSkpe2Nhc2VcXFwiL1xcXCI6dmFyIHc9dC5pbmRleE9mKFxcXCI+XFxcIix2KzMpLGI9dC5zdWJzdHJpbmcodisyLHcpLFQ9RS5wb3AoKTt3PDA/KGI9dC5zdWJzdHJpbmcodisyKS5yZXBsYWNlKC9bXFxcXHM8XS4qLyxcXFwiXFxcIiksaS5lcnJvcihcXFwiZW5kIHRhZyBuYW1lOiBcXFwiK2IrXFxcIiBpcyBub3QgY29tcGxldGU6XFxcIitULnRhZ05hbWUpLHc9disxK2IubGVuZ3RoKTpiLm1hdGNoKC9cXFxcczwvKSYmKGI9Yi5yZXBsYWNlKC9bXFxcXHM8XS4qLyxcXFwiXFxcIiksaS5lcnJvcihcXFwiZW5kIHRhZyBuYW1lOiBcXFwiK2IrXFxcIiBtYXliZSBub3QgY29tcGxldGVcXFwiKSx3PXYrMStiLmxlbmd0aCk7dmFyIFU9VC5sb2NhbE5TTWFwLFc9VC50YWdOYW1lPT1iLGQ9V3x8VC50YWdOYW1lJiZULnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Yi50b0xvd2VyQ2FzZSgpO2lmKGQpe2lmKHIuZW5kRWxlbWVudChULnVyaSxULmxvY2FsTmFtZSxiKSxVKWZvcih2YXIgRyBpbiBVKXIuZW5kUHJlZml4TWFwcGluZyhHKTtXfHxpLmZhdGFsRXJyb3IoXFxcImVuZCB0YWcgbmFtZTogXFxcIitiK1xcXCIgaXMgbm90IG1hdGNoIHRoZSBjdXJyZW50IHN0YXJ0IHRhZ05hbWU6XFxcIitULnRhZ05hbWUpfWVsc2UgRS5wdXNoKFQpO3crKzticmVhaztjYXNlXFxcIj9cXFwiOlMmJnUodiksdz14bih0LHYscik7YnJlYWs7Y2FzZVxcXCIhXFxcIjpTJiZ1KHYpLHc9JG4odCx2LHIsaSk7YnJlYWs7ZGVmYXVsdDpTJiZ1KHYpO3ZhciBBPW5ldyBPdCxMPUVbRS5sZW5ndGgtMV0uY3VycmVudE5TTWFwLHc9Ym4odCx2LEEsTCxvLGkpLGo9QS5sZW5ndGg7aWYoIUEuY2xvc2VkJiZEbih0LHcsQS50YWdOYW1lLHkpJiYoQS5jbG9zZWQ9ITAsbi5uYnNwfHxpLndhcm5pbmcoXFxcInVuY2xvc2VkIHhtbCBhdHRyaWJ1dGVcXFwiKSksUyYmail7Zm9yKHZhciBKPUR0KFMse30pLHo9MDt6PGo7eisrKXt2YXIgVj1BW3pdO3UoVi5vZmZzZXQpLFYubG9jYXRvcj1EdChTLHt9KX1yLmxvY2F0b3I9SiwkdChBLHIsTCkmJkUucHVzaChBKSxyLmxvY2F0b3I9U31lbHNlICR0KEEscixMKSYmRS5wdXNoKEEpO0EudXJpPT09XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcXFwiJiYhQS5jbG9zZWQ/dz13bih0LHcsQS50YWdOYW1lLG8scik6dysrfX1jYXRjaChfKXtpZihfIGluc3RhbmNlb2Ygc2UpdGhyb3cgXztpLmVycm9yKFxcXCJlbGVtZW50IHBhcnNlIGVycm9yOiBcXFwiK18pLHc9LTF9dz5SP1I9dzpsKE1hdGgubWF4KHYsUikrMSl9fWZ1bmN0aW9uIER0KHQsZSl7cmV0dXJuIGUubGluZU51bWJlcj10LmxpbmVOdW1iZXIsZS5jb2x1bW5OdW1iZXI9dC5jb2x1bW5OdW1iZXIsZX1mdW5jdGlvbiBibih0LGUsbixyLGkscyl7ZnVuY3Rpb24gbyhFLHksUil7RSBpbiBuLmF0dHJpYnV0ZU5hbWVzJiZzLmZhdGFsRXJyb3IoXFxcIkF0dHJpYnV0ZSBcXFwiK0UrXFxcIiByZWRlZmluZWRcXFwiKSxuLmFkZFZhbHVlKEUseSxSKX1mb3IodmFyIGwsdSxhPSsrZSxmPWhlOzspe3ZhciBoPXQuY2hhckF0KGEpO3N3aXRjaChoKXtjYXNlXFxcIj1cXFwiOmlmKGY9PT1xKWw9dC5zbGljZShlLGEpLGY9Z2U7ZWxzZSBpZihmPT09bmUpZj1nZTtlbHNlIHRocm93IG5ldyBFcnJvcihcXFwiYXR0cmlidXRlIGVxdWFsIG11c3QgYWZ0ZXIgYXR0ck5hbWVcXFwiKTticmVhaztjYXNlXFxcIidcXFwiOmNhc2UnXFxcIic6aWYoZj09PWdlfHxmPT09cSlpZihmPT09cSYmKHMud2FybmluZygnYXR0cmlidXRlIHZhbHVlIG11c3QgYWZ0ZXIgXFxcIj1cXFwiJyksbD10LnNsaWNlKGUsYSkpLGU9YSsxLGE9dC5pbmRleE9mKGgsZSksYT4wKXU9dC5zbGljZShlLGEpLnJlcGxhY2UoLyYjP1xcXFx3KzsvZyxpKSxvKGwsdSxlLTEpLGY9aWU7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXFxcImF0dHJpYnV0ZSB2YWx1ZSBubyBlbmQgJ1xcXCIraCtcXFwiJyBtYXRjaFxcXCIpO2Vsc2UgaWYoZj09cmUpdT10LnNsaWNlKGUsYSkucmVwbGFjZSgvJiM/XFxcXHcrOy9nLGkpLG8obCx1LGUpLHMud2FybmluZygnYXR0cmlidXRlIFxcXCInK2wrJ1xcXCIgbWlzc2VkIHN0YXJ0IHF1b3QoJytoK1xcXCIpISFcXFwiKSxlPWErMSxmPWllO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCdhdHRyaWJ1dGUgdmFsdWUgbXVzdCBhZnRlciBcXFwiPVxcXCInKTticmVhaztjYXNlXFxcIi9cXFwiOnN3aXRjaChmKXtjYXNlIGhlOm4uc2V0VGFnTmFtZSh0LnNsaWNlKGUsYSkpO2Nhc2UgaWU6Y2FzZSBkZTpjYXNlIHdlOmY9d2Usbi5jbG9zZWQ9ITA7Y2FzZSByZTpjYXNlIHE6Y2FzZSBuZTpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcXFwiYXR0cmlidXRlIGludmFsaWQgY2xvc2UgY2hhcignLycpXFxcIil9YnJlYWs7Y2FzZVxcXCJcXFwiOnJldHVybiBzLmVycm9yKFxcXCJ1bmV4cGVjdGVkIGVuZCBvZiBpbnB1dFxcXCIpLGY9PWhlJiZuLnNldFRhZ05hbWUodC5zbGljZShlLGEpKSxhO2Nhc2VcXFwiPlxcXCI6c3dpdGNoKGYpe2Nhc2UgaGU6bi5zZXRUYWdOYW1lKHQuc2xpY2UoZSxhKSk7Y2FzZSBpZTpjYXNlIGRlOmNhc2Ugd2U6YnJlYWs7Y2FzZSByZTpjYXNlIHE6dT10LnNsaWNlKGUsYSksdS5zbGljZSgtMSk9PT1cXFwiL1xcXCImJihuLmNsb3NlZD0hMCx1PXUuc2xpY2UoMCwtMSkpO2Nhc2UgbmU6Zj09PW5lJiYodT1sKSxmPT1yZT8ocy53YXJuaW5nKCdhdHRyaWJ1dGUgXFxcIicrdSsnXFxcIiBtaXNzZWQgcXVvdChcXFwiKSEnKSxvKGwsdS5yZXBsYWNlKC8mIz9cXFxcdys7L2csaSksZSkpOigocltcXFwiXFxcIl0hPT1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFxcXCJ8fCF1Lm1hdGNoKC9eKD86ZGlzYWJsZWR8Y2hlY2tlZHxzZWxlY3RlZCkkL2kpKSYmcy53YXJuaW5nKCdhdHRyaWJ1dGUgXFxcIicrdSsnXFxcIiBtaXNzZWQgdmFsdWUhISBcXFwiJyt1KydcXFwiIGluc3RlYWQhIScpLG8odSx1LGUpKTticmVhaztjYXNlIGdlOnRocm93IG5ldyBFcnJvcihcXFwiYXR0cmlidXRlIHZhbHVlIG1pc3NlZCEhXFxcIil9cmV0dXJuIGE7Y2FzZVxcXCJcXFxceDgwXFxcIjpoPVxcXCIgXFxcIjtkZWZhdWx0OmlmKGg8PVxcXCIgXFxcIilzd2l0Y2goZil7Y2FzZSBoZTpuLnNldFRhZ05hbWUodC5zbGljZShlLGEpKSxmPWRlO2JyZWFrO2Nhc2UgcTpsPXQuc2xpY2UoZSxhKSxmPW5lO2JyZWFrO2Nhc2UgcmU6dmFyIHU9dC5zbGljZShlLGEpLnJlcGxhY2UoLyYjP1xcXFx3KzsvZyxpKTtzLndhcm5pbmcoJ2F0dHJpYnV0ZSBcXFwiJyt1KydcXFwiIG1pc3NlZCBxdW90KFxcXCIpISEnKSxvKGwsdSxlKTtjYXNlIGllOmY9ZGU7YnJlYWt9ZWxzZSBzd2l0Y2goZil7Y2FzZSBuZTp2YXIgUz1uLnRhZ05hbWU7KHJbXFxcIlxcXCJdIT09XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcXFwifHwhbC5tYXRjaCgvXig/OmRpc2FibGVkfGNoZWNrZWR8c2VsZWN0ZWQpJC9pKSkmJnMud2FybmluZygnYXR0cmlidXRlIFxcXCInK2wrJ1xcXCIgbWlzc2VkIHZhbHVlISEgXFxcIicrbCsnXFxcIiBpbnN0ZWFkMiEhJyksbyhsLGwsZSksZT1hLGY9cTticmVhaztjYXNlIGllOnMud2FybmluZygnYXR0cmlidXRlIHNwYWNlIGlzIHJlcXVpcmVkXFxcIicrbCsnXFxcIiEhJyk7Y2FzZSBkZTpmPXEsZT1hO2JyZWFrO2Nhc2UgZ2U6Zj1yZSxlPWE7YnJlYWs7Y2FzZSB3ZTp0aHJvdyBuZXcgRXJyb3IoXFxcImVsZW1lbnRzIGNsb3NlZCBjaGFyYWN0ZXIgJy8nIGFuZCAnPicgbXVzdCBiZSBjb25uZWN0ZWQgdG9cXFwiKX19YSsrfX1mdW5jdGlvbiAkdCh0LGUsbil7Zm9yKHZhciByPXQudGFnTmFtZSxpPW51bGwsaD10Lmxlbmd0aDtoLS07KXt2YXIgcz10W2hdLG89cy5xTmFtZSxsPXMudmFsdWUsUz1vLmluZGV4T2YoXFxcIjpcXFwiKTtpZihTPjApdmFyIHU9cy5wcmVmaXg9by5zbGljZSgwLFMpLGE9by5zbGljZShTKzEpLGY9dT09PVxcXCJ4bWxuc1xcXCImJmE7ZWxzZSBhPW8sdT1udWxsLGY9bz09PVxcXCJ4bWxuc1xcXCImJlxcXCJcXFwiO3MubG9jYWxOYW1lPWEsZiE9PSExJiYoaT09bnVsbCYmKGk9e30sTXQobixuPXt9KSksbltmXT1pW2ZdPWwscy51cmk9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXFxcIixlLnN0YXJ0UHJlZml4TWFwcGluZyhmLGwpKX1mb3IodmFyIGg9dC5sZW5ndGg7aC0tOyl7cz10W2hdO3ZhciB1PXMucHJlZml4O3UmJih1PT09XFxcInhtbFxcXCImJihzLnVyaT1cXFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXFxcIiksdSE9PVxcXCJ4bWxuc1xcXCImJihzLnVyaT1uW3V8fFxcXCJcXFwiXSkpfXZhciBTPXIuaW5kZXhPZihcXFwiOlxcXCIpO1M+MD8odT10LnByZWZpeD1yLnNsaWNlKDAsUyksYT10LmxvY2FsTmFtZT1yLnNsaWNlKFMrMSkpOih1PW51bGwsYT10LmxvY2FsTmFtZT1yKTt2YXIgRT10LnVyaT1uW3V8fFxcXCJcXFwiXTtpZihlLnN0YXJ0RWxlbWVudChFLGEscix0KSx0LmNsb3NlZCl7aWYoZS5lbmRFbGVtZW50KEUsYSxyKSxpKWZvcih1IGluIGkpZS5lbmRQcmVmaXhNYXBwaW5nKHUpfWVsc2UgcmV0dXJuIHQuY3VycmVudE5TTWFwPW4sdC5sb2NhbE5TTWFwPWksITB9ZnVuY3Rpb24gd24odCxlLG4scixpKXtpZigvXig/OnNjcmlwdHx0ZXh0YXJlYSkkL2kudGVzdChuKSl7dmFyIHM9dC5pbmRleE9mKFxcXCI8L1xcXCIrbitcXFwiPlxcXCIsZSksbz10LnN1YnN0cmluZyhlKzEscyk7aWYoL1smPF0vLnRlc3QobykpcmV0dXJuL15zY3JpcHQkL2kudGVzdChuKT8oaS5jaGFyYWN0ZXJzKG8sMCxvLmxlbmd0aCkscyk6KG89by5yZXBsYWNlKC8mIz9cXFxcdys7L2csciksaS5jaGFyYWN0ZXJzKG8sMCxvLmxlbmd0aCkscyl9cmV0dXJuIGUrMX1mdW5jdGlvbiBEbih0LGUsbixyKXt2YXIgaT1yW25dO3JldHVybiBpPT1udWxsJiYoaT10Lmxhc3RJbmRleE9mKFxcXCI8L1xcXCIrbitcXFwiPlxcXCIpLGk8ZSYmKGk9dC5sYXN0SW5kZXhPZihcXFwiPC9cXFwiK24pKSxyW25dPWkpLGk8ZX1mdW5jdGlvbiBNdCh0LGUpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXX1mdW5jdGlvbiAkbih0LGUsbixyKXt2YXIgaT10LmNoYXJBdChlKzIpO3N3aXRjaChpKXtjYXNlXFxcIi1cXFwiOmlmKHQuY2hhckF0KGUrMyk9PT1cXFwiLVxcXCIpe3ZhciBzPXQuaW5kZXhPZihcXFwiLS0+XFxcIixlKzQpO3JldHVybiBzPmU/KG4uY29tbWVudCh0LGUrNCxzLWUtNCkscyszKTooci5lcnJvcihcXFwiVW5jbG9zZWQgY29tbWVudFxcXCIpLC0xKX1lbHNlIHJldHVybi0xO2RlZmF1bHQ6aWYodC5zdWJzdHIoZSszLDYpPT1cXFwiQ0RBVEFbXFxcIil7dmFyIHM9dC5pbmRleE9mKFxcXCJdXT5cXFwiLGUrOSk7cmV0dXJuIG4uc3RhcnRDREFUQSgpLG4uY2hhcmFjdGVycyh0LGUrOSxzLWUtOSksbi5lbmRDREFUQSgpLHMrM312YXIgbz1Nbih0LGUpLGw9by5sZW5ndGg7aWYobD4xJiYvIWRvY3R5cGUvaS50ZXN0KG9bMF1bMF0pKXt2YXIgdT1vWzFdWzBdLGE9ITEsZj0hMTtsPjMmJigvXnB1YmxpYyQvaS50ZXN0KG9bMl1bMF0pPyhhPW9bM11bMF0sZj1sPjQmJm9bNF1bMF0pOi9ec3lzdGVtJC9pLnRlc3Qob1syXVswXSkmJihmPW9bM11bMF0pKTt2YXIgaD1vW2wtMV07cmV0dXJuIG4uc3RhcnREVEQodSxhLGYpLG4uZW5kRFREKCksaC5pbmRleCtoWzBdLmxlbmd0aH19cmV0dXJuLTF9ZnVuY3Rpb24geG4odCxlLG4pe3ZhciByPXQuaW5kZXhPZihcXFwiPz5cXFwiLGUpO2lmKHIpe3ZhciBpPXQuc3Vic3RyaW5nKGUscikubWF0Y2goL148XFxcXD8oXFxcXFMqKVxcXFxzKihbXFxcXHNcXFxcU10qPylcXFxccyokLyk7aWYoaSl7dmFyIHM9aVswXS5sZW5ndGg7cmV0dXJuIG4ucHJvY2Vzc2luZ0luc3RydWN0aW9uKGlbMV0saVsyXSkscisyfWVsc2UgcmV0dXJuLTF9cmV0dXJuLTF9ZnVuY3Rpb24gT3QoKXt0aGlzLmF0dHJpYnV0ZU5hbWVzPXt9fU90LnByb3RvdHlwZT17c2V0VGFnTmFtZTpmdW5jdGlvbih0KXtpZighd3QudGVzdCh0KSl0aHJvdyBuZXcgRXJyb3IoXFxcImludmFsaWQgdGFnTmFtZTpcXFwiK3QpO3RoaXMudGFnTmFtZT10fSxhZGRWYWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoIXd0LnRlc3QodCkpdGhyb3cgbmV3IEVycm9yKFxcXCJpbnZhbGlkIGF0dHJpYnV0ZTpcXFwiK3QpO3RoaXMuYXR0cmlidXRlTmFtZXNbdF09dGhpcy5sZW5ndGgsdGhpc1t0aGlzLmxlbmd0aCsrXT17cU5hbWU6dCx2YWx1ZTplLG9mZnNldDpufX0sbGVuZ3RoOjAsZ2V0TG9jYWxOYW1lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3RdLmxvY2FsTmFtZX0sZ2V0TG9jYXRvcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t0XS5sb2NhdG9yfSxnZXRRTmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t0XS5xTmFtZX0sZ2V0VVJJOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3RdLnVyaX0sZ2V0VmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbdF0udmFsdWV9fTtmdW5jdGlvbiBNbih0LGUpe3ZhciBuLHI9W10saT0vJ1teJ10rJ3xcXFwiW15cXFwiXStcXFwifFteXFxcXHM8PlxcXFwvPV0rPT98KFxcXFwvP1xcXFxzKj58PCkvZztmb3IoaS5sYXN0SW5kZXg9ZSxpLmV4ZWModCk7bj1pLmV4ZWModCk7KWlmKHIucHVzaChuKSxuWzFdKXJldHVybiByfUxlLlhNTFJlYWRlcj14dDtMZS5QYXJzZUVycm9yPXNlfSk7dmFyIFhlPWJlKENlPT57ZnVuY3Rpb24gdmUodCxlKXtmb3IodmFyIG4gaW4gdCllW25dPXRbbl19ZnVuY3Rpb24gayh0LGUpe3ZhciBuPXQucHJvdG90eXBlO2lmKCEobiBpbnN0YW5jZW9mIGUpKXtsZXQgaT1mdW5jdGlvbigpe307dmFyIHI9aTtpLnByb3RvdHlwZT1lLnByb3RvdHlwZSxpPW5ldyBpLHZlKG4saSksdC5wcm90b3R5cGU9bj1pfW4uY29uc3RydWN0b3IhPXQmJih0eXBlb2YgdCE9XFxcImZ1bmN0aW9uXFxcIiYmY29uc29sZS5lcnJvcihcXFwidW5rbm93IENsYXNzOlxcXCIrdCksbi5jb25zdHJ1Y3Rvcj10KX12YXIgT249XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcXFwiLEY9e30sQj1GLkVMRU1FTlRfTk9ERT0xLG9lPUYuQVRUUklCVVRFX05PREU9MixEZT1GLlRFWFRfTk9ERT0zLFd0PUYuQ0RBVEFfU0VDVElPTl9OT0RFPTQsR3Q9Ri5FTlRJVFlfUkVGRVJFTkNFX05PREU9NSxJbj1GLkVOVElUWV9OT0RFPTYsanQ9Ri5QUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREU9NyxCdD1GLkNPTU1FTlRfTk9ERT04LFZ0PUYuRE9DVU1FTlRfTk9ERT05LHp0PUYuRE9DVU1FTlRfVFlQRV9OT0RFPTEwLEg9Ri5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFPTExLFBuPUYuTk9UQVRJT05fTk9ERT0xMixPPXt9LCQ9e30sU2E9Ty5JTkRFWF9TSVpFX0VSUj0oJFsxXT1cXFwiSW5kZXggc2l6ZSBlcnJvclxcXCIsMSksdmE9Ty5ET01TVFJJTkdfU0laRV9FUlI9KCRbMl09XFxcIkRPTVN0cmluZyBzaXplIGVycm9yXFxcIiwyKSxrbj1PLkhJRVJBUkNIWV9SRVFVRVNUX0VSUj0oJFszXT1cXFwiSGllcmFyY2h5IHJlcXVlc3QgZXJyb3JcXFwiLDMpLHlhPU8uV1JPTkdfRE9DVU1FTlRfRVJSPSgkWzRdPVxcXCJXcm9uZyBkb2N1bWVudFxcXCIsNCksUmE9Ty5JTlZBTElEX0NIQVJBQ1RFUl9FUlI9KCRbNV09XFxcIkludmFsaWQgY2hhcmFjdGVyXFxcIiw1KSxDYT1PLk5PX0RBVEFfQUxMT1dFRF9FUlI9KCRbNl09XFxcIk5vIGRhdGEgYWxsb3dlZFxcXCIsNiksRWE9Ty5OT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlI9KCRbN109XFxcIk5vIG1vZGlmaWNhdGlvbiBhbGxvd2VkXFxcIiw3KSxGbj1PLk5PVF9GT1VORF9FUlI9KCRbOF09XFxcIk5vdCBmb3VuZFxcXCIsOCksX2E9Ty5OT1RfU1VQUE9SVEVEX0VSUj0oJFs5XT1cXFwiTm90IHN1cHBvcnRlZFxcXCIsOSksUHQ9Ty5JTlVTRV9BVFRSSUJVVEVfRVJSPSgkWzEwXT1cXFwiQXR0cmlidXRlIGluIHVzZVxcXCIsMTApLEFhPU8uSU5WQUxJRF9TVEFURV9FUlI9KCRbMTFdPVxcXCJJbnZhbGlkIHN0YXRlXFxcIiwxMSksVGE9Ty5TWU5UQVhfRVJSPSgkWzEyXT1cXFwiU3ludGF4IGVycm9yXFxcIiwxMiksTmE9Ty5JTlZBTElEX01PRElGSUNBVElPTl9FUlI9KCRbMTNdPVxcXCJJbnZhbGlkIG1vZGlmaWNhdGlvblxcXCIsMTMpLGJhPU8uTkFNRVNQQUNFX0VSUj0oJFsxNF09XFxcIkludmFsaWQgbmFtZXNwYWNlXFxcIiwxNCksd2E9Ty5JTlZBTElEX0FDQ0VTU19FUlI9KCRbMTVdPVxcXCJJbnZhbGlkIGFjY2Vzc1xcXCIsMTUpO2Z1bmN0aW9uIHRlKHQsZSl7aWYoZSBpbnN0YW5jZW9mIEVycm9yKXZhciBuPWU7ZWxzZSBuPXRoaXMsRXJyb3IuY2FsbCh0aGlzLCRbdF0pLHRoaXMubWVzc2FnZT0kW3RdLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRlKTtyZXR1cm4gbi5jb2RlPXQsZSYmKHRoaXMubWVzc2FnZT10aGlzLm1lc3NhZ2UrXFxcIjogXFxcIitlKSxufXRlLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7dmUoTyx0ZSk7ZnVuY3Rpb24gWigpe31aLnByb3RvdHlwZT17bGVuZ3RoOjAsaXRlbTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t0XXx8bnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10scj0wO3I8dGhpcy5sZW5ndGg7cisrKWFlKHRoaXNbcl0sbix0LGUpO3JldHVybiBuLmpvaW4oXFxcIlxcXCIpfX07ZnVuY3Rpb24gY2UodCxlKXt0aGlzLl9ub2RlPXQsdGhpcy5fcmVmcmVzaD1lLEdlKHRoaXMpfWZ1bmN0aW9uIEdlKHQpe3ZhciBlPXQuX25vZGUuX2luY3x8dC5fbm9kZS5vd25lckRvY3VtZW50Ll9pbmM7aWYodC5faW5jIT1lKXt2YXIgbj10Ll9yZWZyZXNoKHQuX25vZGUpO25uKHQsXFxcImxlbmd0aFxcXCIsbi5sZW5ndGgpLHZlKG4sdCksdC5faW5jPWV9fWNlLnByb3RvdHlwZS5pdGVtPWZ1bmN0aW9uKHQpe3JldHVybiBHZSh0aGlzKSx0aGlzW3RdfTtrKGNlLFopO2Z1bmN0aW9uICRlKCl7fWZ1bmN0aW9uIEh0KHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoO24tLTspaWYodFtuXT09PWUpcmV0dXJuIG59ZnVuY3Rpb24ga3QodCxlLG4scil7aWYocj9lW0h0KGUscildPW46ZVtlLmxlbmd0aCsrXT1uLHQpe24ub3duZXJFbGVtZW50PXQ7dmFyIGk9dC5vd25lckRvY3VtZW50O2kmJihyJiZZdChpLHQsciksVW4oaSx0LG4pKX19ZnVuY3Rpb24gRnQodCxlLG4pe3ZhciByPUh0KGUsbik7aWYocj49MCl7Zm9yKHZhciBpPWUubGVuZ3RoLTE7cjxpOyllW3JdPWVbKytyXTtpZihlLmxlbmd0aD1pLHQpe3ZhciBzPXQub3duZXJEb2N1bWVudDtzJiYoWXQocyx0LG4pLG4ub3duZXJFbGVtZW50PW51bGwpfX1lbHNlIHRocm93IHRlKEZuLG5ldyBFcnJvcih0LnRhZ05hbWUrXFxcIkBcXFwiK24pKX0kZS5wcm90b3R5cGU9e2xlbmd0aDowLGl0ZW06Wi5wcm90b3R5cGUuaXRlbSxnZXROYW1lZEl0ZW06ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMubGVuZ3RoO2UtLTspe3ZhciBuPXRoaXNbZV07aWYobi5ub2RlTmFtZT09dClyZXR1cm4gbn19LHNldE5hbWVkSXRlbTpmdW5jdGlvbih0KXt2YXIgZT10Lm93bmVyRWxlbWVudDtpZihlJiZlIT10aGlzLl9vd25lckVsZW1lbnQpdGhyb3cgbmV3IHRlKFB0KTt2YXIgbj10aGlzLmdldE5hbWVkSXRlbSh0Lm5vZGVOYW1lKTtyZXR1cm4ga3QodGhpcy5fb3duZXJFbGVtZW50LHRoaXMsdCxuKSxufSxzZXROYW1lZEl0ZW1OUzpmdW5jdGlvbih0KXt2YXIgZT10Lm93bmVyRWxlbWVudCxuO2lmKGUmJmUhPXRoaXMuX293bmVyRWxlbWVudCl0aHJvdyBuZXcgdGUoUHQpO3JldHVybiBuPXRoaXMuZ2V0TmFtZWRJdGVtTlModC5uYW1lc3BhY2VVUkksdC5sb2NhbE5hbWUpLGt0KHRoaXMuX293bmVyRWxlbWVudCx0aGlzLHQsbiksbn0scmVtb3ZlTmFtZWRJdGVtOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0TmFtZWRJdGVtKHQpO3JldHVybiBGdCh0aGlzLl9vd25lckVsZW1lbnQsdGhpcyxlKSxlfSxyZW1vdmVOYW1lZEl0ZW1OUzpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0TmFtZWRJdGVtTlModCxlKTtyZXR1cm4gRnQodGhpcy5fb3duZXJFbGVtZW50LHRoaXMsbiksbn0sZ2V0TmFtZWRJdGVtTlM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5sZW5ndGg7bi0tOyl7dmFyIHI9dGhpc1tuXTtpZihyLmxvY2FsTmFtZT09ZSYmci5uYW1lc3BhY2VVUkk9PXQpcmV0dXJuIHJ9cmV0dXJuIG51bGx9fTtmdW5jdGlvbiBLdCh0KXtpZih0aGlzLl9mZWF0dXJlcz17fSx0KWZvcih2YXIgZSBpbiB0KXRoaXMuX2ZlYXR1cmVzPXRbZV19S3QucHJvdG90eXBlPXtoYXNGZWF0dXJlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fZmVhdHVyZXNbdC50b0xvd2VyQ2FzZSgpXTtyZXR1cm4hIShuJiYoIWV8fGUgaW4gbikpfSxjcmVhdGVEb2N1bWVudDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bmV3IHllO2lmKHIuaW1wbGVtZW50YXRpb249dGhpcyxyLmNoaWxkTm9kZXM9bmV3IFosci5kb2N0eXBlPW4sbiYmci5hcHBlbmRDaGlsZChuKSxlKXt2YXIgaT1yLmNyZWF0ZUVsZW1lbnROUyh0LGUpO3IuYXBwZW5kQ2hpbGQoaSl9cmV0dXJuIHJ9LGNyZWF0ZURvY3VtZW50VHlwZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bmV3IEhlO3JldHVybiByLm5hbWU9dCxyLm5vZGVOYW1lPXQsci5wdWJsaWNJZD1lLHIuc3lzdGVtSWQ9bixyfX07ZnVuY3Rpb24gSSgpe31JLnByb3RvdHlwZT17Zmlyc3RDaGlsZDpudWxsLGxhc3RDaGlsZDpudWxsLHByZXZpb3VzU2libGluZzpudWxsLG5leHRTaWJsaW5nOm51bGwsYXR0cmlidXRlczpudWxsLHBhcmVudE5vZGU6bnVsbCxjaGlsZE5vZGVzOm51bGwsb3duZXJEb2N1bWVudDpudWxsLG5vZGVWYWx1ZTpudWxsLG5hbWVzcGFjZVVSSTpudWxsLHByZWZpeDpudWxsLGxvY2FsTmFtZTpudWxsLGluc2VydEJlZm9yZTpmdW5jdGlvbih0LGUpe3JldHVybiBxdCh0aGlzLHQsZSl9LHJlcGxhY2VDaGlsZDpmdW5jdGlvbih0LGUpe3RoaXMuaW5zZXJ0QmVmb3JlKHQsZSksZSYmdGhpcy5yZW1vdmVDaGlsZChlKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24odCl7cmV0dXJuIFh0KHRoaXMsdCl9LGFwcGVuZENoaWxkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZSh0LG51bGwpfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlyc3RDaGlsZCE9bnVsbH0sY2xvbmVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBXZSh0aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsdGhpcyx0KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZmlyc3RDaGlsZDt0Oyl7dmFyIGU9dC5uZXh0U2libGluZztlJiZlLm5vZGVUeXBlPT1EZSYmdC5ub2RlVHlwZT09RGU/KHRoaXMucmVtb3ZlQ2hpbGQoZSksdC5hcHBlbmREYXRhKGUuZGF0YSkpOih0Lm5vcm1hbGl6ZSgpLHQ9ZSl9fSxpc1N1cHBvcnRlZDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSh0LGUpfSxoYXNBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlcy5sZW5ndGg+MH0sbG9va3VwUHJlZml4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzO2U7KXt2YXIgbj1lLl9uc01hcDtpZihuKXtmb3IodmFyIHIgaW4gbilpZihuW3JdPT10KXJldHVybiByfWU9ZS5ub2RlVHlwZT09b2U/ZS5vd25lckRvY3VtZW50OmUucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sbG9va3VwTmFtZXNwYWNlVVJJOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzO2U7KXt2YXIgbj1lLl9uc01hcDtpZihuJiZ0IGluIG4pcmV0dXJuIG5bdF07ZT1lLm5vZGVUeXBlPT1vZT9lLm93bmVyRG9jdW1lbnQ6ZS5wYXJlbnROb2RlfXJldHVybiBudWxsfSxpc0RlZmF1bHROYW1lc3BhY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sb29rdXBQcmVmaXgodCk7cmV0dXJuIGU9PW51bGx9fTtmdW5jdGlvbiBVdCh0KXtyZXR1cm4gdD09XFxcIjxcXFwiJiZcXFwiJmx0O1xcXCJ8fHQ9PVxcXCI+XFxcIiYmXFxcIiZndDtcXFwifHx0PT1cXFwiJlxcXCImJlxcXCImYW1wO1xcXCJ8fHQ9PSdcXFwiJyYmXFxcIiZxdW90O1xcXCJ8fFxcXCImI1xcXCIrdC5jaGFyQ29kZUF0KCkrXFxcIjtcXFwifXZlKEYsSSk7dmUoRixJLnByb3RvdHlwZSk7ZnVuY3Rpb24gU2UodCxlKXtpZihlKHQpKXJldHVybiEwO2lmKHQ9dC5maXJzdENoaWxkKWRvIGlmKFNlKHQsZSkpcmV0dXJuITA7d2hpbGUodD10Lm5leHRTaWJsaW5nKX1mdW5jdGlvbiB5ZSgpe31mdW5jdGlvbiBVbih0LGUsbil7dCYmdC5faW5jKys7dmFyIHI9bi5uYW1lc3BhY2VVUkk7cj09XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXFxcIiYmKGUuX25zTWFwW24ucHJlZml4P24ubG9jYWxOYW1lOlxcXCJcXFwiXT1uLnZhbHVlKX1mdW5jdGlvbiBZdCh0LGUsbixyKXt0JiZ0Ll9pbmMrKzt2YXIgaT1uLm5hbWVzcGFjZVVSSTtpPT1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cXFwiJiZkZWxldGUgZS5fbnNNYXBbbi5wcmVmaXg/bi5sb2NhbE5hbWU6XFxcIlxcXCJdfWZ1bmN0aW9uIGplKHQsZSxuKXtpZih0JiZ0Ll9pbmMpe3QuX2luYysrO3ZhciByPWUuY2hpbGROb2RlcztpZihuKXJbci5sZW5ndGgrK109bjtlbHNle2Zvcih2YXIgaT1lLmZpcnN0Q2hpbGQscz0wO2k7KXJbcysrXT1pLGk9aS5uZXh0U2libGluZztyLmxlbmd0aD1zfX19ZnVuY3Rpb24gWHQodCxlKXt2YXIgbj1lLnByZXZpb3VzU2libGluZyxyPWUubmV4dFNpYmxpbmc7cmV0dXJuIG4/bi5uZXh0U2libGluZz1yOnQuZmlyc3RDaGlsZD1yLHI/ci5wcmV2aW91c1NpYmxpbmc9bjp0Lmxhc3RDaGlsZD1uLGplKHQub3duZXJEb2N1bWVudCx0KSxlfWZ1bmN0aW9uIHF0KHQsZSxuKXt2YXIgcj1lLnBhcmVudE5vZGU7aWYociYmci5yZW1vdmVDaGlsZChlKSxlLm5vZGVUeXBlPT09SCl7dmFyIGk9ZS5maXJzdENoaWxkO2lmKGk9PW51bGwpcmV0dXJuIGU7dmFyIHM9ZS5sYXN0Q2hpbGR9ZWxzZSBpPXM9ZTt2YXIgbz1uP24ucHJldmlvdXNTaWJsaW5nOnQubGFzdENoaWxkO2kucHJldmlvdXNTaWJsaW5nPW8scy5uZXh0U2libGluZz1uLG8/by5uZXh0U2libGluZz1pOnQuZmlyc3RDaGlsZD1pLG49PW51bGw/dC5sYXN0Q2hpbGQ9czpuLnByZXZpb3VzU2libGluZz1zO2RvIGkucGFyZW50Tm9kZT10O3doaWxlKGkhPT1zJiYoaT1pLm5leHRTaWJsaW5nKSk7cmV0dXJuIGplKHQub3duZXJEb2N1bWVudHx8dCx0KSxlLm5vZGVUeXBlPT1IJiYoZS5maXJzdENoaWxkPWUubGFzdENoaWxkPW51bGwpLGV9ZnVuY3Rpb24gTG4odCxlKXt2YXIgbj1lLnBhcmVudE5vZGU7aWYobil7dmFyIHI9dC5sYXN0Q2hpbGQ7bi5yZW1vdmVDaGlsZChlKTt2YXIgcj10Lmxhc3RDaGlsZH12YXIgcj10Lmxhc3RDaGlsZDtyZXR1cm4gZS5wYXJlbnROb2RlPXQsZS5wcmV2aW91c1NpYmxpbmc9cixlLm5leHRTaWJsaW5nPW51bGwscj9yLm5leHRTaWJsaW5nPWU6dC5maXJzdENoaWxkPWUsdC5sYXN0Q2hpbGQ9ZSxqZSh0Lm93bmVyRG9jdW1lbnQsdCxlKSxlfXllLnByb3RvdHlwZT17bm9kZU5hbWU6XFxcIiNkb2N1bWVudFxcXCIsbm9kZVR5cGU6VnQsZG9jdHlwZTpudWxsLGRvY3VtZW50RWxlbWVudDpudWxsLF9pbmM6MSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24odCxlKXtpZih0Lm5vZGVUeXBlPT1IKXtmb3IodmFyIG49dC5maXJzdENoaWxkO247KXt2YXIgcj1uLm5leHRTaWJsaW5nO3RoaXMuaW5zZXJ0QmVmb3JlKG4sZSksbj1yfXJldHVybiB0fXJldHVybiB0aGlzLmRvY3VtZW50RWxlbWVudD09bnVsbCYmdC5ub2RlVHlwZT09QiYmKHRoaXMuZG9jdW1lbnRFbGVtZW50PXQpLHF0KHRoaXMsdCxlKSx0Lm93bmVyRG9jdW1lbnQ9dGhpcyx0fSxyZW1vdmVDaGlsZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb2N1bWVudEVsZW1lbnQ9PXQmJih0aGlzLmRvY3VtZW50RWxlbWVudD1udWxsKSxYdCh0aGlzLHQpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRuKHRoaXMsdCxlKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtyZXR1cm4gU2UodGhpcy5kb2N1bWVudEVsZW1lbnQsZnVuY3Rpb24obil7aWYobi5ub2RlVHlwZT09QiYmbi5nZXRBdHRyaWJ1dGUoXFxcImlkXFxcIik9PXQpcmV0dXJuIGU9biwhMH0pLGV9LGdldEVsZW1lbnRzQnlDbGFzc05hbWU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJlZ0V4cChcXFwiKF58XFxcXFxcXFxzKVxcXCIrdCtcXFwiKFxcXFxcXFxcc3wkKVxcXCIpO3JldHVybiBuZXcgY2UodGhpcyxmdW5jdGlvbihuKXt2YXIgcj1bXTtyZXR1cm4gU2Uobi5kb2N1bWVudEVsZW1lbnQsZnVuY3Rpb24oaSl7aSE9PW4mJmkubm9kZVR5cGU9PUImJmUudGVzdChpLmdldEF0dHJpYnV0ZShcXFwiY2xhc3NcXFwiKSkmJnIucHVzaChpKX0pLHJ9KX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbGU7ZS5vd25lckRvY3VtZW50PXRoaXMsZS5ub2RlTmFtZT10LGUudGFnTmFtZT10LGUuY2hpbGROb2Rlcz1uZXcgWjt2YXIgbj1lLmF0dHJpYnV0ZXM9bmV3ICRlO3JldHVybiBuLl9vd25lckVsZW1lbnQ9ZSxlfSxjcmVhdGVEb2N1bWVudEZyYWdtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IE1lO3JldHVybiB0Lm93bmVyRG9jdW1lbnQ9dGhpcyx0LmNoaWxkTm9kZXM9bmV3IFosdH0sY3JlYXRlVGV4dE5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEJlO3JldHVybiBlLm93bmVyRG9jdW1lbnQ9dGhpcyxlLmFwcGVuZERhdGEodCksZX0sY3JlYXRlQ29tbWVudDpmdW5jdGlvbih0KXt2YXIgZT1uZXcgVmU7cmV0dXJuIGUub3duZXJEb2N1bWVudD10aGlzLGUuYXBwZW5kRGF0YSh0KSxlfSxjcmVhdGVDREFUQVNlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHplO3JldHVybiBlLm93bmVyRG9jdW1lbnQ9dGhpcyxlLmFwcGVuZERhdGEodCksZX0sY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IFllO3JldHVybiBuLm93bmVyRG9jdW1lbnQ9dGhpcyxuLnRhZ05hbWU9bi50YXJnZXQ9dCxuLm5vZGVWYWx1ZT1uLmRhdGE9ZSxufSxjcmVhdGVBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHhlO3JldHVybiBlLm93bmVyRG9jdW1lbnQ9dGhpcyxlLm5hbWU9dCxlLm5vZGVOYW1lPXQsZS5sb2NhbE5hbWU9dCxlLnNwZWNpZmllZD0hMCxlfSxjcmVhdGVFbnRpdHlSZWZlcmVuY2U6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEtlO3JldHVybiBlLm93bmVyRG9jdW1lbnQ9dGhpcyxlLm5vZGVOYW1lPXQsZX0sY3JlYXRlRWxlbWVudE5TOmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IGxlLHI9ZS5zcGxpdChcXFwiOlxcXCIpLGk9bi5hdHRyaWJ1dGVzPW5ldyAkZTtyZXR1cm4gbi5jaGlsZE5vZGVzPW5ldyBaLG4ub3duZXJEb2N1bWVudD10aGlzLG4ubm9kZU5hbWU9ZSxuLnRhZ05hbWU9ZSxuLm5hbWVzcGFjZVVSST10LHIubGVuZ3RoPT0yPyhuLnByZWZpeD1yWzBdLG4ubG9jYWxOYW1lPXJbMV0pOm4ubG9jYWxOYW1lPWUsaS5fb3duZXJFbGVtZW50PW4sbn0sY3JlYXRlQXR0cmlidXRlTlM6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgeGUscj1lLnNwbGl0KFxcXCI6XFxcIik7cmV0dXJuIG4ub3duZXJEb2N1bWVudD10aGlzLG4ubm9kZU5hbWU9ZSxuLm5hbWU9ZSxuLm5hbWVzcGFjZVVSST10LG4uc3BlY2lmaWVkPSEwLHIubGVuZ3RoPT0yPyhuLnByZWZpeD1yWzBdLG4ubG9jYWxOYW1lPXJbMV0pOm4ubG9jYWxOYW1lPWUsbn19O2soeWUsSSk7ZnVuY3Rpb24gbGUoKXt0aGlzLl9uc01hcD17fX1sZS5wcm90b3R5cGU9e25vZGVUeXBlOkIsaGFzQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZU5vZGUodCkhPW51bGx9LGdldEF0dHJpYnV0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZU5vZGUodCk7cmV0dXJuIGUmJmUudmFsdWV8fFxcXCJcXFwifSxnZXRBdHRyaWJ1dGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKHQpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKHQpO24udmFsdWU9bi5ub2RlVmFsdWU9XFxcIlxcXCIrZSx0aGlzLnNldEF0dHJpYnV0ZU5vZGUobil9LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZU5vZGUodCk7ZSYmdGhpcy5yZW1vdmVBdHRyaWJ1dGVOb2RlKGUpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlVHlwZT09PUg/dGhpcy5pbnNlcnRCZWZvcmUodCxudWxsKTpMbih0aGlzLHQpfSxzZXRBdHRyaWJ1dGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXMuc2V0TmFtZWRJdGVtKHQpfSxzZXRBdHRyaWJ1dGVOb2RlTlM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW1OUyh0KX0scmVtb3ZlQXR0cmlidXRlTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLnJlbW92ZU5hbWVkSXRlbSh0Lm5vZGVOYW1lKX0scmVtb3ZlQXR0cmlidXRlTlM6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldEF0dHJpYnV0ZU5vZGVOUyh0LGUpO24mJnRoaXMucmVtb3ZlQXR0cmlidXRlTm9kZShuKX0saGFzQXR0cmlidXRlTlM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVOb2RlTlModCxlKSE9bnVsbH0sZ2V0QXR0cmlidXRlTlM6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldEF0dHJpYnV0ZU5vZGVOUyh0LGUpO3JldHVybiBuJiZuLnZhbHVlfHxcXFwiXFxcIn0sc2V0QXR0cmlidXRlTlM6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGVOUyh0LGUpO3IudmFsdWU9ci5ub2RlVmFsdWU9XFxcIlxcXCIrbix0aGlzLnNldEF0dHJpYnV0ZU5vZGUocil9LGdldEF0dHJpYnV0ZU5vZGVOUzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtTlModCxlKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBjZSh0aGlzLGZ1bmN0aW9uKGUpe3ZhciBuPVtdO3JldHVybiBTZShlLGZ1bmN0aW9uKHIpe3IhPT1lJiZyLm5vZGVUeXBlPT1CJiYodD09PVxcXCIqXFxcInx8ci50YWdOYW1lPT10KSYmbi5wdXNoKHIpfSksbn0pfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBjZSh0aGlzLGZ1bmN0aW9uKG4pe3ZhciByPVtdO3JldHVybiBTZShuLGZ1bmN0aW9uKGkpe2khPT1uJiZpLm5vZGVUeXBlPT09QiYmKHQ9PT1cXFwiKlxcXCJ8fGkubmFtZXNwYWNlVVJJPT09dCkmJihlPT09XFxcIipcXFwifHxpLmxvY2FsTmFtZT09ZSkmJnIucHVzaChpKX0pLHJ9KX19O3llLnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnTmFtZT1sZS5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU7eWUucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lTlM9bGUucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lTlM7ayhsZSxJKTtmdW5jdGlvbiB4ZSgpe314ZS5wcm90b3R5cGUubm9kZVR5cGU9b2U7ayh4ZSxJKTtmdW5jdGlvbiBSZSgpe31SZS5wcm90b3R5cGU9e2RhdGE6XFxcIlxcXCIsc3Vic3RyaW5nRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRhdGEuc3Vic3RyaW5nKHQsdCtlKX0sYXBwZW5kRGF0YTpmdW5jdGlvbih0KXt0PXRoaXMuZGF0YSt0LHRoaXMubm9kZVZhbHVlPXRoaXMuZGF0YT10LHRoaXMubGVuZ3RoPXQubGVuZ3RofSxpbnNlcnREYXRhOmZ1bmN0aW9uKHQsZSl7dGhpcy5yZXBsYWNlRGF0YSh0LDAsZSl9LGFwcGVuZENoaWxkOmZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcigkW2tuXSl9LGRlbGV0ZURhdGE6ZnVuY3Rpb24odCxlKXt0aGlzLnJlcGxhY2VEYXRhKHQsZSxcXFwiXFxcIil9LHJlcGxhY2VEYXRhOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmRhdGEuc3Vic3RyaW5nKDAsdCksaT10aGlzLmRhdGEuc3Vic3RyaW5nKHQrZSk7bj1yK24raSx0aGlzLm5vZGVWYWx1ZT10aGlzLmRhdGE9bix0aGlzLmxlbmd0aD1uLmxlbmd0aH19O2soUmUsSSk7ZnVuY3Rpb24gQmUoKXt9QmUucHJvdG90eXBlPXtub2RlTmFtZTpcXFwiI3RleHRcXFwiLG5vZGVUeXBlOkRlLHNwbGl0VGV4dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGEsbj1lLnN1YnN0cmluZyh0KTtlPWUuc3Vic3RyaW5nKDAsdCksdGhpcy5kYXRhPXRoaXMubm9kZVZhbHVlPWUsdGhpcy5sZW5ndGg9ZS5sZW5ndGg7dmFyIHI9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4pO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocix0aGlzLm5leHRTaWJsaW5nKSxyfX07ayhCZSxSZSk7ZnVuY3Rpb24gVmUoKXt9VmUucHJvdG90eXBlPXtub2RlTmFtZTpcXFwiI2NvbW1lbnRcXFwiLG5vZGVUeXBlOkJ0fTtrKFZlLFJlKTtmdW5jdGlvbiB6ZSgpe316ZS5wcm90b3R5cGU9e25vZGVOYW1lOlxcXCIjY2RhdGEtc2VjdGlvblxcXCIsbm9kZVR5cGU6V3R9O2soemUsUmUpO2Z1bmN0aW9uIEhlKCl7fUhlLnByb3RvdHlwZS5ub2RlVHlwZT16dDtrKEhlLEkpO2Z1bmN0aW9uIFp0KCl7fVp0LnByb3RvdHlwZS5ub2RlVHlwZT1QbjtrKFp0LEkpO2Z1bmN0aW9uIFF0KCl7fVF0LnByb3RvdHlwZS5ub2RlVHlwZT1JbjtrKFF0LEkpO2Z1bmN0aW9uIEtlKCl7fUtlLnByb3RvdHlwZS5ub2RlVHlwZT1HdDtrKEtlLEkpO2Z1bmN0aW9uIE1lKCl7fU1lLnByb3RvdHlwZS5ub2RlTmFtZT1cXFwiI2RvY3VtZW50LWZyYWdtZW50XFxcIjtNZS5wcm90b3R5cGUubm9kZVR5cGU9SDtrKE1lLEkpO2Z1bmN0aW9uIFllKCl7fVllLnByb3RvdHlwZS5ub2RlVHlwZT1qdDtrKFllLEkpO2Z1bmN0aW9uIEp0KCl7fUp0LnByb3RvdHlwZS5zZXJpYWxpemVUb1N0cmluZz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGVuLmNhbGwodCxlLG4pfTtJLnByb3RvdHlwZS50b1N0cmluZz1lbjtmdW5jdGlvbiBlbih0LGUpe3ZhciBuPVtdLHI9dGhpcy5ub2RlVHlwZT09OSYmdGhpcy5kb2N1bWVudEVsZW1lbnR8fHRoaXMsaT1yLnByZWZpeCxzPXIubmFtZXNwYWNlVVJJO2lmKHMmJmk9PW51bGwpe3ZhciBpPXIubG9va3VwUHJlZml4KHMpO2lmKGk9PW51bGwpdmFyIG89W3tuYW1lc3BhY2U6cyxwcmVmaXg6bnVsbH1dfXJldHVybiBhZSh0aGlzLG4sdCxlLG8pLG4uam9pbihcXFwiXFxcIil9ZnVuY3Rpb24gTHQodCxlLG4pe3ZhciByPXQucHJlZml4fHxcXFwiXFxcIixpPXQubmFtZXNwYWNlVVJJO2lmKCFyJiYhaXx8cj09PVxcXCJ4bWxcXFwiJiZpPT09XFxcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVxcXCJ8fGk9PVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1xcXCIpcmV0dXJuITE7Zm9yKHZhciBzPW4ubGVuZ3RoO3MtLTspe3ZhciBvPW5bc107aWYoby5wcmVmaXg9PXIpcmV0dXJuIG8ubmFtZXNwYWNlIT1pfXJldHVybiEwfWZ1bmN0aW9uIGFlKHQsZSxuLHIsaSl7aWYocilpZih0PXIodCksdCl7aWYodHlwZW9mIHQ9PVxcXCJzdHJpbmdcXFwiKXtlLnB1c2godCk7cmV0dXJufX1lbHNlIHJldHVybjtzd2l0Y2godC5ub2RlVHlwZSl7Y2FzZSBCOml8fChpPVtdKTt2YXIgcz1pLmxlbmd0aCxvPXQuYXR0cmlidXRlcyxsPW8ubGVuZ3RoLHk9dC5maXJzdENoaWxkLHU9dC50YWdOYW1lO249T249PT10Lm5hbWVzcGFjZVVSSXx8bixlLnB1c2goXFxcIjxcXFwiLHUpO2Zvcih2YXIgYT0wO2E8bDthKyspe3ZhciBmPW8uaXRlbShhKTtmLnByZWZpeD09XFxcInhtbG5zXFxcIj9pLnB1c2goe3ByZWZpeDpmLmxvY2FsTmFtZSxuYW1lc3BhY2U6Zi52YWx1ZX0pOmYubm9kZU5hbWU9PVxcXCJ4bWxuc1xcXCImJmkucHVzaCh7cHJlZml4OlxcXCJcXFwiLG5hbWVzcGFjZTpmLnZhbHVlfSl9Zm9yKHZhciBhPTA7YTxsO2ErKyl7dmFyIGY9by5pdGVtKGEpO2lmKEx0KGYsbixpKSl7dmFyIGg9Zi5wcmVmaXh8fFxcXCJcXFwiLFM9Zi5uYW1lc3BhY2VVUkksRT1oP1xcXCIgeG1sbnM6XFxcIitoOlxcXCIgeG1sbnNcXFwiO2UucHVzaChFLCc9XFxcIicsUywnXFxcIicpLGkucHVzaCh7cHJlZml4OmgsbmFtZXNwYWNlOlN9KX1hZShmLGUsbixyLGkpfWlmKEx0KHQsbixpKSl7dmFyIGg9dC5wcmVmaXh8fFxcXCJcXFwiLFM9dC5uYW1lc3BhY2VVUkk7aWYoUyl7dmFyIEU9aD9cXFwiIHhtbG5zOlxcXCIraDpcXFwiIHhtbG5zXFxcIjtlLnB1c2goRSwnPVxcXCInLFMsJ1xcXCInKSxpLnB1c2goe3ByZWZpeDpoLG5hbWVzcGFjZTpTfSl9fWlmKHl8fG4mJiEvXig/Om1ldGF8bGlua3xpbWd8YnJ8aHJ8aW5wdXQpJC9pLnRlc3QodSkpe2lmKGUucHVzaChcXFwiPlxcXCIpLG4mJi9ec2NyaXB0JC9pLnRlc3QodSkpZm9yKDt5Oyl5LmRhdGE/ZS5wdXNoKHkuZGF0YSk6YWUoeSxlLG4scixpKSx5PXkubmV4dFNpYmxpbmc7ZWxzZSBmb3IoO3k7KWFlKHksZSxuLHIsaSkseT15Lm5leHRTaWJsaW5nO2UucHVzaChcXFwiPC9cXFwiLHUsXFxcIj5cXFwiKX1lbHNlIGUucHVzaChcXFwiLz5cXFwiKTtyZXR1cm47Y2FzZSBWdDpjYXNlIEg6Zm9yKHZhciB5PXQuZmlyc3RDaGlsZDt5OylhZSh5LGUsbixyLGkpLHk9eS5uZXh0U2libGluZztyZXR1cm47Y2FzZSBvZTpyZXR1cm4gZS5wdXNoKFxcXCIgXFxcIix0Lm5hbWUsJz1cXFwiJyx0LnZhbHVlLnJlcGxhY2UoL1s8JlxcXCJdL2csVXQpLCdcXFwiJyk7Y2FzZSBEZTpyZXR1cm4gZS5wdXNoKHQuZGF0YS5yZXBsYWNlKC9bPCZdL2csVXQpLnJlcGxhY2UoL11dPi9nLFxcXCJdXSZndDtcXFwiKSk7Y2FzZSBXdDpyZXR1cm4gZS5wdXNoKFxcXCI8IVtDREFUQVtcXFwiLHQuZGF0YSxcXFwiXV0+XFxcIik7Y2FzZSBCdDpyZXR1cm4gZS5wdXNoKFxcXCI8IS0tXFxcIix0LmRhdGEsXFxcIi0tPlxcXCIpO2Nhc2UgenQ6dmFyIFI9dC5wdWJsaWNJZCx2PXQuc3lzdGVtSWQ7aWYoZS5wdXNoKFxcXCI8IURPQ1RZUEUgXFxcIix0Lm5hbWUpLFIpZS5wdXNoKFxcXCIgUFVCTElDIFxcXCIsUiksdiYmdiE9XFxcIi5cXFwiJiZlLnB1c2goXFxcIiBcXFwiLHYpLGUucHVzaChcXFwiPlxcXCIpO2Vsc2UgaWYodiYmdiE9XFxcIi5cXFwiKWUucHVzaChcXFwiIFNZU1RFTSBcXFwiLHYsXFxcIj5cXFwiKTtlbHNle3ZhciBNPXQuaW50ZXJuYWxTdWJzZXQ7TSYmZS5wdXNoKFxcXCIgW1xcXCIsTSxcXFwiXVxcXCIpLGUucHVzaChcXFwiPlxcXCIpfXJldHVybjtjYXNlIGp0OnJldHVybiBlLnB1c2goXFxcIjw/XFxcIix0LnRhcmdldCxcXFwiIFxcXCIsdC5kYXRhLFxcXCI/PlxcXCIpO2Nhc2UgR3Q6cmV0dXJuIGUucHVzaChcXFwiJlxcXCIsdC5ub2RlTmFtZSxcXFwiO1xcXCIpO2RlZmF1bHQ6ZS5wdXNoKFxcXCI/P1xcXCIsdC5ub2RlTmFtZSl9fWZ1bmN0aW9uIHRuKHQsZSxuKXt2YXIgcjtzd2l0Y2goZS5ub2RlVHlwZSl7Y2FzZSBCOnI9ZS5jbG9uZU5vZGUoITEpLHIub3duZXJEb2N1bWVudD10O2Nhc2UgSDpicmVhaztjYXNlIG9lOm49ITA7YnJlYWt9aWYocnx8KHI9ZS5jbG9uZU5vZGUoITEpKSxyLm93bmVyRG9jdW1lbnQ9dCxyLnBhcmVudE5vZGU9bnVsbCxuKWZvcih2YXIgaT1lLmZpcnN0Q2hpbGQ7aTspci5hcHBlbmRDaGlsZCh0bih0LGksbikpLGk9aS5uZXh0U2libGluZztyZXR1cm4gcn1mdW5jdGlvbiBXZSh0LGUsbil7dmFyIHI9bmV3IGUuY29uc3RydWN0b3I7Zm9yKHZhciBpIGluIGUpe3ZhciBzPWVbaV07dHlwZW9mIHMhPVxcXCJvYmplY3RcXFwiJiZzIT1yW2ldJiYocltpXT1zKX1zd2l0Y2goZS5jaGlsZE5vZGVzJiYoci5jaGlsZE5vZGVzPW5ldyBaKSxyLm93bmVyRG9jdW1lbnQ9dCxyLm5vZGVUeXBlKXtjYXNlIEI6dmFyIG89ZS5hdHRyaWJ1dGVzLGw9ci5hdHRyaWJ1dGVzPW5ldyAkZSx1PW8ubGVuZ3RoO2wuX293bmVyRWxlbWVudD1yO2Zvcih2YXIgYT0wO2E8dTthKyspci5zZXRBdHRyaWJ1dGVOb2RlKFdlKHQsby5pdGVtKGEpLCEwKSk7YnJlYWs7Y2FzZSBvZTpuPSEwfWlmKG4pZm9yKHZhciBmPWUuZmlyc3RDaGlsZDtmOylyLmFwcGVuZENoaWxkKFdlKHQsZixuKSksZj1mLm5leHRTaWJsaW5nO3JldHVybiByfWZ1bmN0aW9uIG5uKHQsZSxuKXt0W2VdPW59dHJ5e2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSl7bGV0IHQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUubm9kZVR5cGUpe2Nhc2UgQjpjYXNlIEg6dmFyIG49W107Zm9yKGU9ZS5maXJzdENoaWxkO2U7KWUubm9kZVR5cGUhPT03JiZlLm5vZGVUeXBlIT09OCYmbi5wdXNoKHQoZSkpLGU9ZS5uZXh0U2libGluZztyZXR1cm4gbi5qb2luKFxcXCJcXFwiKTtkZWZhdWx0OnJldHVybiBlLm5vZGVWYWx1ZX19O0RhPXQsT2JqZWN0LmRlZmluZVByb3BlcnR5KGNlLnByb3RvdHlwZSxcXFwibGVuZ3RoXFxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEdlKHRoaXMpLHRoaXMuJCRsZW5ndGh9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEkucHJvdG90eXBlLFxcXCJ0ZXh0Q29udGVudFxcXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpfSxzZXQ6ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMubm9kZVR5cGUpe2Nhc2UgQjpjYXNlIEg6Zm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KXRoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKTsoZXx8U3RyaW5nKGUpKSYmdGhpcy5hcHBlbmRDaGlsZCh0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSkpO2JyZWFrO2RlZmF1bHQ6dGhpcy5kYXRhPWUsdGhpcy52YWx1ZT1lLHRoaXMubm9kZVZhbHVlPWV9fX0pLG5uPWZ1bmN0aW9uKGUsbixyKXtlW1xcXCIkJFxcXCIrbl09cn19fWNhdGNoKHQpe312YXIgRGE7Q2UuTm9kZT1JO0NlLkRPTUV4Y2VwdGlvbj10ZTtDZS5ET01JbXBsZW1lbnRhdGlvbj1LdDtDZS5YTUxTZXJpYWxpemVyPUp0fSk7dmFyIG9uPWJlKF9lPT57ZnVuY3Rpb24gc24odCl7dGhpcy5vcHRpb25zPXR8fHtsb2NhdG9yOnt9fX1zbi5wcm90b3R5cGUucGFyc2VGcm9tU3RyaW5nPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5vcHRpb25zLHI9bmV3IGpuLGk9bi5kb21CdWlsZGVyfHxuZXcgRWUscz1uLmVycm9ySGFuZGxlcixvPW4ubG9jYXRvcixsPW4ueG1sbnN8fHt9LHU9L1xcXFwveD9odG1sPyQvLnRlc3QoZSksYT11P0duLmVudGl0eU1hcDp7bHQ6XFxcIjxcXFwiLGd0OlxcXCI+XFxcIixhbXA6XFxcIiZcXFwiLHF1b3Q6J1xcXCInLGFwb3M6XFxcIidcXFwifTtyZXR1cm4gbyYmaS5zZXREb2N1bWVudExvY2F0b3Iobyksci5lcnJvckhhbmRsZXI9V24ocyxpLG8pLHIuZG9tQnVpbGRlcj1uLmRvbUJ1aWxkZXJ8fGksdSYmKGxbXFxcIlxcXCJdPVxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXFxcIiksbC54bWw9bC54bWx8fFxcXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcXFwiLHQmJnR5cGVvZiB0PT1cXFwic3RyaW5nXFxcIj9yLnBhcnNlKHQsbCxhKTpyLmVycm9ySGFuZGxlci5lcnJvcihcXFwiaW52YWxpZCBkb2Mgc291cmNlXFxcIiksaS5kb2N9O2Z1bmN0aW9uIFduKHQsZSxuKXtpZighdCl7aWYoZSBpbnN0YW5jZW9mIEVlKXJldHVybiBlO3Q9ZX12YXIgcj17fSxpPXQgaW5zdGFuY2VvZiBGdW5jdGlvbjtuPW58fHt9O2Z1bmN0aW9uIHMobyl7dmFyIGw9dFtvXTshbCYmaSYmKGw9dC5sZW5ndGg9PTI/ZnVuY3Rpb24odSl7dChvLHUpfTp0KSxyW29dPWwmJmZ1bmN0aW9uKHUpe2woXFxcIlt4bWxkb20gXFxcIitvK1xcXCJdXFx0XFxcIit1K3FlKG4pKX18fGZ1bmN0aW9uKCl7fX1yZXR1cm4gcyhcXFwid2FybmluZ1xcXCIpLHMoXFxcImVycm9yXFxcIikscyhcXFwiZmF0YWxFcnJvclxcXCIpLHJ9ZnVuY3Rpb24gRWUoKXt0aGlzLmNkYXRhPSExfWZ1bmN0aW9uIHVlKHQsZSl7ZS5saW5lTnVtYmVyPXQubGluZU51bWJlcixlLmNvbHVtbk51bWJlcj10LmNvbHVtbk51bWJlcn1FZS5wcm90b3R5cGU9e3N0YXJ0RG9jdW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmRvYz1uZXcgVm4oKS5jcmVhdGVEb2N1bWVudChudWxsLG51bGwsbnVsbCksdGhpcy5sb2NhdG9yJiYodGhpcy5kb2MuZG9jdW1lbnRVUkk9dGhpcy5sb2NhdG9yLnN5c3RlbUlkKX0sc3RhcnRFbGVtZW50OmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXRoaXMuZG9jLHM9aS5jcmVhdGVFbGVtZW50TlModCxufHxlKSxvPXIubGVuZ3RoO09lKHRoaXMscyksdGhpcy5jdXJyZW50RWxlbWVudD1zLHRoaXMubG9jYXRvciYmdWUodGhpcy5sb2NhdG9yLHMpO2Zvcih2YXIgbD0wO2w8bztsKyspe3ZhciB0PXIuZ2V0VVJJKGwpLHU9ci5nZXRWYWx1ZShsKSxuPXIuZ2V0UU5hbWUobCksYT1pLmNyZWF0ZUF0dHJpYnV0ZU5TKHQsbik7dGhpcy5sb2NhdG9yJiZ1ZShyLmdldExvY2F0b3IobCksYSksYS52YWx1ZT1hLm5vZGVWYWx1ZT11LHMuc2V0QXR0cmlidXRlTm9kZShhKX19LGVuZEVsZW1lbnQ6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuY3VycmVudEVsZW1lbnQsaT1yLnRhZ05hbWU7dGhpcy5jdXJyZW50RWxlbWVudD1yLnBhcmVudE5vZGV9LHN0YXJ0UHJlZml4TWFwcGluZzpmdW5jdGlvbih0LGUpe30sZW5kUHJlZml4TWFwcGluZzpmdW5jdGlvbih0KXt9LHByb2Nlc3NpbmdJbnN0cnVjdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZG9jLmNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbih0LGUpO3RoaXMubG9jYXRvciYmdWUodGhpcy5sb2NhdG9yLG4pLE9lKHRoaXMsbil9LGlnbm9yYWJsZVdoaXRlc3BhY2U6ZnVuY3Rpb24odCxlLG4pe30sY2hhcmFjdGVyczpmdW5jdGlvbih0LGUsbil7aWYodD1ybi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdCl7aWYodGhpcy5jZGF0YSl2YXIgcj10aGlzLmRvYy5jcmVhdGVDREFUQVNlY3Rpb24odCk7ZWxzZSB2YXIgcj10aGlzLmRvYy5jcmVhdGVUZXh0Tm9kZSh0KTt0aGlzLmN1cnJlbnRFbGVtZW50P3RoaXMuY3VycmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQocik6L15cXFxccyokLy50ZXN0KHQpJiZ0aGlzLmRvYy5hcHBlbmRDaGlsZChyKSx0aGlzLmxvY2F0b3ImJnVlKHRoaXMubG9jYXRvcixyKX19LHNraXBwZWRFbnRpdHk6ZnVuY3Rpb24odCl7fSxlbmREb2N1bWVudDpmdW5jdGlvbigpe3RoaXMuZG9jLm5vcm1hbGl6ZSgpfSxzZXREb2N1bWVudExvY2F0b3I6ZnVuY3Rpb24odCl7KHRoaXMubG9jYXRvcj10KSYmKHQubGluZU51bWJlcj0wKX0sY29tbWVudDpmdW5jdGlvbih0LGUsbil7dD1ybi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHI9dGhpcy5kb2MuY3JlYXRlQ29tbWVudCh0KTt0aGlzLmxvY2F0b3ImJnVlKHRoaXMubG9jYXRvcixyKSxPZSh0aGlzLHIpfSxzdGFydENEQVRBOmZ1bmN0aW9uKCl7dGhpcy5jZGF0YT0hMH0sZW5kQ0RBVEE6ZnVuY3Rpb24oKXt0aGlzLmNkYXRhPSExfSxzdGFydERURDpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5kb2MuaW1wbGVtZW50YXRpb247aWYociYmci5jcmVhdGVEb2N1bWVudFR5cGUpe3ZhciBpPXIuY3JlYXRlRG9jdW1lbnRUeXBlKHQsZSxuKTt0aGlzLmxvY2F0b3ImJnVlKHRoaXMubG9jYXRvcixpKSxPZSh0aGlzLGkpfX0sd2FybmluZzpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXFxcIlt4bWxkb20gd2FybmluZ11cXHRcXFwiK3QscWUodGhpcy5sb2NhdG9yKSl9LGVycm9yOmZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IoXFxcIlt4bWxkb20gZXJyb3JdXFx0XFxcIit0LHFlKHRoaXMubG9jYXRvcikpfSxmYXRhbEVycm9yOmZ1bmN0aW9uKHQpe3Rocm93IG5ldyBCbih0LHRoaXMubG9jYXRvcil9fTtmdW5jdGlvbiBxZSh0KXtpZih0KXJldHVybmBcXG5AYCsodC5zeXN0ZW1JZHx8XFxcIlxcXCIpK1xcXCIjW2xpbmU6XFxcIit0LmxpbmVOdW1iZXIrXFxcIixjb2w6XFxcIit0LmNvbHVtbk51bWJlcitcXFwiXVxcXCJ9ZnVuY3Rpb24gcm4odCxlLG4pe3JldHVybiB0eXBlb2YgdD09XFxcInN0cmluZ1xcXCI/dC5zdWJzdHIoZSxuKTp0Lmxlbmd0aD49ZStufHxlP25ldyBqYXZhLmxhbmcuU3RyaW5nKHQsZSxuKStcXFwiXFxcIjp0fVxcXCJlbmREVEQsc3RhcnRFbnRpdHksZW5kRW50aXR5LGF0dHJpYnV0ZURlY2wsZWxlbWVudERlY2wsZXh0ZXJuYWxFbnRpdHlEZWNsLGludGVybmFsRW50aXR5RGVjbCxyZXNvbHZlRW50aXR5LGdldEV4dGVybmFsU3Vic2V0LG5vdGF0aW9uRGVjbCx1bnBhcnNlZEVudGl0eURlY2xcXFwiLnJlcGxhY2UoL1xcXFx3Ky9nLGZ1bmN0aW9uKHQpe0VlLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiBudWxsfX0pO2Z1bmN0aW9uIE9lKHQsZSl7dC5jdXJyZW50RWxlbWVudD90LmN1cnJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGUpOnQuZG9jLmFwcGVuZENoaWxkKGUpfXZhciBHbj1OdCgpLGFuPUl0KCksam49YW4uWE1MUmVhZGVyLEJuPWFuLlBhcnNlRXJyb3IsVm49X2UuRE9NSW1wbGVtZW50YXRpb249WGUoKS5ET01JbXBsZW1lbnRhdGlvbjtfZS5YTUxTZXJpYWxpemVyPVhlKCkuWE1MU2VyaWFsaXplcjtfZS5ET01QYXJzZXI9c247X2UuX19ET01IYW5kbGVyPUVlfSk7dmFyIGxuPVRuKG9uKCkpO2FzeW5jIGZ1bmN0aW9uIHVuKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZSxuKT0+e2xldCByPW5ldyBGaWxlUmVhZGVyO3Iub25sb2FkPWFzeW5jIGk9PntsZXQgcz1pLnRhcmdldC5yZXN1bHQsbD1uZXcgbG4uRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHMsXFxcImFwcGxpY2F0aW9uL3htbFxcXCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJtb25zdGVyXFxcIiksdT1bXTtpZighIWwubGVuZ3RoKXtmb3IobGV0IGEgb2YgQXJyYXkuZnJvbShsKSl0cnl7bGV0IGY9e2ltYWdlOm51bGwsbmFtZTp4KGEsXFxcIm5hbWVcXFwiKSxzaXplOnFuKGEpLHR5cGU6eChhLFxcXCJ0eXBlXFxcIiksc3VidHlwZTp4KGEsXFxcInN1YnR5cGVcXFwiKSxhbGlnbm1lbnQ6eChhLFxcXCJhbGlnbm1lbnRcXFwiKSxhYzpabihhKSxocDpOdW1iZXIoY24oYSxcXFwiaHBcXFwiKSksaGl0X2RpY2U6Y24oYSxcXFwiaGl0X2RpY2VcXFwiKSxzcGVlZDp4KGEsXFxcInNwZWVkXFxcIiksc3RhdHM6W051bWJlcih4KGEsXFxcInN0clxcXCIpKSxOdW1iZXIoeChhLFxcXCJkZXhcXFwiKSksTnVtYmVyKHgoYSxcXFwiY29uXFxcIikpLE51bWJlcih4KGEsXFxcImludFxcXCIpKSxOdW1iZXIoeChhLFxcXCJ3aXNcXFwiKSksTnVtYmVyKHgoYSxcXFwiY2hhXFxcIikpXSxzYXZlczpZbihhKSxza2lsbHNhdmVzOkhuKGEpLGRhbWFnZV92dWxuZXJhYmlsaXRpZXM6eChhLFxcXCJ2dWxuZXJhYmxlXFxcIiksZGFtYWdlX3Jlc2lzdGFuY2VzOngoYSxcXFwicmVzaXN0XFxcIiksZGFtYWdlX2ltbXVuaXRpZXM6eChhLFxcXCJpbW11bmVcXFwiKSxjb25kaXRpb25faW1tdW5pdGllczp4KGEsXFxcImNvbmRpdGlvbkltbXVuZVxcXCIpLHNlbnNlczp4KGEsXFxcInNlbnNlc1xcXCIpLGxhbmd1YWdlczp4KGEsXFxcImxhbmd1YWdlc1xcXCIpLGNyOngoYSxcXFwiY3JcXFwiKSx0cmFpdHM6SWUoYSxcXFwidHJhaXRcXFwiKSxzcGVsbHM6em4oYSksYWN0aW9uczpJZShhLFxcXCJhY3Rpb25cXFwiKSxsZWdlbmRhcnlfYWN0aW9uczpJZShhLFxcXCJsZWdlbmRhcnlcXFwiKSxyZWFjdGlvbnM6SWUoYSxcXFwicmVhY3Rpb25cXFwiKSxzb3VyY2U6UW4oYSl9O3UucHVzaChmKX1jYXRjaChmKXtjb25zb2xlLmVycm9yKGYpO2NvbnRpbnVlfWUodSl9fSxyLnJlYWRBc1RleHQodCl9KX1mdW5jdGlvbiB4KHQsZSl7bGV0IG49dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZihuJiZuLmxlbmd0aClyZXR1cm4gblswXS50ZXh0Q29udGVudH1mdW5jdGlvbiBJZSh0LGUpe3ZhciBpO2lmKCEoKGk9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSkhPW51bGwmJmkubGVuZ3RoKSlyZXR1cm5bXTtsZXQgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpLHI9W107Zm9yKGxldCBzIG9mIEFycmF5LmZyb20obikpe2xldCBvPXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcIm5hbWVcXFwiKTtpZighb3x8IW8ubGVuZ3RofHwhb1swXS50ZXh0Q29udGVudHx8b1swXS50ZXh0Q29udGVudC5pbmNsdWRlcyhcXFwiU3BlbGxjYXN0aW5nXFxcIikpY29udGludWU7bGV0IGw9W10sdT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJ0ZXh0XFxcIik7Zm9yKGxldCBhIG9mIEFycmF5LmZyb20odSkpbC5wdXNoKGEudGV4dENvbnRlbnQpO3IucHVzaCh7bmFtZTpvWzBdLnRleHRDb250ZW50LGRlc2M6bC5qb2luKFxcXCIgXFxcIil9KX1yZXR1cm4gcn1mdW5jdGlvbiB6bih0KXt2YXIgcjtpZighKChyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInRyYWl0XFxcIikpIT1udWxsJiZyLmxlbmd0aCkpcmV0dXJuW107bGV0IG49QXJyYXkuZnJvbSh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJ0cmFpdFxcXCIpKS5maW5kKGk9Pnt2YXIgcztyZXR1cm4ocz1pLmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJuYW1lXFxcIilbMF0pPT1udWxsP3ZvaWQgMDpzLnRleHRDb250ZW50LmluY2x1ZGVzKFxcXCJTcGVsbGNhc3RpbmdcXFwiKX0pO3JldHVybiBuP0FycmF5LmZyb20obi5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwidGV4dFxcXCIpKS5tYXAoaT0+aS50ZXh0Q29udGVudC5yZXBsYWNlKC8oJiM4MjI2O3xcdTIwMjIpL3UsXFxcIlxcXCIpLnRyaW0oKSkuZmlsdGVyKGk9PmkubGVuZ3RoKTpbXX1mdW5jdGlvbiBIbih0KXt2YXIgcjtpZighKChyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInNraWxsXFxcIikpIT1udWxsJiZyLmxlbmd0aCkpcmV0dXJuW107bGV0IGU9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwic2tpbGxcXFwiKVswXS50ZXh0Q29udGVudC5zcGxpdChcXFwiLCBcXFwiKSxuPVtdO3JldHVybiBlLmZvckVhY2goaT0+e2xldCBzPWkuc3BsaXQoL1xcXFxzW1xcXFwrXFxcXC1dLyk7bi5wdXNoKHtbc1swXV06TnVtYmVyKHNbMV0pfSl9KSxufXZhciBLbj17U3RyOlxcXCJzdHJlbmd0aFxcXCIsRGV4OlxcXCJkZXh0ZXJpdHlcXFwiLENvbjpcXFwiY29uc3RpdHV0aW9uXFxcIixJbnQ6XFxcImludGVsbGlnZW5jZVxcXCIsV2lzOlxcXCJ3aXNkb21cXFwiLENoYTpcXFwiY2hhcmlzbWFcXFwifTtmdW5jdGlvbiBZbih0KXt2YXIgcjtpZighKChyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInNhdmVcXFwiKSkhPW51bGwmJnIubGVuZ3RoKSlyZXR1cm5bXTtsZXQgZT10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJzYXZlXFxcIilbMF0udGV4dENvbnRlbnQuc3BsaXQoXFxcIiwgXFxcIiksbj1bXTtyZXR1cm4gZS5mb3JFYWNoKGk9PntsZXQgcz1pLnNwbGl0KC9cXFxcc1tcXFxcK1xcXFwtXS8pO24ucHVzaCh7W0tuW3NbMF1dXTpOdW1iZXIoc1sxXSl9KX0pLG59ZnVuY3Rpb24gY24odCxlKXt2YXIgcyxvO2lmKCEoKHM9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwiaHBcXFwiKSkhPW51bGwmJnMubGVuZ3RoKSlyZXR1cm5cXFwiXFxcIjtsZXQgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJocFxcXCIpWzBdLnRleHRDb250ZW50LFsscixpXT0obz1uLm1hdGNoKC8oXFxcXGQrKSBcXFxcKChbXFxcXHNcXFxcU10rKVxcXFwpLykpIT1udWxsP286WyxcXFwiXFxcIixcXFwiXFxcIl07cmV0dXJue2hwOnIsaGl0X2RpY2U6aX1bZV19dmFyIFhuPXtUOlxcXCJ0aW55XFxcIixTOlxcXCJzbWFsbFxcXCIsTTpcXFwibWVkaXVtXFxcIixMOlxcXCJsYXJnZVxcXCIsSDpcXFwiaHVnZVxcXCIsRzpcXFwiZ2FyZ2FudHVhblxcXCJ9O2Z1bmN0aW9uIHFuKHQpe3ZhciBlO3JldHVybiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJzaXplXFxcIikmJihlPVhuW3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInNpemVcXFwiKVswXS50ZXh0Q29udGVudF0pIT1udWxsP2U6XFxcIlxcXCJ9ZnVuY3Rpb24gWm4odCl7dmFyIGU7aWYodC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwiYWNcXFwiKSl7bGV0WyxuXT0oZT10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJhY1xcXCIpWzBdKT09bnVsbD92b2lkIDA6ZS50ZXh0Q29udGVudC5tYXRjaCgvKFxcXFxkKykvKTtyZXR1cm4gTnVtYmVyKG4pfXJldHVybiAwfWZ1bmN0aW9uIFFuKHQpe3ZhciBuLHIsaSxzLG8sbDtsZXQgZT1cXFwiVW5rbm93blxcXCI7aWYoKG49dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwic291cmNlXFxcIikpIT1udWxsJiZuLmxlbmd0aCllPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInNvdXJjZVxcXCIpWzBdLnRleHRDb250ZW50O2Vsc2UgaWYoKChyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInRyYWl0XFxcIikpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCkmJkFycmF5LmZyb20odC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwidHJhaXRcXFwiKSkuZmluZCh1PT57dmFyIGE7cmV0dXJuKChhPXUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcIm5hbWVcXFwiKSk9PW51bGw/dm9pZCAwOmFbMF0udGV4dENvbnRlbnQpPT1cXFwiU291cmNlXFxcIn0pKXtsZXQgdT1BcnJheS5mcm9tKHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInRyYWl0XFxcIikpLmZpbmQoYT0+e3ZhciBmLGg7cmV0dXJuKChoPShmPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcIm5hbWVcXFwiKSk9PW51bGw/dm9pZCAwOmZbMF0pPT1udWxsP3ZvaWQgMDpoLnRleHRDb250ZW50KT09XFxcIlNvdXJjZVxcXCJ9KTtlPShvPShzPShpPXU9PW51bGw/dm9pZCAwOnUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcInRleHRcXFwiKSk9PW51bGw/dm9pZCAwOmlbMF0pPT1udWxsP3ZvaWQgMDpzLnRleHRDb250ZW50KT09bnVsbD92b2lkIDA6by5yZXBsYWNlKC9wLiBcXFxcZCsvLFxcXCJcXFwiKS50cmltKCl9ZWxzZSBpZigobD10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJkZXNjcmlwdGlvblxcXCIpKSE9bnVsbCYmbC5sZW5ndGgpe2xldCB1PXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcImRlc2NyaXB0aW9uXFxcIiksYT1cXFwiU291cmNlOiBcXFwiO2lmKHVbMF0udGV4dENvbnRlbnQuaW5jbHVkZXMoYSkpe2xldCBmPXVbMF0udGV4dENvbnRlbnQubGFzdEluZGV4T2YoYSk7ZT11WzBdLnRleHRDb250ZW50LnNsaWNlKGYrYS5sZW5ndGgpLnNwbGl0KC8sID8vKVswXX19cmV0dXJuIGV9dmFyIEpuPXtTVFI6XFxcInN0cmVuZ3RoXFxcIixERVg6XFxcImRleHRlcml0eVxcXCIsQ09OOlxcXCJjb25zdGl0dXRpb25cXFwiLElOVDpcXFwiaW50ZWxsaWdlbmNlXFxcIixXSVM6XFxcIndpc2RvbVxcXCIsQ0hBOlxcXCJjaGFyaXNtYVxcXCJ9O2FzeW5jIGZ1bmN0aW9uIGZuKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZSxuKT0+e2xldCByPW5ldyBGaWxlUmVhZGVyLGk9W107ci5vbmxvYWQ9YXN5bmMgcz0+e3ZhciBvLGwsdSxhLGYsaCxTLEUseSxSLHYsTSxQLGIsVCxVLFcsZCxHLEEsTCx3LGosSix6LFYsXyxnLGVlLEMsWCxudCxydCxpdCxzdCxhdCxvdCxjdCxsdCx1dCxmdCxtdCxwdCxodCxndCxkdCxTdCx2dCx5dCxSdCxDdCxFdCxfdDt0cnl7bGV0IFBlPUpTT04ucGFyc2Uocy50YXJnZXQucmVzdWx0KSxTbj1PYmplY3Qua2V5cyhQZSkuZmlsdGVyKGtlPT4vXkNyZWF0dXJlc1xcXFwuLy50ZXN0KGtlKSk7Zm9yKGxldCBrZSBvZiBTbil0cnl7bGV0IE49UGVba2VdLHZuPXtuYW1lOk4uTmFtZSxzb3VyY2U6KG89Ti5Tb3VyY2UpIT1udWxsJiZvLnRyaW0oKS5sZW5ndGg/KGw9Ti5Tb3VyY2UpPT1udWxsP3ZvaWQgMDpsLnRyaW0oKTpcXFwiVW5rbm93blxcXCIsdHlwZTooZj0oYT0odT1OLlR5cGUpPT1udWxsP3ZvaWQgMDp1LnNwbGl0KC8sXFxcXHM/LykpPT1udWxsP3ZvaWQgMDphWzBdKT09bnVsbD92b2lkIDA6Zi50cmltKCksc3VidHlwZTpcXFwiXFxcIixzaXplOlxcXCJcXFwiLGFsaWdubWVudDooRT0oUz0oaD1OLlR5cGUpPT1udWxsP3ZvaWQgMDpoLnNwbGl0KC8sXFxcXHM/LykpPT1udWxsP3ZvaWQgMDpTWzFdKT09bnVsbD92b2lkIDA6RS50cmltKCksaHA6KHk9Ti5IUCk9PW51bGw/dm9pZCAwOnkuVmFsdWUsaGl0X2RpY2U6KE09KHY9KFI9Ti5IUCk9PW51bGw/dm9pZCAwOlIuTm90ZXMpPT1udWxsP3ZvaWQgMDp2LnJlcGxhY2UoLyhbKCldKS9nLFxcXCJcXFwiKSk9PW51bGw/dm9pZCAwOk0udHJpbSgpLGFjOk4uQUMuVmFsdWUsc3BlZWQ6KGI9KFA9Ti5TcGVlZCk9PW51bGw/dm9pZCAwOlAuam9pbihcXFwiLCBcXFwiKSk9PW51bGw/dm9pZCAwOmIudHJpbSgpLHN0YXRzOk9iamVjdC52YWx1ZXMoKFQ9Ti5BYmlsaXRpZXMpIT1udWxsP1Q6e30pLGRhbWFnZV9pbW11bml0aWVzOihHPShkPShXPShVPU4uRGFtYWdlSW1tdW5pdGllcyk9PW51bGw/dm9pZCAwOlUuam9pbihcXFwiOyBcXFwiKSk9PW51bGw/dm9pZCAwOlcudG9Mb3dlckNhc2UoKSk9PW51bGw/dm9pZCAwOmQudHJpbSgpKSE9bnVsbD9HOlxcXCJcXFwiLGRhbWFnZV9yZXNpc3RhbmNlczooaj0odz0oTD0oQT1OLkRhbWFnZVJlc2lzdGFuY2VzKT09bnVsbD92b2lkIDA6QS5qb2luKFxcXCIsIFxcXCIpKT09bnVsbD92b2lkIDA6TC50b0xvd2VyQ2FzZSgpKT09bnVsbD92b2lkIDA6dy50cmltKCkpIT1udWxsP2o6XFxcIlxcXCIsZGFtYWdlX3Z1bG5lcmFiaWxpdGllczooXz0oVj0oej0oSj1OLkRhbWFnZVZ1bG5lcmFiaWxpdGllcyk9PW51bGw/dm9pZCAwOkouam9pbihcXFwiLCBcXFwiKSk9PW51bGw/dm9pZCAwOnoudG9Mb3dlckNhc2UoKSk9PW51bGw/dm9pZCAwOlYudHJpbSgpKSE9bnVsbD9fOlxcXCJcXFwiLGNvbmRpdGlvbl9pbW11bml0aWVzOihYPShDPShlZT0oZz1OLkNvbmRpdGlvbkltbXVuaXRpZXMpPT1udWxsP3ZvaWQgMDpnLmpvaW4oXFxcIiwgXFxcIikpPT1udWxsP3ZvaWQgMDplZS50b0xvd2VyQ2FzZSgpKT09bnVsbD92b2lkIDA6Qy50cmltKCkpIT1udWxsP1g6XFxcIlxcXCIsc2F2ZXM6KHJ0PShudD1OLlNhdmVzKT09bnVsbD92b2lkIDA6bnQubWFwKCh7TmFtZTpELE1vZGlmaWVyOkZlfSk9Pih7W0puW0RdXTpGZX0pKSkhPW51bGw/cnQ6W10sc2tpbGxzYXZlczooc3Q9KGl0PU4uU2tpbGxzKT09bnVsbD92b2lkIDA6aXQubWFwKCh7TmFtZTpELE1vZGlmaWVyOkZlfSk9Pih7W0RdOkZlfSkpKSE9bnVsbD9zdDpbXSxzZW5zZXM6KGN0PShvdD0oYXQ9Ti5TZW5zZXMpPT1udWxsP3ZvaWQgMDphdC5qb2luKFxcXCIsIFxcXCIpKT09bnVsbD92b2lkIDA6b3QudHJpbSgpKSE9bnVsbD9jdDpcXFwiXFxcIixsYW5ndWFnZXM6KGZ0PSh1dD0obHQ9Ti5MYW5ndWFnZXMpPT1udWxsP3ZvaWQgMDpsdC5qb2luKFxcXCIsIFxcXCIpKT09bnVsbD92b2lkIDA6dXQudHJpbSgpKSE9bnVsbD9mdDpcXFwiXFxcIixjcjoocHQ9KG10PU4uQ2hhbGxlbmdlKT09bnVsbD92b2lkIDA6bXQudHJpbSgpKSE9bnVsbD9wdDpcXFwiXFxcIix0cmFpdHM6KGd0PShodD1OLlRyYWl0cyk9PW51bGw/dm9pZCAwOmh0Lm1hcChEPT4oe25hbWU6RC5OYW1lLGRlc2M6RC5Db250ZW50fSkpKSE9bnVsbD9ndDpbXSxhY3Rpb25zOihTdD0oZHQ9Ti5BY3Rpb25zKT09bnVsbD92b2lkIDA6ZHQubWFwKEQ9Pih7bmFtZTpELk5hbWUsZGVzYzpELkNvbnRlbnR9KSkpIT1udWxsP1N0OltdLGJvbnVzX2FjdGlvbnM6KHl0PSh2dD1OLkJvbnVzQWN0aW9ucyk9PW51bGw/dm9pZCAwOnZ0Lm1hcChEPT4oe25hbWU6RC5OYW1lLGRlc2M6RC5Db250ZW50fSkpKSE9bnVsbD95dDpbXSxyZWFjdGlvbnM6KEN0PShSdD1OLlJlYWN0aW9ucyk9PW51bGw/dm9pZCAwOlJ0Lm1hcChEPT4oe25hbWU6RC5OYW1lLGRlc2M6RC5Db250ZW50fSkpKSE9bnVsbD9DdDpbXSxsZWdlbmRhcnlfYWN0aW9uczooX3Q9KEV0PU4uTGVnZW5kYXJ5QWN0aW9ucyk9PW51bGw/dm9pZCAwOkV0Lm1hcChEPT4oe25hbWU6RC5OYW1lLGRlc2M6RC5Db250ZW50fSkpKSE9bnVsbD9fdDpbXSxpbWFnZTpudWxsfTtpLnB1c2godm4pfWNhdGNoKE4pe2NvbnRpbnVlfWUoaSl9Y2F0Y2goUGUpe24oKX19LHIucmVhZEFzVGV4dCh0KX0pfWFzeW5jIGZ1bmN0aW9uIG1uKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZSxuKT0+e2xldCByPW5ldyBGaWxlUmVhZGVyO3Iub25sb2FkPWFzeW5jIGk9Pnt2YXIgbyxsLHUsYSxmLGgsUyxFLHksUix2LE0sUCxiLFQsVSxXLGQsRyxBLEwsdyxqLEosejtsZXQgcz1bXTt0cnl7bGV0IFY9SlNPTi5wYXJzZShpLnRhcmdldC5yZXN1bHQpLF89W107Vi5jcmVhdHVyZXM/Xz1WLmNyZWF0dXJlczpfPVtWXTtmb3IobGV0IGcgb2YgXyl0cnl7bGV0IGVlPXtpbWFnZTpudWxsLG5hbWU6Zy5uYW1lLHNvdXJjZTpcXFwiQ3JpdHRlckRCXFxcIix0eXBlOmcuc3RhdHMucmFjZSxzdWJ0eXBlOlxcXCJcXFwiLHNpemU6Zy5zdGF0cy5zaXplLGFsaWdubWVudDpnLnN0YXRzLmFsaWdubWVudCxocDpnLnN0YXRzLmhpdFBvaW50cyxoaXRfZGljZTpgJHtNYXRoLmZsb29yKGcuc3RhdHMuZXh0cmFIZWFsdGhGcm9tQ29uc3RpdHV0aW9uL2cuc3RhdHMuYWJpbGl0eVNjb3JlTW9kaWZpZXJzLmNvbnN0aXR1dGlvbil9ZCR7Zy5zdGF0cy5oaXREaWVTaXplfSArICR7Zy5zdGF0cy5leHRyYUhlYWx0aEZyb21Db25zdGl0dXRpb259YCxhYzpnLnN0YXRzLmFybW9yQ2xhc3Msc3BlZWQ6Zy5zdGF0cy5zcGVlZCxzdGF0czpbZy5zdGF0cy5hYmlsaXR5U2NvcmVzLnN0cmVuZ3RoLGcuc3RhdHMuYWJpbGl0eVNjb3Jlcy5kZXh0ZXJpdHksZy5zdGF0cy5hYmlsaXR5U2NvcmVzLmNvbnN0aXR1dGlvbixnLnN0YXRzLmFiaWxpdHlTY29yZXMuaW50ZWxsaWdlbmNlLGcuc3RhdHMuYWJpbGl0eVNjb3Jlcy53aXNkb20sZy5zdGF0cy5hYmlsaXR5U2NvcmVzLmNoYXJpc21hXSxkYW1hZ2VfaW1tdW5pdGllczoobD0obz1nLnN0YXRzLmRhbWFnZUltbXVuaXRpZXMpPT1udWxsP3ZvaWQgMDpvLmpvaW4oXFxcIjsgXFxcIikudG9Mb3dlckNhc2UoKS50cmltKCkpIT1udWxsP2w6XFxcIlxcXCIsZGFtYWdlX3Jlc2lzdGFuY2VzOihhPSh1PWcuc3RhdHMuZGFtYWdlUmVzaXN0YW5jZXMpPT1udWxsP3ZvaWQgMDp1LmpvaW4oXFxcIiwgXFxcIikudG9Mb3dlckNhc2UoKS50cmltKCkpIT1udWxsP2E6XFxcIlxcXCIsZGFtYWdlX3Z1bG5lcmFiaWxpdGllczooaD0oZj1nLnN0YXRzLmRhbWFnZVZ1bG5lcmFiaWxpdGllcyk9PW51bGw/dm9pZCAwOmYuam9pbihcXFwiLCBcXFwiKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSkhPW51bGw/aDpcXFwiXFxcIixjb25kaXRpb25faW1tdW5pdGllczooRT0oUz1nLnN0YXRzLmNvbmRpdGlvbkltbXVuaXRpZXMpPT1udWxsP3ZvaWQgMDpTLmpvaW4oXFxcIiwgXFxcIikudG9Mb3dlckNhc2UoKS50cmltKCkpIT1udWxsP0U6XFxcIlxcXCIsc2F2ZXM6KFI9KHk9Zy5zdGF0cy5zYXZpbmdUaHJvd3MpPT1udWxsP3ZvaWQgMDp5Lm1hcChDPT57dmFyIFg7aWYoISghKFxcXCJ2YWx1ZVxcXCJpbiBDKSYmIShcXFwibW9kaWZpZXJcXFwiaW4gQykpKXJldHVybntbQy5hYmlsaXR5XTooWD1DLnZhbHVlKSE9bnVsbD9YOkMubW9kaWZpZXJ9fSkuZmlsdGVyKEM9PkMpKSE9bnVsbD9SOltdLHNraWxsc2F2ZXM6KE09KHY9Zy5zdGF0cy5za2lsbHMpPT1udWxsP3ZvaWQgMDp2Lm1hcChDPT57dmFyIFg7aWYoISghKFxcXCJ2YWx1ZVxcXCJpbiBDKSYmIShcXFwibW9kaWZpZXJcXFwiaW4gQykpKXJldHVybntbQy5uYW1lXTooWD1DLnZhbHVlKSE9bnVsbD9YOkMubW9kaWZpZXJ9fSkuZmlsdGVyKEM9PkMpKSE9bnVsbD9NOltdLHNlbnNlczooYj0oUD1nLnN0YXRzLnNlbnNlcyk9PW51bGw/dm9pZCAwOlAuam9pbihcXFwiLCBcXFwiKS50cmltKCkpIT1udWxsP2I6XFxcIlxcXCIsbGFuZ3VhZ2VzOihVPShUPWcuc3RhdHMubGFuZ3VhZ2VzKT09bnVsbD92b2lkIDA6VC5qb2luKFxcXCIsIFxcXCIpLnRyaW0oKSkhPW51bGw/VTpcXFwiXFxcIixjcjooVz1nLnN0YXRzLmNoYWxsZW5nZVJhdGluZykhPW51bGw/VzpcXFwiXFxcIix0cmFpdHM6KEc9KGQ9Zy5zdGF0cy5hZGRpdGlvbmFsQWJpbGl0aWVzKT09bnVsbD92b2lkIDA6ZC5tYXAoQz0+KHtuYW1lOkMubmFtZSxkZXNjOkMuZGVzY3JpcHRpb24ucmVwbGFjZSgvPFtePl0qPi9nLFxcXCJcXFwiKX0pKSkhPW51bGw/RzpbXSxhY3Rpb25zOihMPShBPWcuc3RhdHMuYWN0aW9ucyk9PW51bGw/dm9pZCAwOkEubWFwKEM9Pih7bmFtZTpDLm5hbWUsZGVzYzpDLmRlc2NyaXB0aW9uLnJlcGxhY2UoLzxbXj5dKj4vZyxcXFwiXFxcIil9KSkpIT1udWxsP0w6W10scmVhY3Rpb25zOihqPSh3PWcuc3RhdHMucmVhY3Rpb25zKT09bnVsbD92b2lkIDA6dy5tYXAoQz0+KHtuYW1lOkMubmFtZSxkZXNjOkMuZGVzY3JpcHRpb24ucmVwbGFjZSgvPFtePl0qPi9nLFxcXCJcXFwiKX0pKSkhPW51bGw/ajpbXSxsZWdlbmRhcnlfYWN0aW9uczooej0oSj1nLnN0YXRzLmxlZ2VuZGFyeUFjdGlvbnMpPT1udWxsP3ZvaWQgMDpKLm1hcChDPT4oe25hbWU6Qy5uYW1lLGRlc2M6Qy5kZXNjcmlwdGlvbi5yZXBsYWNlKC88W14+XSo+L2csXFxcIlxcXCIpfSkpKSE9bnVsbD96OltdfTtzLnB1c2goZWUpfWNhdGNoKGVlKXtjb250aW51ZX1lKHMpfWNhdGNoKFYpe24oKX19LHIucmVhZEFzVGV4dCh0KX0pfWZ1bmN0aW9uIEFlKHQsZT0wLG49XFxcIiBcXFwiLHI9ITApe2xldCBpPVtdO2lmKGU9PTV8fHQ9PW51bGwpcmV0dXJuXFxcIlxcXCI7aWYodHlwZW9mIHQ9PVxcXCJzdHJpbmdcXFwiKXJldHVybiB0O2lmKHR5cGVvZiB0PT1cXFwibnVtYmVyXFxcIilyZXR1cm5gJHt0fWA7aWYoQXJyYXkuaXNBcnJheSh0KSlpLnB1c2goYCR7cj9cXFwiKFxcXCI6XFxcIlxcXCJ9JHt0Lm1hcChzPT5BZShzLGUrKykpLmpvaW4obil9JHtyP1xcXCIpXFxcIjpcXFwiXFxcIn1gKTtlbHNlIGlmKHR5cGVvZiB0PT1cXFwib2JqZWN0XFxcIilmb3IobGV0IHMgb2YgT2JqZWN0LnZhbHVlcyh0KSlpLnB1c2goQWUocyxlKyspKTtyZXR1cm4gaS5qb2luKFxcXCIgXFxcIil9dmFyIGVyPXtzdHI6XFxcInN0cmVuZ3RoXFxcIixkZXg6XFxcImRleHRlcml0eVxcXCIsY29uOlxcXCJjb25zdGl0dXRpb25cXFwiLHdpczpcXFwid2lzZG9tXFxcIixpbnQ6XFxcImludGVsbGlnZW5jZVxcXCIsY2hhOlxcXCJjaGFyaXNtYVxcXCJ9O2Z1bmN0aW9uIEsodCl7cmV0dXJuIHQ/dC5yZXBsYWNlKC97QGNvbmRpdGlvbiAoLis/KX0vZyxcXFwiJDFcXFwiKS5yZXBsYWNlKC97QGl0ZW0gKC4rPyl9L2csXFxcIiQxXFxcIikucmVwbGFjZSgve0BzcGVsbCAoW1xcXFxzXFxcXFNdKz8pfS9nLFxcXCIkMVxcXCIpLnJlcGxhY2UoL3tAcmVjaGFyZ2UgKC4rPyl9L2csXFxcIihSZWNoYXJnZSAkMS02KVxcXCIpLnJlcGxhY2UoL3tAcmVjaGFyZ2V9L2csXFxcIihSZWNoYXJnZSA2KVxcXCIpLnJlcGxhY2UoL3tAaH0vZyxcXFwiXFxcIikucmVwbGFjZSgve0BkYW1hZ2UgKC4rPyl9L2csXFxcIiQxXFxcIikucmVwbGFjZSgve0BhdGsgbXN9L2csXFxcIk1lbGVlIFNwZWxsIEF0dGFja1xcXCIpLnJlcGxhY2UoL3tAYXRrIHJzfS9nLFxcXCJSYW5nZWQgU3BlbGwgQXR0YWNrXFxcIikucmVwbGFjZSgve0BhdGsgbXd9L2csXFxcIk1lbGVlIFdlYXBvbiBBdHRhY2tcXFwiKS5yZXBsYWNlKC97QGF0ayByd30vZyxcXFwiUmFuZ2VkIFdlYXBvbiBBdHRhY2tcXFwiKS5yZXBsYWNlKC97QGF0ayBtdyxyd30vZyxcXFwiTWVsZWUgLyBSYW5nZWQgV2VhcG9uIEF0dGFja1xcXCIpLnJlcGxhY2UoL3tAY3JlYXR1cmUgKC4rPyl9L2csXFxcIiQxXFxcIikucmVwbGFjZSgve0Bza2lsbCAoLis/KX0vZyxcXFwiJDFcXFwiKS5yZXBsYWNlKC97QGRpY2UgKC4rPyl9L2csXFxcIiQxXFxcIikucmVwbGFjZSgve0BoaXQgKFxcXFxkKz8pfS9nLFxcXCIrJDFcXFwiKS5yZXBsYWNlKC97QGRjIChcXFxcZCs/KX0vZyxcXFwiJDFcXFwiKS5yZXBsYWNlKC97QHF1aWNrcmVmICguKz8pXFxcXHxcXFxcfC4rP30vLFxcXCIkMVxcXCIpOlxcXCJcXFwifWFzeW5jIGZ1bmN0aW9uIHBuKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZSxuKT0+e2xldCByPW5ldyBGaWxlUmVhZGVyO3Iub25sb2FkPWFzeW5jIGk9Pnt2YXIgcyxvLGwsdSxhLGYsaCxTLEUseSxSLHYsTSxQLGI7dHJ5e2xldCBUPUpTT04ucGFyc2UoaS50YXJnZXQucmVzdWx0KSxVPVtdO1xcXCJtb25zdGVyXFxcImluIFQ/VT1ULm1vbnN0ZXI6QXJyYXkuaXNBcnJheShUKT9VPVQ6dHlwZW9mIFQ9PVxcXCJvYmplY3RcXFwiP1U9W1RdOm4oXFxcIkludmFsaWQgbW9uc3RlciBKU09OIHByb3ZpZGVkLlxcXCIpO2xldCBXPVtdO2ZvcihsZXQgZCBvZiBVKXRyeXtpZighZC5uYW1lKWNvbnRpbnVlO2xldCBHPXtpbWFnZTpudWxsLG5hbWU6ZC5uYW1lLHNvdXJjZTptcihkKSx0eXBlOnRyKGQudHlwZSksc3VidHlwZTpcXFwiXFxcIixzaXplOihzPWQuc2l6ZSkhPW51bGwmJnMubGVuZ3RoP19yWyhvPWQuc2l6ZSk9PW51bGw/dm9pZCAwOm9bMF1dOm51bGwsYWxpZ25tZW50OmxyKGQpLGhwOmQuaHAmJlxcXCJhdmVyYWdlXFxcImluIGQuaHA/KGw9ZC5ocCk9PW51bGw/dm9pZCAwOmwuYXZlcmFnZTpudWxsLGhpdF9kaWNlOmQuaHAmJlxcXCJmb3JtdWxhXFxcImluIGQuaHA/KHU9ZC5ocCk9PW51bGw/dm9pZCAwOnUuZm9ybXVsYTpcXFwiXFxcIixhYzppcihkLmFjKSxzcGVlZDp1cihkKSxzdGF0czpbZC5zdHIsZC5kZXgsZC5jb24sZC5pbnQsZC53aXMsZC5jaGFdLGRhbWFnZV9pbW11bml0aWVzOksoZmUoZC5pbW11bmUpKSxkYW1hZ2VfcmVzaXN0YW5jZXM6SyhmZShkLnJlc2lzdCkpLGRhbWFnZV92dWxuZXJhYmlsaXRpZXM6SyhmZShkLnZ1bG5lcmFibGUpKSxjb25kaXRpb25faW1tdW5pdGllczpLKGZlKGQuY29uZGl0aW9uSW1tdW5lKSksc2F2ZXM6T2JqZWN0LmVudHJpZXMoKGE9ZC5zYXZlKSE9bnVsbD9hOnt9KS5tYXAoQT0+e3ZhciB3LGo7aWYoIUF8fCFBWzFdKXJldHVybjtsZXRbLExdPShqPSh3PUFbMV0pPT1udWxsP3ZvaWQgMDp3Lm1hdGNoKC8uKj8oXFxcXGQrKS8pKSE9bnVsbD9qOltdO2lmKCEhTClyZXR1cm57W2VyW0FbMF1dXTpMfX0pLmZpbHRlcihBPT5BKSxza2lsbHNhdmVzOm1hKGQpLHNlbnNlczpmcihkKSxsYW5ndWFnZXM6QWUoZC5sYW5ndWFnZXMsMCxcXFwiLCBcXFwiLCExKSxjcjpucihkLmNyKSx0cmFpdHM6KGg9KGY9ZC50cmFpdCk9PW51bGw/dm9pZCAwOmYuZmxhdE1hcChUZSkpIT1udWxsP2g6W10sYWN0aW9uczooRT0oUz1kLmFjdGlvbik9PW51bGw/dm9pZCAwOlMuZmxhdE1hcChUZSkpIT1udWxsP0U6W10sYm9udXNfYWN0aW9uczooUj0oeT1kLmJvbnVzKT09bnVsbD92b2lkIDA6eS5mbGF0TWFwKFRlKSkhPW51bGw/UjpbXSxyZWFjdGlvbnM6KE09KHY9ZC5yZWFjdGlvbik9PW51bGw/dm9pZCAwOnYuZmxhdE1hcChUZSkpIT1udWxsP006W10sbGVnZW5kYXJ5X2FjdGlvbnM6KGI9KFA9ZC5sZWdlbmRhcnkpPT1udWxsP3ZvaWQgMDpQLmZsYXRNYXAoVGUpKSE9bnVsbD9iOltdLHNwZWxsczpjcihkKSxzcGVsbHNOb3RlczpycihkKS5qb2luKFxcXCIgXFxcIil9O1cucHVzaChHKX1jYXRjaChHKXtjb25zb2xlLmVycm9yKEcpO2NvbnRpbnVlfWUoVyl9Y2F0Y2goVCl7Y29uc29sZS5lcnJvcihcXFwicmVqZWN0ISEhXFxcIixUKSxuKFQpfX0sci5yZWFkQXNUZXh0KHQpfSl9ZnVuY3Rpb24gdHIodCl7aWYoISF0KXJldHVybiB0eXBlb2YgdD09XFxcInN0cmluZ1xcXCI/dDp0LnR5cGV9ZnVuY3Rpb24gbnIodCl7aWYoISF0KXJldHVybiB0eXBlb2YgdD09XFxcInN0cmluZ1xcXCI/dDp0LmNyfWZ1bmN0aW9uIHJyKHQpe2xldCBlPVtdO2ZvcihsZXQgbiBpbiB0LnNwZWxsY2FzdGluZyllLnB1c2goQWUodC5zcGVsbGNhc3Rpbmdbbl0uZm9vdGVyRW50cmllcywwLFxcXCIsIFxcXCIsITEpKTtyZXR1cm4gZX1mdW5jdGlvbiBmZSh0KXtpZighdClyZXR1cm5cXFwiXFxcIjtsZXQgZT1bXTtmb3IobGV0IG4gb2YgdCl7aWYodHlwZW9mIG49PVxcXCJzdHJpbmdcXFwiKXtlLnB1c2gobik7Y29udGludWV9aWYoXFxcInNwZWNpYWxcXFwiaW4gbil7ZS5wdXNoKG4uc3BlY2lhbCk7Y29udGludWV9aWYoXFxcImltbXVuZVxcXCJpbiBuKXtlLnB1c2goYCR7ZmUobi5pbW11bmUpfSR7bi5ub3RlP1xcXCIgXFxcIjpcXFwiXFxcIn0ke24ubm90ZT9uLm5vdGU6XFxcIlxcXCJ9YCk7Y29udGludWV9aWYoXFxcInJlc2lzdFxcXCJpbiBuKXtlLnB1c2goYCR7ZmUobi5yZXNpc3QpfSR7bi5ub3RlP1xcXCIgXFxcIjpcXFwiXFxcIn0ke24ubm90ZT9uLm5vdGU6XFxcIlxcXCJ9YCk7Y29udGludWV9fXJldHVybiBlLmpvaW4oXFxcIiwgXFxcIil9ZnVuY3Rpb24gaXIodD1bXSl7dmFyIG47bGV0W2VdPXQ7aWYoISFlKXtpZih0eXBlb2YgZT09XFxcIm51bWJlclxcXCIpcmV0dXJuIGU7aWYodHlwZW9mIGU9PVxcXCJzdHJpbmdcXFwiKXtsZXRbcixpXT0obj1lLm1hdGNoKC8oXFxcXGQrKS8pKSE9bnVsbD9uOltdO3JldHVybiBpP051bWJlcihpKTpudWxsfWlmKHR5cGVvZiBlPT1cXFwib2JqZWN0XFxcIilyZXR1cm5cXFwic3BlY2lhbFxcXCJpbiBlP251bGw6ZS5hY319dmFyIHNyPXswOlxcXCJDYW50cmlwcyAoYXQgd2lsbClcXFwiLDE6XFxcIjFzdCBsZXZlbFxcXCIsMjpcXFwiMm5kIGxldmVsXFxcIiwzOlxcXCIzcmQgbGV2ZWxcXFwiLDQ6XFxcIjR0aCBsZXZlbFxcXCIsNTpcXFwiNXRoIGxldmVsXFxcIiw2OlxcXCI2dGggbGV2ZWxcXFwiLDc6XFxcIjd0aCBsZXZlbFxcXCIsODpcXFwiOHRoIGxldmVsXFxcIiw5OlxcXCI5dGggbGV2ZWxcXFwifTtmdW5jdGlvbiBaZSh0KXtsZXQgZT1bXTtmb3IobGV0IG4gb2YgdCl7aWYodHlwZW9mIG49PVxcXCJzdHJpbmdcXFwiKXtlLnB1c2gobik7Y29udGludWV9IW4uaGlkZGVuJiZuLmVudHJ5JiZuLmVudHJ5Lmxlbmd0aCYmZS5wdXNoKG4uZW50cnkpfXJldHVybiBLKGUuam9pbihcXFwiLCBcXFwiKSl9ZnVuY3Rpb24gYXIodCl7bGV0IGU9W107Zm9yKGxldCBuIG9mIE9iamVjdC5rZXlzKHQpKXtsZXQgcj10W25dLGk9TnVtYmVyKG4ucmVwbGFjZSgvW14wLTldLyxcXFwiXFxcIikpO2UucHVzaChbaSxaZShyKV0pfXJldHVybiBlfWZ1bmN0aW9uIG9yKHQpe3ZhciBpLHM7bGV0IGU9W0soKChpPXQuaGVhZGVyRW50cmllcykhPW51bGw/aTpbXSkuam9pbihgXFxuYCkpXTtpZihcXFwic3BlbGxzXFxcImluIHQpdHJ5e2ZvcihsZXQgbyBpbihzPXQuc3BlbGxzKSE9bnVsbD9zOnt9KXtsZXQgbD10LnNwZWxsc1tvXSx7c3BlbGxzOnV9PWwsYT1gJHtzcltvXX1gO2ErPVxcXCJzbG90c1xcXCJpbiBsP2AgKCR7bC5zbG90c30gc2xvdHMpYDpcXFwiXFxcIjtsZXQgZj1LKHUuam9pbihcXFwiLCBcXFwiKSk7ZS5wdXNoKHtbYV06Zn0pfX1jYXRjaChvKXt0aHJvdyBuZXcgRXJyb3IoXFxcIlRoZXJlIHdhcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBzcGVsbHMuXFxcIil9aWYoXFxcIndpbGxcXFwiaW4gdCYmdC53aWxsLmxlbmd0aD4wKXRyeXtlLnB1c2goe1xcXCJBdCB3aWxsXFxcIjpaZSh0LndpbGwpfSl9Y2F0Y2gobyl7dGhyb3cgbmV3IEVycm9yKFxcXCJUaGVyZSB3YXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgYXQtd2lsbCBzcGVsbHMuXFxcIil9aWYoXFxcInJpdHVhbFxcXCJpbiB0JiZ0LnJpdHVhbC5sZW5ndGg+MCl0cnl7ZS5wdXNoKHtSaXR1YWxzOlplKHQucml0dWFsKX0pfWNhdGNoKG8pe3Rocm93IG5ldyBFcnJvcihcXFwiVGhlcmUgd2FzIGFuIGVycm9yIHBhcnNpbmcgdGhlIHJpdHVhbCBzcGVsbHMuXFxcIil9bGV0IG49W1xcXCJyZXN0XFxcIixcXFwiZGFpbHlcXFwiLFxcXCJ3ZWVrbHlcXFwiLFxcXCJ5ZWFybHlcXFwiLFxcXCJjaGFyZ2VzXFxcIl0scj17cmVzdDpcXFwiL3Jlc3QgZWFjaFxcXCIsZGFpbHk6XFxcIi9kYXkgZWFjaFxcXCIsd2Vla2x5OlxcXCIvd2VlayBlYWNoXFxcIix5ZWFybHk6XFxcIi95ZWFyIGVhY2hcXFwiLGNoYXJnZXM6XFxcIiBjaGFyZ2VzXFxcIn07Zm9yKGxldCBvIG9mIG4paWYobyBpbiB0KXtsZXQgbD1hcih0W29dKTtmb3IobGV0IHUgb2YgbC5zb3J0KChhLGYpPT5mWzBdLWFbMF0pKWUucHVzaCh7W2Ake3VbMF19JHtyW29dfWBdOnVbMV19KX1yZXR1cm4gZX1mdW5jdGlvbiBjcih0KXtyZXR1cm4hdC5zcGVsbGNhc3Rpbmd8fCF0LnNwZWxsY2FzdGluZy5sZW5ndGg/W106dC5zcGVsbGNhc3RpbmcuZmxhdE1hcChvcil9ZnVuY3Rpb24gbHIodCl7cmV0dXJuIHQuYWxpZ25tZW50P1FlKHQuYWxpZ25tZW50KTpudWxsfWZ1bmN0aW9uIFFlKHQpe3ZhciBuO2lmKCF0KXJldHVybiBudWxsO2xldCBlPVtdO2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKGxldCByIG9mIHQpZS5wdXNoKFFlKHIpKTtlbHNlIGlmKHR5cGVvZiB0PT1cXFwib2JqZWN0XFxcIil7aWYoXFxcInNwZWNpYWxcXFwiaW4gdCYmdC5zcGVjaWFsIT1udWxsKXJldHVybiB0LnNwZWNpYWw7aWYoXFxcImFsaWdubWVudFxcXCJpbiB0KXJldHVybmAkeygobj10LmFsaWdubWVudCkhPW51bGw/bjpbXSkubWFwKHI9PlFlKHIpKS5qb2luKFxcXCIgXFxcIil9JHt0LmNoYW5jZT9gICgke3QuY2hhbmNlfSUpYDpcXFwiXFxcIn0ke3Qubm90ZT9gICgke3Qubm90ZX0pYDpcXFwiXFxcIn1gfWVsc2V7c3dpdGNoKHQudG9VcHBlckNhc2UoKSl7Y2FzZVxcXCJMXFxcIjpyZXR1cm5cXFwibGF3ZnVsXFxcIjtjYXNlXFxcIk5cXFwiOnJldHVyblxcXCJuZXV0cmFsXFxcIjtjYXNlXFxcIk5YXFxcIjpyZXR1cm5cXFwibmV1dHJhbCAobGF3L2NoYW9zIGF4aXMpXFxcIjtjYXNlXFxcIk5ZXFxcIjpyZXR1cm5cXFwibmV1dHJhbCAoZ29vZC9ldmlsIGF4aXMpXFxcIjtjYXNlXFxcIkNcXFwiOnJldHVyblxcXCJjaGFvdGljXFxcIjtjYXNlXFxcIkdcXFwiOnJldHVyblxcXCJnb29kXFxcIjtjYXNlXFxcIkVcXFwiOnJldHVyblxcXCJldmlsXFxcIjtjYXNlXFxcIlVcXFwiOnJldHVyblxcXCJ1bmFsaWduZWRcXFwiO2Nhc2VcXFwiQVxcXCI6cmV0dXJuXFxcImFueSBhbGlnbm1lbnRcXFwifXJldHVybiB0fXJldHVybiBlLmpvaW4oXFxcIiBvciBcXFwiKX1mdW5jdGlvbiB1cih0KXt2YXIgbCx1O2xldCBlPXQuc3BlZWQ7aWYoIWUpcmV0dXJuXFxcIlxcXFx1MjAxNFxcXCI7aWYodHlwZW9mIGU9PVxcXCJudW1iZXJcXFwiKXJldHVybmAke2V9YDtmdW5jdGlvbiBuKGEpe3JldHVybiB0eXBlb2YgYT09XFxcIm51bWJlclxcXCI/YTphLm51bWJlciE9bnVsbD9hLm51bWJlcjphfWZ1bmN0aW9uIHIoYSl7dmFyIGY7cmV0dXJuIHR5cGVvZiBhPT1cXFwibnVtYmVyXFxcIj9cXFwiXFxcIjooZj1hPT1udWxsP3ZvaWQgMDphLmNvbmRpdGlvbikhPW51bGw/ZjpcXFwiXFxcIn1sZXQgaT1bXSxzPVtcXFwid2Fsa1xcXCIsXFxcImJ1cnJvd1xcXCIsXFxcImNsaW1iXFxcIixcXFwiZmx5XFxcIixcXFwic3dpbVxcXCJdO2ZvcihsZXQgYSBvZiBzKXtpZihhIT1cXFwid2Fsa1xcXCImJiEoYSBpbiBlKSYmIShhIGluKChsPWUuYWx0ZXJuYXRlKSE9bnVsbD9sOnt9KSkpY29udGludWU7bGV0IGY9W107aS5wdXNoKGAke2E9PT1cXFwid2Fsa1xcXCI/XFxcIlxcXCI6YCR7YX0gYH0ke24oKHU9ZVthXSkhPW51bGw/dTowKX0gZnQuICR7cihlW2FdKX1gLnRyaW0oKSksZS5hbHRlcm5hdGUmJmUuYWx0ZXJuYXRlW2FdJiZlLmFsdGVybmF0ZVthXS5mb3JFYWNoKGg9PntpLnB1c2goYCR7YT09PVxcXCJ3YWxrXFxcIj9cXFwiXFxcIjpgJHthfSBgfSR7bihoIT1udWxsP2g6MCl9IGZ0LiAke3IoaCl9YC50cmltKCkpfSl9bGV0IG89XFxcIiwgXFxcIjtpZihlLmNob29zZSl7bz1cXFwiOyBcXFwiO2xldCBhPWUuY2hvb3NlLmZyb20uc29ydCgpO2EubGVuZ3RoPjE/KGAke2Euc2xpY2UoMCxhLmxlbmd0aC0xKS5qb2luKFxcXCIsIFxcXCIpfSR7YVthLmxlbmd0aC0xXX0ke2UuY2hvb3NlLmFtb3VudH1gLGUuY2hvb3NlLm5vdGUmJmAke2UuY2hvb3NlLm5vdGV9YCk6aS5wdXNoKGAke2F9ICR7ZS5jaG9vc2UuYW1vdW50fSBmdC4ke2UuY2hvb3NlLm5vdGU/YCAke2UuY2hvb3NlLm5vdGV9YDpcXFwiXFxcIn1gKX1yZXR1cm4gaS5qb2luKG8pfWZ1bmN0aW9uIGZyKHQpe3ZhciBuLHI7aWYodHlwZW9mIHQuc2Vuc2VzPT1cXFwic3RyaW5nXFxcIilyZXR1cm4gdC5zZW5zZXM7bGV0IGU9WyhyPShuPXQuc2Vuc2VzKT09bnVsbD92b2lkIDA6bi5qb2luKFxcXCIsIFxcXCIpLnRyaW0oKSkhPW51bGw/cjpcXFwiXFxcIl07cmV0dXJuIHQucGFzc2l2ZSYmZS5wdXNoKGBwYXNzaXZlIFBlcmNlcHRpb24gJHt0LnBhc3NpdmV9YCksZS5qb2luKFxcXCIsIFxcXCIpfWZ1bmN0aW9uIG1yKHQpe3ZhciBuLHIsaTtsZXQgZT1bXTtyZXR1cm4obj10LnNvdXJjZSkhPW51bGwmJm4ubGVuZ3RoJiZlLnB1c2goKHI9Y1t0LnNvdXJjZV0pIT1udWxsP3I6dC5zb3VyY2UpLChpPXQub3RoZXJTb3VyY2VzKSE9bnVsbCYmaS5sZW5ndGgmJmUucHVzaCguLi50Lm90aGVyU291cmNlcy5tYXAocz0+e3ZhciBvO3JldHVybihvPWNbcy5zb3VyY2VdKSE9bnVsbD9vOnMuc291cmNlfSkpLGV9ZnVuY3Rpb24gVGUodCl7cmV0dXJuIHQuZW50cmllcy5yZWR1Y2UoKG4scik9Pnt2YXIgcztpZih0eXBlb2YgciE9XFxcInN0cmluZ1xcXCIpe2xldCBvPShzPXIuaXRlbXMpPT1udWxsP3ZvaWQgMDpzLm1hcChsPT50eXBlb2YgbD09XFxcInN0cmluZ1xcXCI/e25hbWU6bCxlbnRyaWVzOltdfTpcXFwiZW50cnlcXFwiaW4gbD97bmFtZTpsLm5hbWUsZW50cmllczpbbC5lbnRyeV19OntuYW1lOmwubmFtZSxlbnRyaWVzOmwuZW50cmllc30pO3JldHVybiBuLmNvbmNhdChvIT1udWxsP286W10pfXJldHVybiBuLmxlbmd0aD4xfHxuWzBdLmVudHJpZXMucHVzaChyKSxufSxbe25hbWU6dC5uYW1lLGVudHJpZXM6W119XSkubWFwKCh7bmFtZTpuLGVudHJpZXM6cn0pPT4oe25hbWU6SyhuKSxkZXNjOksoci5qb2luKGBcXG5gKSl9KSl9dmFyIHByPVxcXCJGXFxcIixocj1cXFwiRFxcXCIsZ3I9XFxcIlRcXFwiLGRyPVxcXCJTXFxcIixTcj1cXFwiTVxcXCIsdnI9XFxcIkxcXFwiLHlyPVxcXCJIXFxcIixScj1cXFwiR1xcXCIsQ3I9XFxcIkNcXFwiLEVyPVxcXCJWXFxcIixfcj17W3ByXTpcXFwiRmluZVxcXCIsW2hyXTpcXFwiRGltaW51dGl2ZVxcXCIsW2dyXTpcXFwiVGlueVxcXCIsW2RyXTpcXFwiU21hbGxcXFwiLFtTcl06XFxcIk1lZGl1bVxcXCIsW3ZyXTpcXFwiTGFyZ2VcXFwiLFt5cl06XFxcIkh1Z2VcXFwiLFtScl06XFxcIkdhcmdhbnR1YW5cXFwiLFtDcl06XFxcIkNvbG9zc2FsXFxcIixbRXJdOlxcXCJWYXJpZXNcXFwifSxBcj1cXFwiQ29TXFxcIixUcj1cXFwiRE1HXFxcIixOcj1cXFwiRUVQQ1xcXCIsYnI9XFxcIkVFVFxcXCIsd3I9XFxcIkhvdERRXFxcIixEcj1cXFwiTE1vUFxcXCIsJHI9XFxcIk1hZ1xcXCIseHI9XFxcIk1NXFxcIixNcj1cXFwiT290QVxcXCIsT3I9XFxcIlBIQlxcXCIsSXI9XFxcIlBvdEFcXFwiLFByPVxcXCJSb1RcXFwiLGtyPVxcXCJSb1RPU1xcXCIsRnI9XFxcIlNDQUdcXFwiLFVyPVxcXCJTS1RcXFwiLExyPVxcXCJUb0FcXFwiLFdyPVxcXCJUb0RcXFwiLEdyPVxcXCJUVFBcXFwiLGpyPVxcXCJUZnRZUFxcXCIsQnI9XFxcIlRmdFlQLUF0R1xcXCIsVnI9XFxcIlRmdFlQLURpVFxcXCIsenI9XFxcIlRmdFlQLVRGb0ZcXFwiLEhyPVxcXCJUZnRZUC1USFNvVFxcXCIsS3I9XFxcIlRmdFlQLVRTQ1xcXCIsWXI9XFxcIlRmdFlQLVRvSFxcXCIsWHI9XFxcIlRmdFlQLVdQTVxcXCIscXI9XFxcIlZHTVxcXCIsWnI9XFxcIlhHRVxcXCIsUXI9XFxcIk9HQVxcXCIsSnI9XFxcIk1URlxcXCIsZWk9XFxcIldESFxcXCIsdGk9XFxcIldETU1cXFwiLG5pPVxcXCJHR1JcXFwiLHJpPVxcXCJLS1dcXFwiLGlpPVxcXCJMTEtcXFwiLHNpPVxcXCJHb1NcXFwiLGFpPVxcXCJBSVxcXCIsb2k9XFxcIk9vV1xcXCIsY2k9XFxcIkVTS1xcXCIsbGk9XFxcIkRJUFxcXCIsdWk9XFxcIkhmdFRcXFwiLGZpPVxcXCJEQ1xcXCIsbWk9XFxcIlNMV1xcXCIscGk9XFxcIlNEV1xcXCIsaGk9XFxcIkJHRElBXFxcIixnaT1cXFwiTFJcXFwiLGRpPVxcXCJBTFxcXCIsU2k9XFxcIlNBQ1xcXCIsdmk9XFxcIkVSTFdcXFwiLHlpPVxcXCJFRlJcXFwiLFJpPVxcXCJSTUJSRVxcXCIsQ2k9XFxcIlJNUlxcXCIsRWk9XFxcIk1GRlxcXCIsX2k9XFxcIkFXTVxcXCIsQWk9XFxcIklNUlxcXCIsVGk9XFxcIlNBRFNcXFwiLE5pPVxcXCJFR1dcXFwiLGJpPVxcXCJUb1JcXFwiLHdpPVxcXCJERFxcXCIsRGk9XFxcIkZTXFxcIiwkaT1cXFwiVVNcXFwiLHhpPVxcXCJNT1RcXFwiLE1pPVxcXCJJRFJvdEZcXFwiLE9pPVxcXCJUQ0VcXFwiLElpPVxcXCJWUkdSXFxcIixQaT1cXFwiSG9MXFxcIixraT1cXFwiU2NyZWVuXFxcIixGaT1cXFwiU2NyZWVuV2lsZGVybmVzc0tpdFxcXCIsVWk9XFxcIkhGXFxcIixMaT1cXFwiQ01cXFwiLFdpPVxcXCJXQnRXXFxcIixHaT1cXFwiQ1JDb3ROXFxcIixKZT1cXFwiQUxcXFwiLGppPWAke0plfUN1cnNlT2ZTdHJhaGRgLEJpPWAke0plfUVsZW1lbnRhbEV2aWxgLFZpPWAke0plfVJhZ2VPZkRlbW9uc2AsbWU9XFxcIlBTXFxcIix6aT1gJHttZX1BYCxIaT1gJHttZX1JYCxLaT1gJHttZX1LYCxZaT1gJHttZX1aYCxYaT1gJHttZX1YYCxxaT1gJHttZX1EYCxtPVxcXCJVQVxcXCIsWmk9YCR7bX1BcnRpZmljZXJgLFFpPWAke219RWxhZHJpbkFuZEdpdGhgLEppPWAke219RWJlcnJvbmAsZXM9YCR7bX1GZWF0c0ZvclJhY2VzYCx0cz1gJHttfUZlYXRzRm9yU2tpbGxzYCxucz1gJHttfUZpZW5kaXNoT3B0aW9uc2AscnM9YCR7bX1GZWF0c2AsaXM9YCR7bX1Hb3RoaWNIZXJvZXNgLHNzPWAke219TW9kZXJuTWFnaWNgLGFzPWAke219U3RhcnRlclNwZWxsc2Asb3M9YCR7bX1UaGVNeXN0aWNDbGFzc2AsY3M9YCR7bX1UaGF0T2xkQmxhY2tNYWdpY2AsbHM9YCR7bX1UaGVSYW5nZXJSZXZpc2VkYCx1cz1gJHttfVdhdGVyYm9ybmVBZHZlbnR1cmVzYCxmcz1gJHttfVZhcmlhbnRSdWxlc2AsbXM9YCR7bX1MaWdodERhcmtVbmRlcmRhcmtgLHBzPWAke219UmFuZ2VyQW5kUm9ndWVgLGhzPWAke219QVRyaW9PZlN1YmNsYXNzZXNgLGdzPWAke219QmFyYmFyaWFuUHJpbWFsUGF0aHNgLGRzPWAke219UmV2aXNlZFN1YmNsYXNzZXNgLFNzPWAke219S2l0c09mT2xkYCx2cz1gJHttfUJhcmRCYXJkQ29sbGVnZXNgLHlzPWAke219Q2xlcmljRGl2aW5lRG9tYWluc2AsUnM9YCR7bX1EcnVpZGAsQ3M9YCR7bX1SZXZpc2VkQ2xhc3NPcHRpb25zYCxFcz1gJHttfUZpZ2h0ZXJgLF9zPWAke219TW9ua2AsQXM9YCR7bX1QYWxhZGluYCxUcz1gJHttfU1vZGlmeWluZ0NsYXNzZXNgLE5zPWAke219U29yY2VyZXJgLGJzPWAke219V2FybG9ja0FuZFdpemFyZGAsd3M9YCR7bX1UaGVGYWl0aGZ1bGAsRHM9YCR7bX1XaXphcmRSZXZpc2l0ZWRgLCRzPWAke219RWxmU3VicmFjZXNgLHhzPWAke219TWFzc0NvbWJhdGAsTXM9YCR7bX1UaHJlZVBpbGxhckV4cGVyaWVuY2VgLE9zPWAke219R3JleWhhd2tJbml0aWF0aXZlYCxJcz1gJHttfVRocmVlU3ViY2xhc3Nlc2AsUHM9YCR7bX1PcmRlckRvbWFpbmAsa3M9YCR7bX1DZW50YXVyc01pbm90YXVyc2AsRnM9YCR7bX1HaWFudFNvdWxTb3JjZXJlcmAsVXM9YCR7bX1SYWNlc09mRWJlcnJvbmAsTHM9YCR7bX1SYWNlc09mUmF2bmljYWAsV3M9YCR7bX1XR0VgLEdzPWAke219T2ZTaGlwc0FuZFNlYWAsanM9YCR7bX1TaWRla2lja3NgLEJzPWAke219QXJ0aWZpY2VyUmV2aXNpdGVkYCxWcz1gJHttfUJhcmJhcmlhbkFuZE1vbmtgLHpzPWAke219U29yY2VyZXJBbmRXYXJsb2NrYCxIcz1gJHttfUJhcmRBbmRQYWxhZGluYCxLcz1gJHttfUNsZXJpY0RydWlkV2l6YXJkYCxZcz1gJHttfUZpZ2h0ZXJSYW5nZXJSb2d1ZWAsWHM9YCR7bX1DbGFzc0ZlYXR1cmVWYXJpYW50c2AscXM9YCR7bX1GaWdodGVyUm9ndWVXaXphcmRgLFpzPWAke219UHJlc3RpZ2VDbGFzc2VzUnVuTWFnaWNgLFFzPWAke219UmFuZ2VyYCxKcz1gJHttfTIwMjBTdWJjbGFzc2VzUHQxYCxlYT1gJHttfTIwMjBTdWJjbGFzc2VzUHQyYCx0YT1gJHttfTIwMjBTdWJjbGFzc2VzUHQzYCxuYT1gJHttfTIwMjBTdWJjbGFzc2VzUHQ0YCxyYT1gJHttfTIwMjBTdWJjbGFzc2VzUHQ1YCxpYT1gJHttfTIwMjBTcGVsbHNBbmRNYWdpY1RhdHRvb3NgLHNhPWAke219MjAyMFBzaW9uaWNPcHRpb25zUmV2aXNpdGVkYCxhYT1gJHttfTIwMjBTdWJjbGFzc2VzUmV2aXNpdGVkYCxvYT1gJHttfTIwMjBGZWF0c2AsY2E9YCR7bX0yMDIxR290aGljTGluZWFnZXNgLGxhPWAke219MjAyMUZvbGtPZlRoZUZleXdpbGRgLHVhPWAke219MjAyMURyYWNvbmljT3B0aW9uc2AsZmE9YCR7bX0yMDIxTWFnZXNPZlN0cml4aGF2ZW5gLGV0PVxcXCJBZHZlbnR1cmVycyBMZWFndWU6IFxcXCIscGU9XFxcIlBsYW5lIFNoaWZ0OiBcXFwiLHA9XFxcIlVuZWFydGhlZCBBcmNhbmE6IFxcXCIsUT1cXFwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcXFwiLGM9e307Y1tBcl09XFxcIkN1cnNlIG9mIFN0cmFoZFxcXCI7Y1tUcl09XFxcIkR1bmdlb24gTWFzdGVyJ3MgR3VpZGVcXFwiO2NbTnJdPVxcXCJFbGVtZW50YWwgRXZpbCBQbGF5ZXIncyBDb21wYW5pb25cXFwiO2NbYnJdPVxcXCJFbGVtZW50YWwgRXZpbDogVHJpbmtldHNcXFwiO2Nbd3JdPVxcXCJIb2FyZCBvZiB0aGUgRHJhZ29uIFF1ZWVuXFxcIjtjW0RyXT1cXFwiTG9zdCBNaW5lIG9mIFBoYW5kZWx2ZXJcXFwiO2NbJHJdPVxcXCJEcmFnb24gTWFnYXppbmVcXFwiO2NbeHJdPVxcXCJNb25zdGVyIE1hbnVhbFxcXCI7Y1tNcl09XFxcIk91dCBvZiB0aGUgQWJ5c3NcXFwiO2NbT3JdPVxcXCJQbGF5ZXIncyBIYW5kYm9va1xcXCI7Y1tJcl09XFxcIlByaW5jZXMgb2YgdGhlIEFwb2NhbHlwc2VcXFwiO2NbUHJdPVxcXCJUaGUgUmlzZSBvZiBUaWFtYXRcXFwiO2Nba3JdPVxcXCJUaGUgUmlzZSBvZiBUaWFtYXQgT25saW5lIFN1cHBsZW1lbnRcXFwiO2NbRnJdPVxcXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcXFwiO2NbVXJdPVxcXCJTdG9ybSBLaW5nJ3MgVGh1bmRlclxcXCI7Y1tMcl09XFxcIlRvbWIgb2YgQW5uaWhpbGF0aW9uXFxcIjtjW1dyXT1cXFwiVHlyYW5ueSBvZiBEcmFnb25zXFxcIjtjW0dyXT1cXFwiVGhlIFRvcnRsZSBQYWNrYWdlXFxcIjtjW2pyXT1RO2NbQnJdPWAke1F9OiBBZ2FpbnN0IHRoZSBHaWFudHNgO2NbVnJdPWAke1F9OiBEZWFkIGluIFRoYXlgO2NbenJdPWAke1F9OiBUaGUgRm9yZ2Ugb2YgRnVyeWA7Y1tIcl09YCR7UX06IFRoZSBIaWRkZW4gU2hyaW5lIG9mIFRhbW9hY2hhbmA7Y1tLcl09YCR7UX06IFRoZSBTdW5sZXNzIENpdGFkZWxgO2NbWXJdPWAke1F9OiBUb21iIG9mIEhvcnJvcnNgO2NbWHJdPWAke1F9OiBXaGl0ZSBQbHVtZSBNb3VudGFpbmA7Y1txcl09XFxcIlZvbG8ncyBHdWlkZSB0byBNb25zdGVyc1xcXCI7Y1tacl09XFxcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1xcXCI7Y1tRcl09XFxcIk9uZSBHcnVuZyBBYm92ZVxcXCI7Y1tKcl09XFxcIk1vcmRlbmthaW5lbidzIFRvbWUgb2YgRm9lc1xcXCI7Y1tlaV09XFxcIldhdGVyZGVlcDogRHJhZ29uIEhlaXN0XFxcIjtjW3RpXT1cXFwiV2F0ZXJkZWVwOiBEdW5nZW9uIG9mIHRoZSBNYWQgTWFnZVxcXCI7Y1tuaV09XFxcIkd1aWxkbWFzdGVycycgR3VpZGUgdG8gUmF2bmljYVxcXCI7Y1tyaV09XFxcIktyZW5rbydzIFdheVxcXCI7Y1tpaV09XFxcIkxvc3QgTGFib3JhdG9yeSBvZiBLd2FsaXNoXFxcIjtjW3NpXT1cXFwiR2hvc3RzIG9mIFNhbHRtYXJzaFxcXCI7Y1thaV09XFxcIkFjcXVpc2l0aW9ucyBJbmNvcnBvcmF0ZWRcXFwiO2Nbb2ldPVxcXCJUaGUgT3JyZXJ5IG9mIHRoZSBXYW5kZXJlclxcXCI7Y1tjaV09XFxcIkVzc2VudGlhbHMgS2l0XFxcIjtjW2xpXT1cXFwiRHJhZ29uIG9mIEljZXNwaXJlIFBlYWtcXFwiO2NbdWldPVxcXCJIdW50IGZvciB0aGUgVGhlc3NhbGh5ZHJhXFxcIjtjW2ZpXT1cXFwiRGl2aW5lIENvbnRlbnRpb25cXFwiO2NbbWldPVxcXCJTdG9ybSBMb3JkJ3MgV3JhdGhcXFwiO2NbcGldPVxcXCJTbGVlcGluZyBEcmFnb24ncyBXYWtlXFxcIjtjW2hpXT1cXFwiQmFsZHVyJ3MgR2F0ZTogRGVzY2VudCBJbnRvIEF2ZXJudXNcXFwiO2NbZ2ldPVxcXCJMb2NhdGhhaCBSaXNpbmdcXFwiO2NbZGldPVxcXCJBZHZlbnR1cmVycycgTGVhZ3VlXFxcIjtjW1NpXT1cXFwiU2FnZSBBZHZpY2UgQ29tcGVuZGl1bVxcXCI7Y1t2aV09XFxcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclxcXCI7Y1t5aV09XFxcIkViZXJyb246IEZvcmdvdHRlbiBSZWxpY3NcXFwiO2NbUmldPVxcXCJUaGUgTG9zdCBEdW5nZW9uIG9mIFJpY2tlZG5lc3M6IEJpZyBSaWNrIEVuZXJneVxcXCI7Y1tDaV09XFxcIkR1bmdlb25zICYgRHJhZ29ucyB2cy4gUmljayBhbmQgTW9ydHk6IEJhc2ljIFJ1bGVzXFxcIjtjW0VpXT1cXFwiTW9yZGVua2FpbmVuJ3MgRmllbmRpc2ggRm9saW9cXFwiO2NbX2ldPVxcXCJBZHZlbnR1cmUgd2l0aCBNdWtcXFwiO2NbQWldPVxcXCJJbmZlcm5hbCBNYWNoaW5lIFJlYnVpbGRcXFwiO2NbVGldPVxcXCJTYXBwaGlyZSBBbm5pdmVyc2FyeSBEaWNlIFNldFxcXCI7Y1tOaV09XFxcIkV4cGxvcmVyJ3MgR3VpZGUgdG8gV2lsZGVtb3VudFxcXCI7Y1tiaV09XFxcIlRpZGUgb2YgUmV0cmlidXRpb25cXFwiO2Nbd2ldPVxcXCJEYW5nZXJvdXMgRGVzaWduc1xcXCI7Y1tEaV09XFxcIkZyb3plbiBTaWNrXFxcIjtjWyRpXT1cXFwiVW53ZWxjb21lIFNwaXJpdHNcXFwiO2NbeGldPVxcXCJNeXRoaWMgT2R5c3NleXMgb2YgVGhlcm9zXFxcIjtjW01pXT1cXFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblxcXCI7Y1tPaV09XFxcIlRhc2hhJ3MgQ2F1bGRyb24gb2YgRXZlcnl0aGluZ1xcXCI7Y1tJaV09XFxcIlZhbiBSaWNodGVuJ3MgR3VpZGUgdG8gUmF2ZW5sb2Z0XFxcIjtjW1BpXT1cXFwiVGhlIEhvdXNlIG9mIExhbWVudFxcXCI7Y1traV09XFxcIkR1bmdlb24gTWFzdGVyJ3MgU2NyZWVuXFxcIjtjW0ZpXT1cXFwiRHVuZ2VvbiBNYXN0ZXIncyBTY3JlZW46IFdpbGRlcm5lc3MgS2l0XFxcIjtjW1VpXT1cXFwiSGVyb2VzJyBGZWFzdFxcXCI7Y1tMaV09XFxcIkNhbmRsZWtlZXAgTXlzdGVyaWVzXFxcIjtjW2ppXT1gJHtldH1DdXJzZSBvZiBTdHJhaGRgO2NbQmldPWAke2V0fUVsZW1lbnRhbCBFdmlsYDtjW1ZpXT1gJHtldH1SYWdlIG9mIERlbW9uc2A7Y1t6aV09YCR7cGV9QW1vbmtoZXRgO2NbSGldPWAke3BlfUlubmlzdHJhZGA7Y1tLaV09YCR7cGV9S2FsYWRlc2hgO2NbWWldPWAke3BlfVplbmRpa2FyYDtjW1hpXT1gJHtwZX1JeGFsYW5gO2NbcWldPWAke3BlfURvbWluYXJpYWA7Y1taaV09YCR7cH1BcnRpZmljZXJgO2NbUWldPWAke3B9RWxhZHJpbiBhbmQgR2l0aGA7Y1tKaV09YCR7cH1FYmVycm9uYDtjW2VzXT1gJHtwfUZlYXRzIGZvciBSYWNlc2A7Y1t0c109YCR7cH1GZWF0cyBmb3IgU2tpbGxzYDtjW25zXT1gJHtwfUZpZW5kaXNoIE9wdGlvbnNgO2NbcnNdPWAke3B9RmVhdHNgO2NbaXNdPWAke3B9R290aGljIEhlcm9lc2A7Y1tzc109YCR7cH1Nb2Rlcm4gTWFnaWNgO2NbYXNdPWAke3B9U3RhcnRlciBTcGVsbHNgO2Nbb3NdPWAke3B9VGhlIE15c3RpYyBDbGFzc2A7Y1tjc109YCR7cH1UaGF0IE9sZCBCbGFjayBNYWdpY2A7Y1tsc109YCR7cH1UaGUgUmFuZ2VyLCBSZXZpc2VkYDtjW3VzXT1gJHtwfVdhdGVyYm9ybmUgQWR2ZW50dXJlc2A7Y1tmc109YCR7cH1WYXJpYW50IFJ1bGVzYDtjW21zXT1gJHtwfUxpZ2h0LCBEYXJrLCBVbmRlcmRhcmshYDtjW3BzXT1gJHtwfVJhbmdlciBhbmQgUm9ndWVgO2NbaHNdPWAke3B9QSBUcmlvIG9mIFN1YmNsYXNzZXNgO2NbZ3NdPWAke3B9QmFyYmFyaWFuIFByaW1hbCBQYXRoc2A7Y1tkc109YCR7cH1SZXZpc2VkIFN1YmNsYXNzZXNgO2NbU3NdPWAke3B9S2l0cyBvZiBPbGRgO2NbdnNdPWAke3B9QmFyZDogQmFyZCBDb2xsZWdlc2A7Y1t5c109YCR7cH1DbGVyaWM6IERpdmluZSBEb21haW5zYDtjW1JzXT1gJHtwfURydWlkYDtjW0NzXT1gJHtwfVJldmlzZWQgQ2xhc3MgT3B0aW9uc2A7Y1tFc109YCR7cH1GaWdodGVyYDtjW19zXT1gJHtwfU1vbmtgO2NbQXNdPWAke3B9UGFsYWRpbmA7Y1tUc109YCR7cH1Nb2RpZnlpbmcgQ2xhc3Nlc2A7Y1tOc109YCR7cH1Tb3JjZXJlcmA7Y1tic109YCR7cH1XYXJsb2NrIGFuZCBXaXphcmRgO2Nbd3NdPWAke3B9VGhlIEZhaXRoZnVsYDtjW0RzXT1gJHtwfVdpemFyZCBSZXZpc2l0ZWRgO2NbJHNdPWAke3B9RWxmIFN1YnJhY2VzYDtjW3hzXT1gJHtwfU1hc3MgQ29tYmF0YDtjW01zXT1gJHtwfVRocmVlLVBpbGxhciBFeHBlcmllbmNlYDtjW09zXT1gJHtwfUdyZXloYXdrIEluaXRpYXRpdmVgO2NbSXNdPWAke3B9VGhyZWUgU3ViY2xhc3Nlc2A7Y1tQc109YCR7cH1PcmRlciBEb21haW5gO2Nba3NdPWAke3B9Q2VudGF1cnMgYW5kIE1pbm90YXVyc2A7Y1tGc109YCR7cH1HaWFudCBTb3VsIFNvcmNlcmVyYDtjW1VzXT1gJHtwfVJhY2VzIG9mIEViZXJyb25gO2NbTHNdPWAke3B9UmFjZXMgb2YgUmF2bmljYWA7Y1tXc109XFxcIldheWZpbmRlcidzIEd1aWRlIHRvIEViZXJyb25cXFwiO2NbR3NdPWAke3B9T2YgU2hpcHMgYW5kIHRoZSBTZWFgO2NbanNdPWAke3B9U2lkZWtpY2tzYDtjW0JzXT1gJHtwfUFydGlmaWNlciBSZXZpc2l0ZWRgO2NbVnNdPWAke3B9QmFyYmFyaWFuIGFuZCBNb25rYDtjW3pzXT1gJHtwfVNvcmNlcmVyIGFuZCBXYXJsb2NrYDtjW0hzXT1gJHtwfUJhcmQgYW5kIFBhbGFkaW5gO2NbS3NdPWAke3B9Q2xlcmljLCBEcnVpZCwgYW5kIFdpemFyZGA7Y1tZc109YCR7cH1GaWdodGVyLCBSYW5nZXIsIGFuZCBSb2d1ZWA7Y1tYc109YCR7cH1DbGFzcyBGZWF0dXJlIFZhcmlhbnRzYDtjW3FzXT1gJHtwfUZpZ2h0ZXIsIFJvZ3VlLCBhbmQgV2l6YXJkYDtjW1pzXT1gJHtwfVByZXN0aWdlIENsYXNzZXMgYW5kIFJ1bmUgTWFnaWNgO2NbUXNdPWAke3B9UmFuZ2VyYDtjW0pzXT1gJHtwfTIwMjAgU3ViY2xhc3NlcywgUGFydCAxYDtjW2VhXT1gJHtwfTIwMjAgU3ViY2xhc3NlcywgUGFydCAyYDtjW3RhXT1gJHtwfTIwMjAgU3ViY2xhc3NlcywgUGFydCAzYDtjW25hXT1gJHtwfTIwMjAgU3ViY2xhc3NlcywgUGFydCA0YDtjW3JhXT1gJHtwfTIwMjAgU3ViY2xhc3NlcywgUGFydCA1YDtjW2lhXT1gJHtwfTIwMjAgU3BlbGxzIGFuZCBNYWdpYyBUYXR0b29zYDtjW3NhXT1gJHtwfTIwMjAgUHNpb25pYyBPcHRpb25zIFJldmlzaXRlZGA7Y1thYV09YCR7cH0yMDIwIFN1YmNsYXNzZXMgUmV2aXNpdGVkYDtjW29hXT1gJHtwfTIwMjAgRmVhdHNgO2NbY2FdPWAke3B9MjAyMSBHb3RoaWMgTGluZWFnZXNgO2NbbGFdPWAke3B9MjAyMSBGb2xrIG9mIHRoZSBGZXl3aWxkYDtjW3VhXT1gJHtwfTIwMjEgRHJhY29uaWMgT3B0aW9uc2A7Y1tmYV09YCR7cH0yMDIxIE1hZ2VzIG9mIFN0cml4aGF2ZW5gO2NbV2ldPVxcXCJUaGUgV2lsZCBCZXlvbmQgdGhlIFdpdGNobGlnaHRcXFwiO2NbR2ldPVxcXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXFxcIjtmdW5jdGlvbiBtYSh0KXt2YXIgaSxzLG87bGV0IGU9dC5za2lsbDtpZighZSlyZXR1cm5bXTtsZXQgbj1bXSxyPVtdO2ZvcihsZXQgbCBvZiBPYmplY3Qua2V5cyhlKSl7aWYobD09XFxcIm90aGVyXFxcIil7bGV0IGY9ZVtsXTtmb3IobGV0IGggb2YgZil7bGV0IFM9aC5vbmVPZjtpZighUyljb250aW51ZTtsZXQgRT1PYmplY3Qua2V5cyhTKS5zb3J0KCkseT1FLnNoaWZ0KCksUj1TW3ldLFssdl09KGk9Uj09bnVsbD92b2lkIDA6Ui5tYXRjaCgvLio/KFxcXFxkKykvKSkhPW51bGw/aTpbXTtyLnB1c2goe1tgcGx1cyBvbmUgb2YgdGhlIGZvbGxvd2luZzogJHt5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3kuc2xpY2UoMSl9YF06dn0pO2ZvcihsZXQgTSBvZiBFLnNsaWNlKDEpKXtsZXQgUD1TW01dLFssYl09KHM9UD09bnVsbD92b2lkIDA6UC5tYXRjaCgvLio/KFxcXFxkKykvKSkhPW51bGw/czpbXTshYnx8ci5wdXNoKHtbTV06Yn0pfX1jb250aW51ZX1sZXQgdT1lW2xdLFssYV09KG89dT09bnVsbD92b2lkIDA6dS5tYXRjaCgvLio/KFxcXFxkKykvKSkhPW51bGw/bzpbXTshYXx8bi5wdXNoKHtbbF06YX0pfXJldHVyblsuLi5uLmZpbHRlcihsPT5sKSwuLi5yLmZpbHRlcihsPT5sKV19dmFyIGhuPXswOntjcjpcXFwiMFxcXCIsdmFsdWU6MCx4cDowfSxcXFwiMS84XFxcIjp7Y3I6XFxcIjEvOFxcXCIsdmFsdWU6LjEyNSx4cDoyNX0sXFxcIjEvNFxcXCI6e2NyOlxcXCIxLzRcXFwiLHZhbHVlOi4yNSx4cDo1MH0sXFxcIjEvMlxcXCI6e2NyOlxcXCIxLzJcXFwiLHZhbHVlOi41LHhwOjEwMH0sXFxcIjAuMTI1XFxcIjp7Y3I6XFxcIjEvOFxcXCIsdmFsdWU6LjEyNSx4cDoyNX0sXFxcIjAuMjVcXFwiOntjcjpcXFwiMS80XFxcIix2YWx1ZTouMjUseHA6NTB9LFxcXCIwLjVcXFwiOntjcjpcXFwiMS8yXFxcIix2YWx1ZTouNSx4cDoxMDB9LDE6e2NyOlxcXCIxXFxcIix2YWx1ZToxLHhwOjIwMH0sMjp7Y3I6XFxcIjJcXFwiLHZhbHVlOjIseHA6NDUwfSwzOntjcjpcXFwiM1xcXCIsdmFsdWU6Myx4cDo3MDB9LDQ6e2NyOlxcXCI0XFxcIix2YWx1ZTo0LHhwOjExMDB9LDU6e2NyOlxcXCI1XFxcIix2YWx1ZTo1LHhwOjE4MDB9LDY6e2NyOlxcXCI2XFxcIix2YWx1ZTo2LHhwOjIzMDB9LDc6e2NyOlxcXCI3XFxcIix2YWx1ZTo3LHhwOjI5MDB9LDg6e2NyOlxcXCI4XFxcIix2YWx1ZTo4LHhwOjM5MDB9LDk6e2NyOlxcXCI5XFxcIix2YWx1ZTo5LHhwOjVlM30sMTA6e2NyOlxcXCIxMFxcXCIsdmFsdWU6MTAseHA6NTkwMH0sMTE6e2NyOlxcXCIxMVxcXCIsdmFsdWU6MTEseHA6NzIwMH0sMTI6e2NyOlxcXCIxMlxcXCIsdmFsdWU6MTIseHA6ODQwMH0sMTM6e2NyOlxcXCIxM1xcXCIsdmFsdWU6MTMseHA6MWU0fSwxNDp7Y3I6XFxcIjE0XFxcIix2YWx1ZToxNCx4cDoxMTUwMH0sMTU6e2NyOlxcXCIxNVxcXCIsdmFsdWU6MTUseHA6MTNlM30sMTY6e2NyOlxcXCIxNlxcXCIsdmFsdWU6MTYseHA6MTVlM30sMTc6e2NyOlxcXCIxN1xcXCIsdmFsdWU6MTcseHA6MThlM30sMTg6e2NyOlxcXCIxOFxcXCIsdmFsdWU6MTgseHA6MmU0fSwxOTp7Y3I6XFxcIjE5XFxcIix2YWx1ZToxOSx4cDoyMmUzfSwyMDp7Y3I6XFxcIjIwXFxcIix2YWx1ZToyMCx4cDoyNWUzfSwyMTp7Y3I6XFxcIjIxXFxcIix2YWx1ZToyMSx4cDozM2UzfSwyMjp7Y3I6XFxcIjIyXFxcIix2YWx1ZToyMix4cDo0MWUzfSwyMzp7Y3I6XFxcIjIzXFxcIix2YWx1ZToyMyx4cDo1ZTR9LDI0OntjcjpcXFwiMjRcXFwiLHZhbHVlOjI0LHhwOjYyZTN9LDI1OntjcjpcXFwiMjVcXFwiLHZhbHVlOjI1LHhwOjc1ZTN9LDI2OntjcjpcXFwiMjZcXFwiLHZhbHVlOjI2LHhwOjllNH0sMjc6e2NyOlxcXCIyN1xcXCIsdmFsdWU6MjcseHA6MTA1ZTN9LDI4OntjcjpcXFwiMjhcXFwiLHZhbHVlOjI4LHhwOjEyZTR9LDI5OntjcjpcXFwiMjlcXFwiLHZhbHVlOjI5LHhwOjEzNWUzfSwzMDp7Y3I6XFxcIjMwXFxcIix2YWx1ZTozMCx4cDoxNTVlM319O2Z1bmN0aW9uIFkodCl7cmV0dXJuIE1hdGguZmxvb3IoKCh0IT1udWxsP3Q6MTApLTEwKS8yKX12YXIgZ249e3Rpbnk6NCxzbWFsbDo2LG1lZGl1bTo4LGxhcmdlOjEwLGh1Z2U6MTIsZ2FyZ2FudHVhbjoyMH0scGE9e3N0cjpcXFwic3RyZW5ndGhcXFwiLGRleDpcXFwiZGV4dGVyaXR5XFxcIixjb246XFxcImNvbnN0aXR1dGlvblxcXCIsaW50OlxcXCJpbnRlbGxpZ2VuY2VcXFwiLHdpczpcXFwid2lzZG9tXFxcIixjaGE6XFxcImNoYXJpc21hXFxcIn0sTmU9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5tb25zdGVyPWU7dGhpcy5wcm9maWNpZW5jeT10aGlzLmdldFByb2YodGhpcy5tb25zdGVyKTt0aGlzLnN0YXRzPXtzdHI6dGhpcy5tb25zdGVyLnN0clBvaW50cyxkZXg6dGhpcy5tb25zdGVyLmRleFBvaW50cyxjb246dGhpcy5tb25zdGVyLmNvblBvaW50cyxpbnQ6dGhpcy5tb25zdGVyLmludFBvaW50cyx3aXM6dGhpcy5tb25zdGVyLndpc1BvaW50cyxjaGE6dGhpcy5tb25zdGVyLmNoYVBvaW50c307dGhpcy5tb2RpZmllcnM9e3N0cjpZKHRoaXMuc3RhdHMuc3RyKSxkZXg6WSh0aGlzLnN0YXRzLmRleCksY29uOlkodGhpcy5zdGF0cy5jb24pLGludDpZKHRoaXMuc3RhdHMuaW50KSx3aXM6WSh0aGlzLnN0YXRzLndpcyksY2hhOlkodGhpcy5zdGF0cy5jaGEpfX1zdGF0aWMgcGFyc2UoZSl7dmFyIGkscyxvLGwsdSxhO2xldCBuPW5ldyBOZShlKTtyZXR1cm57aW1hZ2U6bnVsbCxuYW1lOmUubmFtZSxzb3VyY2U6XFxcIlRldHJhQ3ViZVxcXCIsdHlwZTplLnR5cGUsc3VidHlwZTpcXFwiXFxcIixzaXplOmUuc2l6ZSxhbGlnbm1lbnQ6ZS5hbGlnbm1lbnQsaHA6KGk9bi5nZXRIUChlKSk9PW51bGw/dm9pZCAwOmkuaHAsaGl0X2RpY2U6KHM9bi5nZXRIUChlKSk9PW51bGw/dm9pZCAwOnMuZGljZSxhYzoodT0obD0oKG89ZS5hYykhPW51bGw/bzpbXSlbMF0pPT1udWxsP3ZvaWQgMDpsLmFjKSE9bnVsbD91OlxcXCJcXFwiLHNwZWVkOm4uZ2V0U3BlZWRTdHJpbmcoZSksc3RhdHM6W2Uuc3RyUG9pbnRzLGUuZGV4UG9pbnRzLGUuY29uUG9pbnRzLGUuaW50UG9pbnRzLGUud2lzUG9pbnRzLGUuY2hhUG9pbnRzXSxkYW1hZ2VfaW1tdW5pdGllczpuLnBhcnNlSW1tdW5lKGUsXFxcImlcXFwiKSxkYW1hZ2VfcmVzaXN0YW5jZXM6bi5wYXJzZUltbXVuZShlLFxcXCJyXFxcIiksZGFtYWdlX3Z1bG5lcmFiaWxpdGllczpuLnBhcnNlSW1tdW5lKGUsXFxcInZcXFwiKSxjb25kaXRpb25faW1tdW5pdGllczpuLnBhcnNlQ29uZGl0aW9ucyhlKSxzYXZlczpuLmdldFNhdmVzKGUpLHNraWxsc2F2ZXM6bi5nZXRTa2lsbHMoZSksc2Vuc2VzOm4uZ2V0U2Vuc2VzKGUpLGxhbmd1YWdlczpuLmdldExhbmd1YWdlcyhlKSxjcjooYT1lLmNyKSE9bnVsbD9hOlxcXCJcXFwiLHRyYWl0czpuLmdldFRyYWl0cyhlLmFiaWxpdGllcyksYWN0aW9uczpuLmdldFRyYWl0cyhlLmFjdGlvbnMpLHJlYWN0aW9uczpuLmdldFRyYWl0cyhlLnJlYWN0aW9ucyksbGVnZW5kYXJ5X2FjdGlvbnM6bi5nZXRUcmFpdHMoZS5sZWdlbmRhcmllcyksc3BlbGxzOm4uZ2V0U3BlbGxzKGUuYWJpbGl0aWVzKX19Z2V0SFAoZSl7dmFyIG4scjtpZihlLmN1c3RvbUhQfHxlLmhpdERpY2UmJi8oXFxcXGQrKSBcXFxcKCguKylcXFxcKS8udGVzdChlLmhwVGV4dCkpe2xldFtpLHMsb109KG49ZS5ocFRleHQubWF0Y2goLyhcXFxcZCspIFxcXFwoKC4rKVxcXFwpLykpIT1udWxsP246W107cmV0dXJue2hwOnMsZGljZTpvfX1pZihlLmhpdERpY2Upe2xldCBpPU51bWJlcihlLmhpdERpY2UpLHM9KHI9Z25bZS5zaXplXSkhPW51bGw/cjpnbi5tZWRpdW0sbz10aGlzLm1vZGlmaWVycy5jb24sbD1pKnMvKDIrLjUpK28qaSx1PW8+MD9cXFwiK1xcXCI6XFxcIi1cXFwiLGE9bz09MD9cXFwiXFxcIjpgICR7dX0gJHtvKml9YDtyZXR1cm57aHA6bCxkaWNlOmAke2l9ZCR7c30ke2F9YH19fWdldFNwZWVkU3RyaW5nKGUpe2lmKGUuY3VzdG9tU3BlZWQpcmV0dXJuIGUuc3BlZWREZXNjO2xldCBuPVtlLnNwZWVkK1xcXCIgZnQuXFxcIl07cmV0dXJuIGUuYnVycm93U3BlZWQ+MCYmbi5wdXNoKFxcXCJidXJyb3cgXFxcIitlLmJ1cnJvd1NwZWVkK1xcXCIgZnQuXFxcIiksZS5jbGltYlNwZWVkPjAmJm4ucHVzaChcXFwiY2xpbWIgXFxcIitlLmNsaW1iU3BlZWQrXFxcIiBmdC5cXFwiKSxlLmZseVNwZWVkPjAmJm4ucHVzaChcXFwiZmx5IFxcXCIrZS5mbHlTcGVlZCtcXFwiIGZ0LlxcXCIrKGUuaG92ZXI/XFxcIiAoaG92ZXIpXFxcIjpcXFwiXFxcIikpLGUuc3dpbVNwZWVkPjAmJm4ucHVzaChcXFwic3dpbSBcXFwiK2Uuc3dpbVNwZWVkK1xcXCIgZnQuXFxcIiksbi5qb2luKFxcXCIsIFxcXCIpfXBhcnNlSW1tdW5lKGUsbil7bGV0IHI9W107XFxcImRhbWFnZXR5cGVzXFxcImluIGUmJkFycmF5LmlzQXJyYXkoZS5kYW1hZ2V0eXBlcykmJnIucHVzaCguLi5lLmRhbWFnZXR5cGVzLmZpbHRlcihzPT5zLnR5cGU9PW4pLm1hcChzPT5zLm5hbWUpKTtsZXQgaT1bXTtyZXR1cm5cXFwic3BlY2lhbGRhbWFnZVxcXCJpbiBlJiZBcnJheS5pc0FycmF5KGUuc3BlY2lhbGRhbWFnZSkmJmkucHVzaCguLi5lLnNwZWNpYWxkYW1hZ2UuZmlsdGVyKHM9PnMudHlwZT09bikubWFwKHM9PnMubmFtZSkpLFtyLmpvaW4oXFxcIiwgXFxcIiksaS5qb2luKFxcXCIsIFxcXCIpXS5maWx0ZXIocz0+cyYmcy5sZW5ndGgpLmpvaW4oXFxcIjsgXFxcIil9Z2V0TGFuZ3VhZ2VzKGUpe2xldCBuPVtdLHI9W10saT1bXTtmb3IobGV0IHM9MDtzPGUubGFuZ3VhZ2VzLmxlbmd0aDtzKyspe2xldCBvPWUubGFuZ3VhZ2VzW3NdO28uc3BlYWtzfHxvLnNwZWFrcz09bnVsbD9yLnB1c2gobyk6aS5wdXNoKG8pfXJldHVybiByLmxlbmd0aD4wJiZuLnB1c2goW3Iuc2xpY2UoMCxyLmxlbmd0aC0yKS5tYXAocz0+cy5uYW1lKS5qb2luKFxcXCIsIFxcXCIpLHIuc2xpY2UoLTEpLm1hcChzPT5zLm5hbWUpXS5maWx0ZXIocz0+cykuam9pbihcXFwiIGFuZCBcXFwiKSksaS5sZW5ndGg+MCYmbi5wdXNoKFtpLnNsaWNlKDAsaS5sZW5ndGgtMikubWFwKHM9PnMubmFtZSkuam9pbihcXFwiLCBcXFwiKSxpLnNsaWNlKC0xKS5tYXAocz0+cy5uYW1lKV0uZmlsdGVyKHM9PnMpLmpvaW4oXFxcIiBhbmQgXFxcIikpLGUudGVsZXBhdGh5PjAmJm4ucHVzaChcXFwidGVsZXBhdGh5IFxcXCIrZS50ZWxlcGF0aHkrXFxcIiBmdC5cXFwiKSxuLmxlbmd0aD09MCYmbi5wdXNoKFxcXCImbWRhc2g7XFxcIiksbi5qb2luKFxcXCI7IFxcXCIpfWdldFNlbnNlcyhlKXtsZXQgbj1bXTtlLmJsaW5kc2lnaHQ+MCYmbi5wdXNoKFxcXCJibGluZHNpZ2h0IFxcXCIrZS5ibGluZHNpZ2h0K1xcXCIgZnQuXFxcIisoZS5ibGluZD9cXFwiIChibGluZCBiZXlvbmQgdGhpcyByYWRpdXMpXFxcIjpcXFwiXFxcIikpLGUuZGFya3Zpc2lvbj4wJiZuLnB1c2goXFxcImRhcmt2aXNpb24gXFxcIitlLmRhcmt2aXNpb24rXFxcIiBmdC5cXFwiKSxlLnRyZW1vcnNlbnNlPjAmJm4ucHVzaChcXFwidHJlbW9yc2Vuc2UgXFxcIitlLnRyZW1vcnNlbnNlK1xcXCIgZnQuXFxcIiksZS50cnVlc2lnaHQ+MCYmbi5wdXNoKFxcXCJ0cnVlc2lnaHQgXFxcIitlLnRydWVzaWdodCtcXFwiIGZ0LlxcXCIpO2xldCByPWUuc2tpbGxzLmZpbmQocz0+cy5uYW1lPT1cXFwicGVyY2VwdGlvblxcXCIpLGk9MTArWShlLndpc1BvaW50cyk7cmV0dXJuIHIhPW51bGwmJihpKz10aGlzLnByb2ZpY2llbmN5KihcXFwibm90ZVxcXCJpbiByPzI6MSkpLG4ucHVzaChcXFwicGFzc2l2ZSBQZXJjZXB0aW9uIFxcXCIraSksbi5qb2luKFxcXCIsIFxcXCIpfXRyYW5zZm9ybVN0cmluZyhlKXtyZXR1cm4gZS5yZXBsYWNlKC8oX3xcXFxcKnxcXFxccyo+XFxcXHMqKS9nLFxcXCJcXFwiKS5yZXBsYWNlKC9cXFxcW01PTihTKT9cXFxcXS9nLGAke3RoaXMubW9uc3Rlci5zaG9ydE5hbWUmJnRoaXMubW9uc3Rlci5zaG9ydE5hbWUubGVuZ3RoP3RoaXMubW9uc3Rlci5zaG9ydE5hbWU6dGhpcy5tb25zdGVyLm5hbWV9JDFgKS5yZXBsYWNlKC9cXFxcWyhcXFxcdyspXFxcXF0vZywobixyKT0+e2lmKHI9ci50b0xvd2VyQ2FzZSgpLCEociBpbiB0aGlzLm1vZGlmaWVycykpcmV0dXJuIG47bGV0IGk9dGhpcy5tb2RpZmllcnNbcl07cmV0dXJuYCR7aT49MD9cXFwiK1xcXCI6XFxcIlxcXCJ9JHtpfWB9KS5yZXBsYWNlKC9cXFxcWyhcXFxcdyspIChBVEt8U0FWRSlcXFxccz8oPzooWystXSlcXFxccz8oXFxcXGQrKSk/XFxcXF0vZywobixyLGk9XFxcIkFUS1xcXCIscz1cXFwiK1xcXCIsbz0wKT0+e2lmKHI9ci50b0xvd2VyQ2FzZSgpLCEociBpbiB0aGlzLm1vZGlmaWVycykpcmV0dXJuIG47bz1zPT1cXFwiK1xcXCI/TnVtYmVyKG8pOi1OdW1iZXIobyk7bGV0IGw9KGk9PVxcXCJBVEtcXFwiPzA6OCkrdGhpcy5tb2RpZmllcnNbcl0rdGhpcy5wcm9maWNpZW5jeStvO3JldHVybmAke2w+PTA/XFxcIitcXFwiOlxcXCJcXFwifSR7bH1gfSkucmVwbGFjZSgvXFxcXFsoXFxcXHcrKT9cXFxccz8oXFxcXGQqW2REXVxcXFxkKylcXFxccz8oPzooWystXSlcXFxccz8oXFxcXGQrKSk/XFxcXF0vZywobixyLGkscz1cXFwiK1xcXCIsbz0wKT0+e3ZhciBoO3I9ci50b0xvd2VyQ2FzZSgpO2xldFssbD0xLHVdPShoPWkubWF0Y2goLyhcXFxcZCopW2REXShcXFxcZCspLykpIT1udWxsP2g6W107aWYobHx8KGw9MSksIXUpcmV0dXJuIG47bz1zPT1cXFwiK1xcXCI/TnVtYmVyKG8pOi1OdW1iZXIobyksciBpbiB0aGlzLm1vZGlmaWVycyYmKG8rPXRoaXMubW9kaWZpZXJzW3JdKTtsZXQgYT1NYXRoLmZsb29yKCh1LzIrLjUpKmwpK28sZj1bYCR7bH1kJHt1fWBdO3JldHVybiBvJiZvIT0wJiYoZi5wdXNoKG8+PTA/XFxcIitcXFwiOlxcXCItXFxcIiksZi5wdXNoKG8pKSxgJHthfSAoJHtmLmpvaW4oXFxcIiBcXFwiKX0pYH0pfWdldFRyYWl0cyhlKXtyZXR1cm4hZXx8IWUubGVuZ3RoP3ZvaWQgMDplLmZpbHRlcihyPT5yLm5hbWUhPVxcXCJTcGVsbGNhc3RpbmdcXFwiKS5tYXAocj0+KHtuYW1lOnIubmFtZSxkZXNjOnRoaXMudHJhbnNmb3JtU3RyaW5nKHIuZGVzYyl9KSl9Z2V0U3BlbGxzKGUpe3ZhciBpO2lmKCFlLmFiaWxpdGllc3x8IWUuYWJpbGl0aWVzLmxlbmd0aClyZXR1cm47bGV0e2Rlc2M6bn09KGk9ZS5hYmlsaXRpZXMuZmluZChzPT5zLm5hbWU9PVxcXCJTcGVsbGNhc3RpbmdcXFwiKSkhPW51bGw/aTp7fTtyZXR1cm4gbj90aGlzLnRyYW5zZm9ybVN0cmluZyhuKS50cmltKCkuc3BsaXQoYFxcbmApLmZpbHRlcihzPT5zLmxlbmd0aCk6dm9pZCAwfWdldFNhdmVzKGUpe2lmKCEoXFxcInN0aHJvd3NcXFwiaW4gZSl8fCFBcnJheS5pc0FycmF5KGUuc3Rocm93cyl8fCFlLnN0aHJvd3MubGVuZ3RoKXJldHVybltdO2xldCBuPXRoaXMucHJvZmljaWVuY3kscj1bXTtmb3IobGV0IGkgb2YgZS5zdGhyb3dzKXtsZXQgcz1pLm5hbWUsbz1ZKE51bWJlcihlW2Ake3N9UG9pbnRzYF0pKTtpc05hTihvKXx8ci5wdXNoKHtbcGFbc11dOm8rbn0pfXJldHVybiByfWdldFNraWxscyhlKXtpZighKFxcXCJza2lsbHNcXFwiaW4gZSl8fCFBcnJheS5pc0FycmF5KGUuc2tpbGxzKXx8IWUuc2tpbGxzLmxlbmd0aClyZXR1cm5bXTtsZXQgbj1bXSxyPXRoaXMucHJvZmljaWVuY3k7Zm9yKGxldCBpIG9mIGUuc2tpbGxzKXtsZXQgcz1pLnN0YXQsbz1ZKE51bWJlcihlW2Ake3N9UG9pbnRzYF0pKTtpZihpc05hTihvKSljb250aW51ZTtsZXQgbD1cXFwibm90ZVxcXCJpbiBpO24ucHVzaCh7W2kubmFtZV06citvK28qTnVtYmVyKGwpfSl9cmV0dXJuIG59Z2V0UHJvZihlKXt2YXIgcixpO2xldCBuPTA7cmV0dXJuIGUuY3I9PVxcXCIqXFxcIiYmKG49ZS5jdXN0b21Qcm9mKSxcXFwiY3JcXFwiaW4gZSYmZS5jciBpbiBobiYmKG49TWF0aC5tYXgoTWF0aC5mbG9vcigyKygoKGk9KHI9aG5bZS5jcl0pPT1udWxsP3ZvaWQgMDpyLnZhbHVlKSE9bnVsbD9pOjApLTEpLzQpLDIpKSxpc05hTihOdW1iZXIobikpPzA6TnVtYmVyKG4pfXBhcnNlQ29uZGl0aW9ucyhlKXtpZihcXFwiY29uZGl0aW9uc1xcXCJpbiBlJiZBcnJheS5pc0FycmF5KGUuY29uZGl0aW9ucykpcmV0dXJuIGUuY29uZGl0aW9ucy5tYXAobj0+bi5uYW1lKS5qb2luKFxcXCIsIFxcXCIpfX07YXN5bmMgZnVuY3Rpb24gZG4odCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLG4pPT57bGV0IHI9bmV3IEZpbGVSZWFkZXIsaT1bXTtyLm9ubG9hZD1hc3luYyBzPT57dHJ5e2xldCBvPUpTT04ucGFyc2Uocy50YXJnZXQucmVzdWx0KSxsO1xcXCJtb25zdGVyXFxcImluIG8/bD1vLm1vbnN0ZXI6QXJyYXkuaXNBcnJheShvKT9sPW86dHlwZW9mIG89PVxcXCJvYmplY3RcXFwiP2w9W29dOm4oXFxcIkludmFsaWQgbW9uc3RlciBKU09OIHByb3ZpZGVkLlxcXCIpO2xldCB1PVtdO2ZvcihsZXQgYSBvZiBsKXRyeXtsZXQgZj1OZS5wYXJzZShhKTt1LnB1c2goZil9Y2F0Y2goZil7Y29uc29sZS5lcnJvcihmKTtjb250aW51ZX1lKHUpfWNhdGNoKG8pe2NvbnNvbGUuZXJyb3IoXFxcInJlamVjdCEhIVxcXCIsbyksbihvKX19LHIucmVhZEFzVGV4dCh0KX0pfXZhciB0dD1zZWxmO3R0Lm9ubWVzc2FnZT1hc3luYyB0PT57aWYoIXQuZGF0YSlyZXR1cm47bGV0e2ZpbGVzOmUsc291cmNlOm59PXQuZGF0YSxyPVtdO2ZvcihsZXQgaSBvZiBlKXN3aXRjaChuKXtjYXNlXFxcIjVlXFxcIjp7bGV0IHM9YXdhaXQgcG4oaSk7ci5wdXNoKC4uLnMhPW51bGw/czpbXSk7YnJlYWt9Y2FzZVxcXCJjcml0dGVyXFxcIjp7bGV0IHM9YXdhaXQgbW4oaSk7ci5wdXNoKC4uLnMhPW51bGw/czpbXSk7YnJlYWt9Y2FzZVxcXCJpbXByb3ZlZFxcXCI6e2xldCBzPWF3YWl0IGZuKGkpO3IucHVzaCguLi5zIT1udWxsP3M6W10pO2JyZWFrfWNhc2VcXFwiYXBwZmlsZVxcXCI6e2xldCBzPWF3YWl0IHVuKGkpO3IucHVzaCguLi5zIT1udWxsP3M6W10pO2JyZWFrfWNhc2VcXFwidGV0cmFcXFwiOntsZXQgcz1hd2FpdCBkbihpKTtyLnB1c2goLi4ucyE9bnVsbD9zOltdKTticmVha319dHQucG9zdE1lc3NhZ2Uoe21vbnN0ZXJzOnJ9KX07dHQuYWRkRXZlbnRMaXN0ZW5lcihcXFwidW5oYW5kbGVkcmVqZWN0aW9uXFxcIixmdW5jdGlvbih0KXt0aHJvdyB0LnJlYXNvbn0pO1xcblwiKTtcbn1cbiIsICIvL0B0cy1pZ25vcmVcbmltcG9ydCBJbXBvcnRXb3JrZXIgZnJvbSBcIi4vaW1wb3J0ZXIud29ya2VyXCI7XG5pbXBvcnQgdHlwZSB7IE1vbnN0ZXIgfSBmcm9tIFwic3JjL0B0eXBlc1wiO1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSBTdGF0QmxvY2tQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwic3JjL3V0aWxzXCI7XG5cbmNsYXNzIFNvdXJjZVByb21wdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRzb3VyY2U6IHN0cmluZztcblx0c2F2ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0ZGlzcGxheSgpIHtcblx0XHR0aGlzLnRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IFwiU2V0IFNvdXJjZXNcIiB9KTtcblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFxuXHRcdFx0XHRcIkEgc291cmNlIGNvdWxkIG5vdCBiZSBmb3VuZCBmb3Igc29tZSBpbXBvcnRlZCBtb25zdGVycy4gRG8geW91IHdpc2ggdG8gbWFudWFsbHkgYWRkIG9uZT9cIlxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQoKHQpID0+IHtcblx0XHRcdFx0dC5zZXRQbGFjZWhvbGRlcihcIlVua25vd25cIikub25DaGFuZ2UoKHYpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNvdXJjZSA9IHY7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0dGhpcy5idWlsZEJ1dHRvbnModGhpcy5jb250ZW50RWwpO1xuXHR9XG5cdGJ1aWxkQnV0dG9ucyhlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRuZXcgU2V0dGluZyhlbClcblx0XHRcdC5hZGRCdXR0b24oKGIpID0+XG5cdFx0XHRcdGJcblx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHQuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiU2F2ZVwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuc2F2ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+XG5cdFx0XHRcdGJcblx0XHRcdFx0XHQuc2V0SWNvbihcImNyb3NzXCIpXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJDYW5jZWxcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblx0b25PcGVuKCkge1xuXHRcdHRoaXMuZGlzcGxheSgpO1xuXHR9XG59XG5cbmNvbnN0IGdldFNvdXJjZUZyb21Qcm9tcHQgPSBhc3luYyAoYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZyB8IG51bGw+ID0+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgU291cmNlUHJvbXB0TW9kYWwoYXBwKTtcblx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuXHRcdFx0aWYgKCFtb2RhbC5zYXZlZCkgcmVzb2x2ZShudWxsKTtcblx0XHRcdHJlc29sdmUobW9kYWwuc291cmNlKTtcblx0XHR9O1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbXBvcnRlciB7XG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBwbHVnaW46IFN0YXRCbG9ja1BsdWdpbikge31cblx0d29ya2VyczogTWFwPHN0cmluZywgV29ya2VyPiA9IG5ldyBNYXAoKTtcblx0YXN5bmMgaW1wb3J0KGZpbGVzOiBGaWxlTGlzdCwgc291cmNlOiBzdHJpbmcpOiBQcm9taXNlPE1vbnN0ZXJbXT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0Y29uc3Qgd29ya2VyID0gbmV3IEltcG9ydFdvcmtlcigpO1xuXHRcdFx0Y29uc3QgaWQgPSBuYW5vaWQoKTtcblx0XHRcdHRoaXMud29ya2Vycy5zZXQoaWQsIHdvcmtlcik7XG5cdFx0XHQvL0B0cy1pZ25vcmVcblx0XHRcdHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyAoZXZlbnQpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBtb25zdGVycyB9OiB7IG1vbnN0ZXJzOiBNb25zdGVyW10gfSA9IGV2ZW50LmRhdGEgPz8ge1xuXHRcdFx0XHRcdG1vbnN0ZXJzOiBbXSxcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKG1vbnN0ZXJzKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0XHRcdGBTdWNjZXNzZnVsbHkgaW1wb3J0ZWQgJHttb25zdGVycy5sZW5ndGh9IE1vbnN0ZXJzYFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3Qgc291cmNlbGVzcyA9IG1vbnN0ZXJzLmZpbHRlcihcblx0XHRcdFx0XHRcdChtb25zdGVyKSA9PlxuXHRcdFx0XHRcdFx0XHRtb25zdGVyLnNvdXJjZSA9PSBcIlVua25vd25cIiB8fCAhbW9uc3Rlci5zb3VyY2Vcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGxldCBzb3VyY2U6IHN0cmluZyB8IG51bGw7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0c291cmNlbGVzcy5sZW5ndGggJiZcblx0XHRcdFx0XHRcdChzb3VyY2UgPSBhd2FpdCBnZXRTb3VyY2VGcm9tUHJvbXB0KHRoaXMucGx1Z2luLmFwcCkpXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzb3VyY2VsZXNzLmZvckVhY2goXG5cdFx0XHRcdFx0XHRcdChtb25zdGVyKSA9PiAobW9uc3Rlci5zb3VyY2UgPSBzb3VyY2UpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR3b3JrZXIudGVybWluYXRlKCk7XG5cdFx0XHRcdHRoaXMud29ya2Vycy5kZWxldGUoaWQpO1xuXHRcdFx0XHRyZXNvbHZlKG1vbnN0ZXJzKTtcblx0XHRcdH07IC8vQHRzLWlnbm9yZVxuXHRcdFx0d29ya2VyLm9uZXJyb3IgPSAoZSkgPT4ge1xuXHRcdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcdGBUaGVyZSB3YXMgYW4gZXJyb3IgaW1wb3J0aW5nIHRoZSBmaWxlLlxcblxcbiR7ZS5tZXNzYWdlfWBcblx0XHRcdFx0KTtcblx0XHRcdFx0d29ya2VyLnRlcm1pbmF0ZSgpO1xuXHRcdFx0XHR0aGlzLndvcmtlcnMuZGVsZXRlKGlkKTtcblx0XHRcdFx0cmVzb2x2ZShbXSk7XG5cdFx0XHR9O1xuXHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKHsgZmlsZXMsIHNvdXJjZSB9KTtcblx0XHR9KTtcblx0fVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkoXG5cdHByb3BlcnR5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgc3RyaW5nIHwgYW55W10gfCBudW1iZXIgfCBib29sZWFuLFxuXHRkZXB0aDogbnVtYmVyID0gMCxcblx0am9pbmVyOiBzdHJpbmcgPSBcIiBcIixcblx0cGFyZW5zID0gdHJ1ZVxuKTogc3RyaW5nIHtcblx0Y29uc3QgcmV0ID0gW107XG5cdGlmIChkZXB0aCA9PSA1KSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblx0aWYgKHByb3BlcnR5ID09IG51bGwpIHJldHVybiBgYDtcblx0aWYgKHR5cGVvZiBwcm9wZXJ0eSA9PSBcInN0cmluZ1wiKSByZXR1cm4gcHJvcGVydHk7XG5cdGlmICh0eXBlb2YgcHJvcGVydHkgPT0gXCJudW1iZXJcIikgcmV0dXJuIGAke3Byb3BlcnR5fWA7XG5cdGlmIChBcnJheS5pc0FycmF5KHByb3BlcnR5KSkge1xuXHRcdHJldC5wdXNoKFxuXHRcdFx0YCR7cGFyZW5zID8gXCIoXCIgOiBcIlwifSR7cHJvcGVydHlcblx0XHRcdFx0Lm1hcCgocCkgPT4gc3RyaW5naWZ5KHAsIGRlcHRoKyspKVxuXHRcdFx0XHQuam9pbihqb2luZXIpfSR7cGFyZW5zID8gXCIpXCIgOiBcIlwifWBcblx0XHQpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PSBcIm9iamVjdFwiKSB7XG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiBPYmplY3QudmFsdWVzKHByb3BlcnR5KSkge1xuXHRcdFx0cmV0LnB1c2goc3RyaW5naWZ5KHZhbHVlLCBkZXB0aCsrKSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXQuam9pbihcIiBcIik7XG59XG5leHBvcnQgY29uc3Qgc3RyaW5naWZ5V2l0aEtleXMgPSAoXG5cdHByb3BlcnR5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgc3RyaW5nIHwgYW55W10gfCBudW1iZXIgfCBib29sZWFuLFxuXHRkZXB0aDogbnVtYmVyID0gMFxuKTogc3RyaW5nID0+IHtcblx0Y29uc3QgcmV0ID0gW107XG5cdGlmIChkZXB0aCA9PSA1KSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblx0aWYgKCFwcm9wZXJ0eSB8fCBwcm9wZXJ0eSA9PSBudWxsKSByZXR1cm4gYGA7XG5cdGlmICh0eXBlb2YgcHJvcGVydHkgPT0gXCJzdHJpbmdcIikgcmV0dXJuIHByb3BlcnR5O1xuXHRpZiAodHlwZW9mIHByb3BlcnR5ID09IFwibnVtYmVyXCIpIHJldHVybiBgJHtwcm9wZXJ0eX1gO1xuXHRpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0eSkpIHtcblx0XHRyZXQucHVzaChcblx0XHRcdGAke3Byb3BlcnR5Lm1hcCgocCkgPT4gc3RyaW5naWZ5V2l0aEtleXMocCwgZGVwdGgrKykpLmpvaW4oXCIgXCIpfWBcblx0XHQpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PSBcIm9iamVjdFwiKSB7XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcGVydHkpKSB7XG5cdFx0XHRyZXQucHVzaChcblx0XHRcdFx0c3RyaW5naWZ5V2l0aEtleXMoa2V5LCBkZXB0aCsrKSxcblx0XHRcdFx0c3RyaW5naWZ5V2l0aEtleXModmFsdWUsIGRlcHRoKyspXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmV0LmpvaW4oXCIgXCIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5hbm9pZCgpIHtcblx0cmV0dXJuIFwieHl4eXh5eHl4eXh5XCIucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuXHRcdHZhciByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLFxuXHRcdFx0diA9IGMgPT0gXCJ4XCIgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuXHRcdHJldHVybiB2LnRvU3RyaW5nKDE2KTtcblx0fSk7XG59XG4iLCAiLy8gPj4+IElOVEVSRkFDRVMgPDw8XHJcbi8vID4+PiBIRUxQRVJTIDw8PFxyXG52YXIgY2FzdENvbXBhcmVyID0gZnVuY3Rpb24gKGNvbXBhcmVyKSB7IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgb3JkZXIpIHsgcmV0dXJuIGNvbXBhcmVyKGEsIGIsIG9yZGVyKSAqIG9yZGVyOyB9OyB9O1xyXG52YXIgdGhyb3dJbnZhbGlkQ29uZmlnRXJyb3JJZlRydWUgPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBjb250ZXh0KSB7XHJcbiAgICBpZiAoY29uZGl0aW9uKVxyXG4gICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBzb3J0IGNvbmZpZzogXCIgKyBjb250ZXh0KTtcclxufTtcclxudmFyIHVucGFja09iamVjdFNvcnRlciA9IGZ1bmN0aW9uIChzb3J0QnlPYmopIHtcclxuICAgIHZhciBfYSA9IHNvcnRCeU9iaiB8fCB7fSwgYXNjID0gX2EuYXNjLCBkZXNjID0gX2EuZGVzYztcclxuICAgIHZhciBvcmRlciA9IGFzYyA/IDEgOiAtMTtcclxuICAgIHZhciBzb3J0QnkgPSAoYXNjIHx8IGRlc2MpO1xyXG4gICAgLy8gVmFsaWRhdGUgb2JqZWN0IGNvbmZpZ1xyXG4gICAgdGhyb3dJbnZhbGlkQ29uZmlnRXJyb3JJZlRydWUoIXNvcnRCeSwgJ0V4cGVjdGVkIGBhc2NgIG9yIGBkZXNjYCBwcm9wZXJ0eScpO1xyXG4gICAgdGhyb3dJbnZhbGlkQ29uZmlnRXJyb3JJZlRydWUoYXNjICYmIGRlc2MsICdBbWJpZ3VvdXMgb2JqZWN0IHdpdGggYGFzY2AgYW5kIGBkZXNjYCBjb25maWcgcHJvcGVydGllcycpO1xyXG4gICAgdmFyIGNvbXBhcmVyID0gc29ydEJ5T2JqLmNvbXBhcmVyICYmIGNhc3RDb21wYXJlcihzb3J0QnlPYmouY29tcGFyZXIpO1xyXG4gICAgcmV0dXJuIHsgb3JkZXI6IG9yZGVyLCBzb3J0Qnk6IHNvcnRCeSwgY29tcGFyZXI6IGNvbXBhcmVyIH07XHJcbn07XHJcbi8vID4+PiBTT1JURVJTIDw8PFxyXG52YXIgbXVsdGlQcm9wZXJ0eVNvcnRlclByb3ZpZGVyID0gZnVuY3Rpb24gKGRlZmF1bHRDb21wYXJlcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG11bHRpUHJvcGVydHlTb3J0ZXIoc29ydEJ5LCBzb3J0QnlBcnIsIGRlcHRoLCBvcmRlciwgY29tcGFyZXIsIGEsIGIpIHtcclxuICAgICAgICB2YXIgdmFsQTtcclxuICAgICAgICB2YXIgdmFsQjtcclxuICAgICAgICBpZiAodHlwZW9mIHNvcnRCeSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdmFsQSA9IGFbc29ydEJ5XTtcclxuICAgICAgICAgICAgdmFsQiA9IGJbc29ydEJ5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNvcnRCeSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YWxBID0gc29ydEJ5KGEpO1xyXG4gICAgICAgICAgICB2YWxCID0gc29ydEJ5KGIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG9iamVjdFNvcnRlckNvbmZpZyA9IHVucGFja09iamVjdFNvcnRlcihzb3J0QnkpO1xyXG4gICAgICAgICAgICByZXR1cm4gbXVsdGlQcm9wZXJ0eVNvcnRlcihvYmplY3RTb3J0ZXJDb25maWcuc29ydEJ5LCBzb3J0QnlBcnIsIGRlcHRoLCBvYmplY3RTb3J0ZXJDb25maWcub3JkZXIsIG9iamVjdFNvcnRlckNvbmZpZy5jb21wYXJlciB8fCBkZWZhdWx0Q29tcGFyZXIsIGEsIGIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXF1YWxpdHkgPSBjb21wYXJlcih2YWxBLCB2YWxCLCBvcmRlcik7XHJcbiAgICAgICAgaWYgKChlcXVhbGl0eSA9PT0gMCB8fCAodmFsQSA9PSBudWxsICYmIHZhbEIgPT0gbnVsbCkpICYmXHJcbiAgICAgICAgICAgIHNvcnRCeUFyci5sZW5ndGggPiBkZXB0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbXVsdGlQcm9wZXJ0eVNvcnRlcihzb3J0QnlBcnJbZGVwdGhdLCBzb3J0QnlBcnIsIGRlcHRoICsgMSwgb3JkZXIsIGNvbXBhcmVyLCBhLCBiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVxdWFsaXR5O1xyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gZ2V0U29ydFN0cmF0ZWd5KHNvcnRCeSwgY29tcGFyZXIsIG9yZGVyKSB7XHJcbiAgICAvLyBGbGF0IGFycmF5IHNvcnRlclxyXG4gICAgaWYgKHNvcnRCeSA9PT0gdW5kZWZpbmVkIHx8IHNvcnRCeSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY29tcGFyZXIoYSwgYiwgb3JkZXIpOyB9O1xyXG4gICAgfVxyXG4gICAgLy8gU29ydCBsaXN0IG9mIG9iamVjdHMgYnkgc2luZ2xlIG9iamVjdCBrZXlcclxuICAgIGlmICh0eXBlb2Ygc29ydEJ5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRocm93SW52YWxpZENvbmZpZ0Vycm9ySWZUcnVlKHNvcnRCeS5pbmNsdWRlcygnLicpLCAnU3RyaW5nIHN5bnRheCBub3QgYWxsb3dlZCBmb3IgbmVzdGVkIHByb3BlcnRpZXMuJyk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjb21wYXJlcihhW3NvcnRCeV0sIGJbc29ydEJ5XSwgb3JkZXIpOyB9O1xyXG4gICAgfVxyXG4gICAgLy8gU29ydCBsaXN0IG9mIG9iamVjdHMgYnkgc2luZ2xlIGZ1bmN0aW9uIHNvcnRlclxyXG4gICAgaWYgKHR5cGVvZiBzb3J0QnkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNvbXBhcmVyKHNvcnRCeShhKSwgc29ydEJ5KGIpLCBvcmRlcik7IH07XHJcbiAgICB9XHJcbiAgICAvLyBTb3J0IGJ5IG11bHRpcGxlIHByb3BlcnRpZXNcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHNvcnRCeSkpIHtcclxuICAgICAgICB2YXIgbXVsdGlQcm9wU29ydGVyXzEgPSBtdWx0aVByb3BlcnR5U29ydGVyUHJvdmlkZXIoY29tcGFyZXIpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gbXVsdGlQcm9wU29ydGVyXzEoc29ydEJ5WzBdLCBzb3J0QnksIDEsIG9yZGVyLCBjb21wYXJlciwgYSwgYik7IH07XHJcbiAgICB9XHJcbiAgICAvLyBVbnBhY2sgb2JqZWN0IGNvbmZpZyB0byBnZXQgYWN0dWFsIHNvcnRlciBzdHJhdGVneVxyXG4gICAgdmFyIG9iamVjdFNvcnRlckNvbmZpZyA9IHVucGFja09iamVjdFNvcnRlcihzb3J0QnkpO1xyXG4gICAgcmV0dXJuIGdldFNvcnRTdHJhdGVneShvYmplY3RTb3J0ZXJDb25maWcuc29ydEJ5LCBvYmplY3RTb3J0ZXJDb25maWcuY29tcGFyZXIgfHwgY29tcGFyZXIsIG9iamVjdFNvcnRlckNvbmZpZy5vcmRlcik7XHJcbn1cclxudmFyIHNvcnRBcnJheSA9IGZ1bmN0aW9uIChvcmRlciwgY3R4LCBzb3J0QnksIGNvbXBhcmVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3R4KSkge1xyXG4gICAgICAgIHJldHVybiBjdHg7XHJcbiAgICB9XHJcbiAgICAvLyBVbndyYXAgc29ydEJ5IGlmIGFycmF5IHdpdGggb25seSAxIHZhbHVlIHRvIGdldCBmYXN0ZXIgc29ydCBzdHJhdGVneVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc29ydEJ5KSAmJiBzb3J0QnkubGVuZ3RoIDwgMikge1xyXG4gICAgICAgIF9hID0gc29ydEJ5LCBzb3J0QnkgPSBfYVswXTtcclxuICAgIH1cclxuICAgIHJldHVybiBjdHguc29ydChnZXRTb3J0U3RyYXRlZ3koc29ydEJ5LCBjb21wYXJlciwgb3JkZXIpKTtcclxufTtcclxuZnVuY3Rpb24gY3JlYXRlTmV3U29ydEluc3RhbmNlKG9wdHMpIHtcclxuICAgIHZhciBjb21wYXJlciA9IGNhc3RDb21wYXJlcihvcHRzLmNvbXBhcmVyKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoX2N0eCkge1xyXG4gICAgICAgIHZhciBjdHggPSBBcnJheS5pc0FycmF5KF9jdHgpICYmICFvcHRzLmluUGxhY2VTb3J0aW5nXHJcbiAgICAgICAgICAgID8gX2N0eC5zbGljZSgpXHJcbiAgICAgICAgICAgIDogX2N0eDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhc2M6IGZ1bmN0aW9uIChzb3J0QnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzb3J0QXJyYXkoMSwgY3R4LCBzb3J0QnksIGNvbXBhcmVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVzYzogZnVuY3Rpb24gKHNvcnRCeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvcnRBcnJheSgtMSwgY3R4LCBzb3J0QnksIGNvbXBhcmVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnk6IGZ1bmN0aW9uIChzb3J0QnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzb3J0QXJyYXkoMSwgY3R4LCBzb3J0QnksIGNvbXBhcmVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufVxyXG52YXIgZGVmYXVsdENvbXBhcmVyID0gZnVuY3Rpb24gKGEsIGIsIG9yZGVyKSB7XHJcbiAgICBpZiAoYSA9PSBudWxsKVxyXG4gICAgICAgIHJldHVybiBvcmRlcjtcclxuICAgIGlmIChiID09IG51bGwpXHJcbiAgICAgICAgcmV0dXJuIC1vcmRlcjtcclxuICAgIGlmIChhIDwgYilcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICBpZiAoYSA+IGIpXHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICByZXR1cm4gMDtcclxufTtcclxudmFyIHNvcnQgPSBjcmVhdGVOZXdTb3J0SW5zdGFuY2Uoe1xyXG4gICAgY29tcGFyZXI6IGRlZmF1bHRDb21wYXJlcixcclxufSk7XHJcbnZhciBpblBsYWNlU29ydCA9IGNyZWF0ZU5ld1NvcnRJbnN0YW5jZSh7XHJcbiAgICBjb21wYXJlcjogZGVmYXVsdENvbXBhcmVyLFxyXG4gICAgaW5QbGFjZVNvcnRpbmc6IHRydWUsXHJcbn0pO1xuXG5leHBvcnQgeyBjcmVhdGVOZXdTb3J0SW5zdGFuY2UsIGRlZmF1bHRDb21wYXJlciwgaW5QbGFjZVNvcnQsIHNvcnQgfTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBK0M7OztBQ0EvQyx1QkFhTzs7O0FDUEMsSUFBVSxtQkFBcUIsU0FBUyxVQUFTO0FBQ2pELElBQUEsU0FBVyxPQUFNO0FBQ2pCLElBQVUsaUJBQW1CLE9BQU8sVUFBUztBQUtyRCxJQUFBLGNBQUEsV0FBQTtBQUFBLDBCQUFBO0FBQ1UsU0FBSyxRQUFVLENBQUE7QUFDZixTQUFPLFVBQVUsQ0FBQTs7QUFFekIsZUFB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
